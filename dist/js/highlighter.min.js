(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _initiation = require('./structure/initiation.js');

var _initiation2 = _interopRequireDefault(_initiation);

var _highlighteractivation = require('./structure/highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

var _drawstyles = require('./structure/drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

var _saveload = require('./structure/saveload.js');

var _saveload2 = _interopRequireDefault(_saveload);

var _functions = require('./structure/functions.js');

var _functions2 = _interopRequireDefault(_functions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Highlighter = function () {
	function Highlighter(options) {
		_classCallCheck(this, Highlighter);

		this.options = options;
		this.events = {};
		this.imageData = '';
		_initiation2.default.initCanvas(this);
	}

	_createClass(Highlighter, [{
		key: 'getElement',
		value: function getElement() {
			var element = document.querySelector('#' + this.options.element);
			if (!_functions2.default.getFromHighlighterOptions(this, 'element') || !element) {
				throw 'element id not detected';
			}
			return element;
		}
	}, {
		key: 'getCanvasElement',
		value: function getCanvasElement() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasElement');
		}
	}, {
		key: 'getCanvasContainer',
		value: function getCanvasContainer() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasContainer');
		}
	}, {
		key: 'getCanvasContainerDimensions',
		value: function getCanvasContainerDimensions() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasContainerDimensions');
		}
	}, {
		key: 'getWholeContainer',
		value: function getWholeContainer() {
			return _functions2.default.getFromHighlighterOptions(this, 'container') ? document.querySelector(_functions2.default.getFromHighlighterOptions(this, 'container')) : document.querySelector('body');
		}
	}, {
		key: 'getZIndex',
		value: function getZIndex() {
			return _functions2.default.getFromHighlighterOptions(this, 'zIndex') || '1';
		}
	}, {
		key: 'getCalibarationLevel',
		value: function getCalibarationLevel() {
			return _functions2.default.getFromHighlighterOptions(this, 'calibarationLevel') || 10;
		}
	}, {
		key: 'getLanguage',
		value: function getLanguage() {
			return _functions2.default.getFromHighlighterOptions(this, 'lang') || 'e';
		}
	}, {
		key: 'getRadius',
		value: function getRadius() {
			return _functions2.default.getFromHighlighterOptions(this, 'radius') || 10;
		}
	}, {
		key: 'getContext',
		value: function getContext() {
			return this.getCanvasElement().getContext('2d');
		}
	}, {
		key: 'getOpacity',
		value: function getOpacity() {
			return _functions2.default.getFromHighlighterOptions(this, 'opacity');
		}
	}, {
		key: 'getColor',
		value: function getColor() {
			return _functions2.default.getFromHighlighterOptions(this, 'color') || 'yellow';
		}
	}, {
		key: 'activateHighlighter',
		value: function activateHighlighter() {
			_highlighteractivation2.default.activate(this);
		}
	}, {
		key: 'deactivateHighlighter',
		value: function deactivateHighlighter() {
			_highlighteractivation2.default.deactivate(this);
		}
	}, {
		key: 'startMarker',
		value: function startMarker() {
			_drawstyles2.default.initMarkStyle(this);
		}
	}, {
		key: 'startEraser',
		value: function startEraser() {
			_drawstyles2.default.initEraseStyle(this);
		}
	}, {
		key: 'clearCanvas',
		value: function clearCanvas() {
			_drawstyles2.default.clear(this);
		}
	}, {
		key: 'saveImage',
		value: function saveImage() {
			_saveload2.default.save(this);
		}
	}, {
		key: 'loadImage',
		value: function loadImage() {
			_saveload2.default.load(this);
		}
	}]);

	return Highlighter;
}();

window.Highlighter = Highlighter;

},{"./structure/drawstyles.js":5,"./structure/functions.js":6,"./structure/highlighteractivation.js":7,"./structure/initiation.js":8,"./structure/saveload.js":9}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

// calibaration algorithms for x and Y positions of points
exports.default = function () {

	function calibarateX(clientX, parents, canvasContainer, calibarationLevel, lang) {
		var elementX = clientX;
		elementX = calibarateElementX(elementX, parents);
		elementX = calibarateScrollLeft(elementX, parents, canvasContainer);
		elementX = calibarateScaleX(elementX, canvasContainer, calibarationLevel, lang);
		return elementX;
	}

	function calibarateY(clientY, parents, canvasContainer, calibarationLevel, transformOriginY) {
		var elementY = clientY;
		elementY = calibarateElementY(elementY, parents);
		elementY = calibarateScrollTop(elementY, parents, canvasContainer);
		elementY = calibarateScaleY(elementY, canvasContainer, calibarationLevel, transformOriginY);
		return elementY;
	}

	// in case of absolute divs only - calculate left
	function calibarateElementX(clientX, parents) {
		var additions = 0,
		    accumOffsetLeft = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().left - accumOffsetLeft;
			accumOffsetLeft += element.getBoundingClientRect().left;
		});
		return clientX - additions;
	}

	// in case of absolute divs only - calculate top
	function calibarateElementY(clientY, parents) {
		var additions = 0,
		    accumOffsetTop = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().top - accumOffsetTop;
			accumOffsetTop += element.getBoundingClientRect().top;
		});
		return clientY - additions;
	}

	// calculate scroll left
	function calibarateScrollLeft(clientX, parents, container) {
		var initialWidth = container.offsetWidth,
		    scaledWidth = container.getBoundingClientRect().width,
		    widthDiff = scaledWidth - initialWidth,
		    scaleX = scaledWidth / initialWidth,
		    additions = 0;

		scaleX = parseFloat(scaleX.toFixed(5));

		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollLeft + element.scrollLeft * (scaleX - 1);
			} else {
				additions += element.scrollLeft;
			}
		});
		return clientX + additions;
	}

	// calculate scroll top
	function calibarateScrollTop(clientY, parents, container) {
		var initialHeight = container.offsetHeight,
		    scaledHeight = container.getBoundingClientRect().height,
		    scaleY = scaledHeight / initialHeight,
		    additions = 0;

		scaleY = parseFloat(scaleY.toFixed(5));

		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollTop + element.scrollTop * (scaleY - 1);
			} else {
				additions += element.scrollTop;
			}
		});
		return clientY + additions;
	}

	// calculate scale X
	function calibarateScaleX(clientX, container, calDegree, lang) {
		var initialWidth = container.offsetWidth,
		    scaledWidth = container.getBoundingClientRect().width,
		    widthDiff = scaledWidth - initialWidth,
		    scaleX = scaledWidth / initialWidth,
		    calibaratedValue = 0;

		scaleX = parseFloat(scaleX.toFixed(5));

		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientX * Math.pow(1 - scaleX, calLevel);
		}

		if (lang === 'a') {
			// calibarate width
			for (var _calLevel = 0; _calLevel <= calDegree; _calLevel++) {
				calibaratedValue += widthDiff * Math.pow(1 - scaleX, _calLevel);
			}
			return calibaratedValue;
		}

		return calibaratedValue;
	}

	// calculate scale Y
	function calibarateScaleY(clientY, container, calDegree, transformOriginY) {
		transformOriginY = Number(transformOriginY);
		var initialHeight = container.offsetHeight,
		    scaledHeight = container.getBoundingClientRect().height,
		    transformOriginYCorrectionFactor = transformOriginY / (scaledHeight + transformOriginY),
		    scaleY = scaledHeight / initialHeight,
		    calibaratedValue = 0;

		scaleY = parseFloat(scaleY.toFixed(5));

		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientY * Math.pow(1 - scaleY, calLevel);
		}
		for (var _calLevel2 = 1; _calLevel2 <= calDegree; _calLevel2++) {
			calibaratedValue -= transformOriginY * Math.pow(1 - scaleY, _calLevel2);
		}
		return calibaratedValue;
	}

	return {
		calibarateX: calibarateX,
		calibarateY: calibarateY
	};
}();

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _functions = require("./functions.js");

var _functions2 = _interopRequireDefault(_functions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// default canvas style
function initCanvasStyle(highlighter) {
	var context = highlighter.getContext(),
	    radius = highlighter.getRadius();

	context.lineCap = "round";
	context.lineJoin = "round";
	context.globalCompositeOperation = "source-over";
	context.strokeStyle = highlighter.getColor();
	context.fillStyle = highlighter.getColor();
	context.lineWidth = radius * 2;
}

// Adjust canvas container position and dimensions with none scaled element
function canvasContainerAdjust(highlighter, canvasContainer, element) {
	var elementPositions = _functions2.default.getPosition(element),
	    canvasContainerDimensions = {
		width: element.getBoundingClientRect().width,
		height: element.getBoundingClientRect().height,
		left: elementPositions.x,
		top: elementPositions.y
	};

	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainerDimensions', canvasContainerDimensions);

	canvasContainer.style.width = highlighter.getCanvasContainerDimensions().width + 'px';
	canvasContainer.style.height = highlighter.getCanvasContainerDimensions().height + 'px';
	canvasContainer.style.position = 'absolute';
	canvasContainer.style.overflow = 'auto';
	canvasContainer.style.left = highlighter.getCanvasContainerDimensions().left + 'px';
	canvasContainer.style.top = highlighter.getCanvasContainerDimensions().top + 'px';
	canvasContainer.style.zIndex = highlighter.getZIndex();
	canvasContainer.style.pointerEvents = 'none';
	window.addEventListener("resize", adjustCanvasOnResize.bind(highlighter));
}

// whole Container style
function wholeContainerAdjust(wholeContainer) {
	wholeContainer.style.position = wholeContainer.style.position != 'absolute' ? 'relative' : 'absolute';
}

// element on resize
function adjustCanvasOnResize() {
	var canvasContainer = this.getCanvasContainer(),
	    element = this.getElement(),
	    elementPositions = _functions2.default.getPosition(element);
	canvasContainer.style.left = elementPositions.x + 'px';
	canvasContainer.style.top = elementPositions.y + 'px';
}

// Adjust canvas element dimensions
function canvasElementAdjust(highlighter, canvasElement, element) {
	canvasElement.style.width = element.scrollWidth + 'px';
	canvasElement.style.display = 'block';
	canvasElement.style.position = 'absolute';
	canvasElement.style.left = '0px';
	canvasElement.style.right = '0px';
	canvasElement.style.zIndex = '1';
	canvasElement.width = element.scrollWidth;
	canvasElement.style.height = element.scrollHeight + 'px';
	canvasElement.height = element.scrollHeight;
	canvasElement.style.opacity = highlighter.getOpacity();
}

function init(highlighter, wholeContainer, canvasContainer, element, canvasElement) {
	wholeContainerAdjust(wholeContainer);
	canvasContainerAdjust(highlighter, canvasContainer, element);
	canvasElementAdjust(highlighter, canvasElement, element);
	initCanvasStyle(highlighter);
}

exports.default = {
	init: init
};

},{"./functions.js":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _calibartion = require('./calibartion.js');

var _calibartion2 = _interopRequireDefault(_calibartion);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// put a point on canvas
function putPoint(highlighter, elementX, elementY) {
	var context = highlighter.getContext(),
	    radius = highlighter.getRadius();
	context.beginPath();
	context.arc(elementX, elementY, radius, 0, Math.PI * 2);
	context.fill();
}

// start paint on canvas
function startDrawing(event) {
	var parents = $(event.target).parents(),
	    container = event.target.parentNode,
	    elementX = event.touches ? event.touches[0].clientX : event.pageX,
	    elementY = event.touches ? event.touches[0].clientY : event.pageY,
	    transformOriginY = $(container).css('transform-origin').split(' ')[1],
	    calibarationLevel = this.getCalibarationLevel(),
	    lang = this.getLanguage(),
	    context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

// draw lines on canvas
function drawLine(event) {
	var parents = $(event.target).parents(),
	    container = event.target.parentNode,
	    elementX = event.touches ? event.touches[0].clientX : event.pageX,
	    elementY = event.touches ? event.touches[0].clientY : event.pageY,
	    transformOriginY = $(container).css('transform-origin').split(' ')[1],
	    calibarationLevel = this.getCalibarationLevel(),
	    lang = this.getLanguage(),
	    context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	context.lineTo(elementX, elementY);
	context.stroke();
	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

exports.default = {
	putPoint: putPoint,
	startDrawing: startDrawing,
	drawLine: drawLine
};

},{"./calibartion.js":2}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
function initMarkStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "source-over";
}

function initEraseStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "destination-out";
}

function clear(highlighter) {
	var context = highlighter.getContext();
	var canvas = highlighter.getCanvasElement();
	context.clearRect(0, 0, canvas.width, canvas.height);
}

exports.default = {
	initMarkStyle: initMarkStyle,
	initEraseStyle: initEraseStyle,
	clear: clear
};

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
// get position of element
function getPos(el) {
	var elements = [];
	for (var _lx = 0, _ly = 0; el != null; _lx += el.offsetLeft, _ly += el.offsetTop, el = el.offsetParent) {
		elements.push(el);
	}
	return { x: lx, y: ly, elements: elements };
}

// Helper function to get an element's exact position
function getPosition(el) {
	var xPos = 0,
	    yPos = 0;

	while (el) {
		if (el.tagName == "BODY") {
			// deal with browser quirks with body/window/document and page scroll
			var xScroll = el.scrollLeft || document.documentElement.scrollLeft,
			    yScroll = el.scrollTop || document.documentElement.scrollTop;

			xPos += el.offsetLeft - xScroll + el.clientLeft;
			yPos += el.offsetTop - yScroll + el.clientTop;
		} else {
			// for all other non-BODY elements
			xPos += el.offsetLeft - el.scrollLeft + el.clientLeft;
			yPos += el.offsetTop - el.scrollTop + el.clientTop;
		}

		el = el.offsetParent;
	}
	return {
		x: xPos,
		y: yPos
	};
}

function addToHighlighterOptions(highlighter, key, value) {
	highlighter.options[key] = value;
}

function getFromHighlighterOptions(highlighter, key) {
	return highlighter.options[key];
}

exports.default = {
	getPos: getPos,
	getPosition: getPosition,
	addToHighlighterOptions: addToHighlighterOptions,
	getFromHighlighterOptions: getFromHighlighterOptions
};

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var activeCanvasClass = 'active-canvas-highlighter';

function activate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'auto';
	_scrollattach2.default.unhookCanvasFromElement(highlighter);
	_scrollattach2.default.hookElementToCanvas(highlighter);
}

function deactivate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'none';
	_scrollattach2.default.hookCanvasToElement(highlighter);
	_scrollattach2.default.unhookElementFromCanvas(highlighter);
}

function initActiveCanvasStyle() {
	if (!document.getElementById('canvashighlighter')) {
		var style = document.createElement('style');
		style.type = 'text/css';
		style.id = 'canvashighlighter';
		style.innerHTML = 'canvas.' + activeCanvasClass + ' { z-index: 2 !important;}';
		document.getElementsByTagName('head')[0].appendChild(style);
	}
}

exports.default = {
	activate: activate,
	deactivate: deactivate,
	initActiveCanvasStyle: initActiveCanvasStyle,
	activeCanvasClass: activeCanvasClass
};

},{"./scrollattach.js":10}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _draw = require('./draw.js');

var _draw2 = _interopRequireDefault(_draw);

var _functions = require('./functions.js');

var _functions2 = _interopRequireDefault(_functions);

var _canvasstyledimension = require('./canvasstyledimension.js');

var _canvasstyledimension2 = _interopRequireDefault(_canvasstyledimension);

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

var _highlighteractivation = require('./highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// initiate canvas on initiating highlighter object
function initCanvas(highlighter) {
	var wholeContainer = highlighter.getWholeContainer(),
	    element = highlighter.getElement(),

	// build canvas
	canvasElement = document.createElement('canvas'),

	// build canvas container
	canvasContainer = buildCanvasContainer(highlighter);

	// append elements
	canvasContainer.appendChild(canvasElement);
	wholeContainer.appendChild(canvasContainer);

	// add to highlighter
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainer', canvasContainer);
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasElement', canvasElement);

	// init canvas styles and dimensions
	_canvasstyledimension2.default.init(highlighter, wholeContainer, canvasContainer, element, canvasElement);

	// bind canvas to element on scroll
	scrollAttachement(highlighter);

	// start draw on canvas
	drawCode(highlighter, canvasElement);

	// make canvas active class
	_highlighteractivation2.default.initActiveCanvasStyle();
}

function scrollAttachement(highlighter) {
	_scrollattach2.default.initVariables(highlighter);
	_scrollattach2.default.hookCanvasToElement(highlighter);
}

function drawCode(highlighter, canvasElement) {
	canvasElement.addEventListener('touchstart', _draw2.default.startDrawing.bind(highlighter), false);
	canvasElement.addEventListener('touchmove', _draw2.default.drawLine.bind(highlighter), false);
}

function buildCanvasContainer(highlighter) {
	var canvasContainer = void 0,
	    canvasContainerId = '#' + makeCanvasContainerId(highlighter);
	if (!document.querySelector(canvasContainerId)) {
		canvasContainer = document.createElement('div');
		canvasContainer.setAttribute('id', makeCanvasContainerId(highlighter));
	} else {
		canvasContainer = document.querySelector(canvasContainerId);
	}
	return canvasContainer;
}

function makeCanvasContainerId(highlighter) {
	var elementId = highlighter.options.element,
	    canvasContainerId = elementId + '-canvasContainer';
	return canvasContainerId;
}

exports.default = {
	initCanvas: initCanvas
};

},{"./canvasstyledimension.js":3,"./draw.js":4,"./functions.js":6,"./highlighteractivation.js":7,"./scrollattach.js":10}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _drawstyles = require('./drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function save(highlighter) {
	var canvasElement = highlighter.getCanvasElement(),
	    imageData = canvasElement.toDataURL();
	highlighter.imageData = imageData;
	return imageData;
}

function load(highlighter) {
	if (highlighter.imageData) {
		(function () {
			_drawstyles2.default.clear(highlighter);
			_drawstyles2.default.initMarkStyle(highlighter);
			var canvasElement = highlighter.getCanvasElement(),
			    image = new Image();
			image.src = highlighter.imageData;
			image.onload = function () {
				canvasElement.getContext('2d').drawImage(image, 0, 0);
			};
		})();
	}
}

exports.default = {
	save: save,
	load: load
};

},{"./drawstyles.js":5}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var element = void 0,
    canvasContainer = void 0;

function attachCanvasToElementEvent() {
	canvasContainer.scrollTop = element.scrollTop;
	canvasContainer.scrollLeft = element.scrollLeft;
}

function attachElementToCanvasEvent() {
	element.scrollTop = canvasContainer.scrollTop;
	element.scrollLeft = canvasContainer.scrollLeft;
}

function initVariables(highlighter) {
	canvasContainer = highlighter.getCanvasContainer();
	element = highlighter.getElement();
	highlighter.events.attachCanvasToElementEvent = attachCanvasToElementEvent;
	highlighter.events.attachElementToCanvasEvent = attachElementToCanvasEvent;
}

function hookCanvasToElement(highlighter) {
	element.addEventListener('scroll', highlighter.events.attachCanvasToElementEvent);
}

function unhookCanvasFromElement(highlighter) {
	element.removeEventListener('scroll', highlighter.events.attachCanvasToElementEvent);
}

function hookElementToCanvas(highlighter) {
	canvasContainer.addEventListener('scroll', highlighter.events.attachElementToCanvasEvent);
}

function unhookElementFromCanvas(highlighter) {
	canvasContainer.removeEventListener('scroll', highlighter.events.attachElementToCanvasEvent);
}

exports.default = {
	initVariables: initVariables,
	hookCanvasToElement: hookCanvasToElement,
	unhookCanvasFromElement: unhookCanvasFromElement,
	hookElementToCanvas: hookElementToCanvas,
	unhookElementFromCanvas: unhookElementFromCanvas
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaGlnaGxpZ2h0ZXIuanMiLCJzcmMvanMvc3RydWN0dXJlL2NhbGliYXJ0aW9uLmpzIiwic3JjL2pzL3N0cnVjdHVyZS9jYW52YXNzdHlsZWRpbWVuc2lvbi5qcyIsInNyYy9qcy9zdHJ1Y3R1cmUvZHJhdy5qcyIsInNyYy9qcy9zdHJ1Y3R1cmUvZHJhd3N0eWxlcy5qcyIsInNyYy9qcy9zdHJ1Y3R1cmUvZnVuY3Rpb25zLmpzIiwic3JjL2pzL3N0cnVjdHVyZS9oaWdobGlnaHRlcmFjdGl2YXRpb24uanMiLCJzcmMvanMvc3RydWN0dXJlL2luaXRpYXRpb24uanMiLCJzcmMvanMvc3RydWN0dXJlL3NhdmVsb2FkLmpzIiwic3JjL2pzL3N0cnVjdHVyZS9zY3JvbGxhdHRhY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFTSxXO0FBQ0wsc0JBQVksT0FBWixFQUFxQjtBQUFBOztBQUNwQixPQUFLLE9BQUwsR0FBZSxPQUFmO0FBQ0EsT0FBSyxNQUFMLEdBQWMsRUFBZDtBQUNBLE9BQUssU0FBTCxHQUFpQixFQUFqQjtBQUNBLHVCQUFXLFVBQVgsQ0FBc0IsSUFBdEI7QUFDQTs7OzsrQkFFWTtBQUNaLE9BQUksVUFBVSxTQUFTLGFBQVQsT0FBMkIsS0FBSyxPQUFMLENBQWEsT0FBeEMsQ0FBZDtBQUNBLE9BQUcsQ0FBQyxvQkFBVSx5QkFBVixDQUFvQyxJQUFwQyxFQUEwQyxTQUExQyxDQUFELElBQXlELENBQUMsT0FBN0QsRUFBc0U7QUFDckUsVUFBTSx5QkFBTjtBQUNBO0FBQ0QsVUFBTyxPQUFQO0FBQ0E7OztxQ0FFa0I7QUFDbEIsVUFBTyxvQkFBVSx5QkFBVixDQUFvQyxJQUFwQyxFQUEwQyxlQUExQyxDQUFQO0FBQ0E7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V0FBN0IsRUFBMEM7QUFDekMsaUJBQWdCLGdCQUFoQixDQUFpQyxRQUFqQyxFQUEyQyxZQUFZLE1BQVosQ0FBbUIsMEJBQTlEO0FBQ0E7O0FBRUQsU0FBUyx1QkFBVCxDQUFpQyxXQUFqQyxFQUE4QztBQUM3QyxpQkFBZ0IsbUJBQWhCLENBQW9DLFFBQXBDLEVBQThDLFlBQVksTUFBWixDQUFtQiwwQkFBakU7QUFDQTs7a0JBRWM7QUFDZCxnQkFBZSxhQUREO0FBRWQsc0JBQXFCLG1CQUZQO0FBR2QsMEJBQXlCLHVCQUhYO0FBSWQsc0JBQXFCLG1CQUpQO0FBS2QsMEJBQXlCO0FBTFgsQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgaW5pdGlhdGlvbiBmcm9tICcuL3N0cnVjdHVyZS9pbml0aWF0aW9uLmpzJztcbmltcG9ydCBoaWdobGlnaHRlckFjdGl2YXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaGlnaGxpZ2h0ZXJhY3RpdmF0aW9uLmpzJztcbmltcG9ydCBkcmF3U3R5bGVzIGZyb20gJy4vc3RydWN0dXJlL2RyYXdzdHlsZXMuanMnO1xuaW1wb3J0IHNhdmVsb2FkIGZyb20gJy4vc3RydWN0dXJlL3NhdmVsb2FkLmpzJztcbmltcG9ydCBmdW5jdGlvbnMgZnJvbSAnLi9zdHJ1Y3R1cmUvZnVuY3Rpb25zLmpzJztcblxuY2xhc3MgSGlnaGxpZ2h0ZXIge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXHRcdHRoaXMuaW1hZ2VEYXRhID0gJyc7XG5cdFx0aW5pdGlhdGlvbi5pbml0Q2FudmFzKHRoaXMpO1xuXHR9XG5cblx0Z2V0RWxlbWVudCgpIHtcblx0XHRsZXQgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMub3B0aW9ucy5lbGVtZW50fWApO1xuXHRcdGlmKCFmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnZWxlbWVudCcpIHx8ICFlbGVtZW50ICl7XG5cdFx0XHR0aHJvdyAnZWxlbWVudCBpZCBub3QgZGV0ZWN0ZWQnO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbWVudDtcblx0fVxuXG5cdGdldENhbnZhc0VsZW1lbnQoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjYW52YXNFbGVtZW50Jyk7XG5cdH1cblxuXHRnZXRDYW52YXNDb250YWluZXIoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjYW52YXNDb250YWluZXInKTtcblx0fVxuXG5cdGdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjYW52YXNDb250YWluZXJEaW1lbnNpb25zJyk7XG5cdH1cblxuXHRnZXRXaG9sZUNvbnRhaW5lcigpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ2NvbnRhaW5lcicpID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnY29udGFpbmVyJykpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXHR9XG5cblx0Z2V0WkluZGV4KCkge1xuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnekluZGV4JykgfHwgJzEnO1xuXHR9XG5cblx0Z2V0Q2FsaWJhcmF0aW9uTGV2ZWwoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjYWxpYmFyYXRpb25MZXZlbCcpIHx8IDEwO1xuXHR9XG5cblx0Z2V0TGFuZ3VhZ2UoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdsYW5nJykgfHwgJ2UnO1xuXHR9XG5cblx0Z2V0UmFkaXVzKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAncmFkaXVzJykgfHwgMTA7XG5cdH1cblxuXHRnZXRDb250ZXh0KCkge1xuXHRcdHJldHVybiB0aGlzLmdldENhbnZhc0VsZW1lbnQoKS5nZXRDb250ZXh0KCcyZCcpO1xuXHR9XG5cblx0Z2V0T3BhY2l0eSgpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ29wYWNpdHknKTtcblx0fVxuXG5cdGdldENvbG9yKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnY29sb3InKSB8fCAneWVsbG93Jztcblx0fVxuXG5cdGFjdGl2YXRlSGlnaGxpZ2h0ZXIoKSB7XG5cdFx0aGlnaGxpZ2h0ZXJBY3RpdmF0aW9uLmFjdGl2YXRlKHRoaXMpO1xuXHR9XG5cblx0ZGVhY3RpdmF0ZUhpZ2hsaWdodGVyKCkge1xuXHRcdGhpZ2hsaWdodGVyQWN0aXZhdGlvbi5kZWFjdGl2YXRlKHRoaXMpO1xuXHR9XG5cblx0c3RhcnRNYXJrZXIoKSB7XG5cdFx0ZHJhd1N0eWxlcy5pbml0TWFya1N0eWxlKHRoaXMpO1xuXHR9XG5cblx0c3RhcnRFcmFzZXIoKSB7XG5cdFx0ZHJhd1N0eWxlcy5pbml0RXJhc2VTdHlsZSh0aGlzKTtcblx0fVxuXG5cdGNsZWFyQ2FudmFzKCkge1xuXHRcdGRyYXdTdHlsZXMuY2xlYXIodGhpcyk7XG5cdH1cblxuXHRzYXZlSW1hZ2UoKSB7XG5cdFx0c2F2ZWxvYWQuc2F2ZSh0aGlzKTtcblx0fVxuXG5cdGxvYWRJbWFnZSgpIHtcblx0XHRzYXZlbG9hZC5sb2FkKHRoaXMpO1xuXHR9XG59XG5cbndpbmRvdy5IaWdobGlnaHRlciA9IEhpZ2hsaWdodGVyOyIsIi8vIGNhbGliYXJhdGlvbiBhbGdvcml0aG1zIGZvciB4IGFuZCBZIHBvc2l0aW9ucyBvZiBwb2ludHNcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbigpIHtcblxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlWChjbGllbnRYLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKSB7XG5cdFx0bGV0IGVsZW1lbnRYID0gY2xpZW50WDtcblx0XHRlbGVtZW50WCA9IGNhbGliYXJhdGVFbGVtZW50WChlbGVtZW50WCwgcGFyZW50cyk7XG5cdFx0ZWxlbWVudFggPSBjYWxpYmFyYXRlU2Nyb2xsTGVmdChlbGVtZW50WCwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyKTtcblx0XHRlbGVtZW50WCA9IGNhbGliYXJhdGVTY2FsZVgoZWxlbWVudFgsIGNhbnZhc0NvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIGxhbmcpO1xuXHRcdHJldHVybiBlbGVtZW50WDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVZKGNsaWVudFksIHBhcmVudHMsIGNhbnZhc0NvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIHRyYW5zZm9ybU9yaWdpblkpIHtcblx0XHRsZXQgZWxlbWVudFkgPSBjbGllbnRZO1xuXHRcdGVsZW1lbnRZID0gY2FsaWJhcmF0ZUVsZW1lbnRZKGVsZW1lbnRZLCBwYXJlbnRzKTtcblx0XHRlbGVtZW50WSA9IGNhbGliYXJhdGVTY3JvbGxUb3AoZWxlbWVudFksIHBhcmVudHMsIGNhbnZhc0NvbnRhaW5lcik7XG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlU2NhbGVZKGVsZW1lbnRZLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcblx0XHRyZXR1cm4gZWxlbWVudFk7XG5cdH1cblxuXHQvLyBpbiBjYXNlIG9mIGFic29sdXRlIGRpdnMgb25seSAtIGNhbGN1bGF0ZSBsZWZ0XG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVFbGVtZW50WChjbGllbnRYLCBwYXJlbnRzKSB7XG5cdFx0bGV0IGFkZGl0aW9ucyA9IDAsXG5cdFx0XHRhY2N1bU9mZnNldExlZnQgPSAwO1xuXHRcdHBhcmVudHMgPSBwYXJlbnRzLnRvQXJyYXkoKS5yZXZlcnNlKCk7XG5cdFx0cGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIG51bWJlcikge1xuXHRcdFx0YWRkaXRpb25zICs9IChlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBhY2N1bU9mZnNldExlZnQpO1xuXHRcdFx0YWNjdW1PZmZzZXRMZWZ0ICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHR9KTtcblx0XHRyZXR1cm4gY2xpZW50WCAtIGFkZGl0aW9ucztcblx0fVxuXG5cdC8vIGluIGNhc2Ugb2YgYWJzb2x1dGUgZGl2cyBvbmx5IC0gY2FsY3VsYXRlIHRvcFxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlRWxlbWVudFkoY2xpZW50WSwgcGFyZW50cykge1xuXHRcdGxldCBhZGRpdGlvbnMgPSAwLFxuXHRcdFx0YWNjdW1PZmZzZXRUb3AgPSAwO1xuXHRcdHBhcmVudHMgPSBwYXJlbnRzLnRvQXJyYXkoKS5yZXZlcnNlKCk7XG5cdFx0cGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIG51bWJlcikge1xuXHRcdFx0YWRkaXRpb25zICs9IChlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIGFjY3VtT2Zmc2V0VG9wKTtcblx0XHRcdGFjY3VtT2Zmc2V0VG9wICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuXHRcdH0pO1xuXHRcdHJldHVybiBjbGllbnRZIC0gYWRkaXRpb25zO1xuXHR9XG5cblx0Ly8gY2FsY3VsYXRlIHNjcm9sbCBsZWZ0XG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVTY3JvbGxMZWZ0KGNsaWVudFgsIHBhcmVudHMsIGNvbnRhaW5lcikge1xuXHRcdGxldCBpbml0aWFsV2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGgsXG5cdFx0XHRzY2FsZWRXaWR0aCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCxcblx0XHRcdHdpZHRoRGlmZiA9IHNjYWxlZFdpZHRoIC0gaW5pdGlhbFdpZHRoLFxuXHRcdFx0c2NhbGVYID0gc2NhbGVkV2lkdGggLyBpbml0aWFsV2lkdGgsXG5cdFx0XHRhZGRpdGlvbnMgPSAwO1xuXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XG5cblx0XHRwYXJlbnRzLmVhY2goZnVuY3Rpb24obnVtYmVyLCBlbGVtZW50KSB7XG5cdFx0XHRpZiAoZWxlbWVudCA9PT0gY29udGFpbmVyKSB7XG5cdFx0XHRcdGFkZGl0aW9ucyArPSBlbGVtZW50LnNjcm9sbExlZnQgKyBlbGVtZW50LnNjcm9sbExlZnQgKiAoc2NhbGVYIC0gMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxMZWZ0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBjbGllbnRYICsgYWRkaXRpb25zO1xuXHR9XG5cblx0Ly8gY2FsY3VsYXRlIHNjcm9sbCB0b3Bcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVNjcm9sbFRvcChjbGllbnRZLCBwYXJlbnRzLCBjb250YWluZXIpIHtcblx0XHRsZXQgaW5pdGlhbEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQsXG5cdFx0XHRzY2FsZWRIZWlnaHQgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxuXHRcdFx0c2NhbGVZID0gc2NhbGVkSGVpZ2h0IC8gaW5pdGlhbEhlaWdodCxcblx0XHRcdGFkZGl0aW9ucyA9IDA7XG5cblx0XHRzY2FsZVkgPSBwYXJzZUZsb2F0KHNjYWxlWS50b0ZpeGVkKDUpKTtcblxuXHRcdHBhcmVudHMuZWFjaChmdW5jdGlvbihudW1iZXIsIGVsZW1lbnQpIHtcblx0XHRcdGlmIChlbGVtZW50ID09PSBjb250YWluZXIpIHtcblx0XHRcdFx0YWRkaXRpb25zICs9IGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5zY3JvbGxUb3AgKiAoc2NhbGVZIC0gMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxUb3A7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGNsaWVudFkgKyBhZGRpdGlvbnM7XG5cdH1cblxuXHQvLyBjYWxjdWxhdGUgc2NhbGUgWFxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2NhbGVYKGNsaWVudFgsIGNvbnRhaW5lciwgY2FsRGVncmVlLCBsYW5nKSB7XG5cdFx0bGV0IGluaXRpYWxXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcblx0XHRcdHNjYWxlZFdpZHRoID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLFxuXHRcdFx0d2lkdGhEaWZmID0gc2NhbGVkV2lkdGggLSBpbml0aWFsV2lkdGgsXG5cdFx0XHRzY2FsZVggPSBzY2FsZWRXaWR0aCAvIGluaXRpYWxXaWR0aCxcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgPSAwO1xuXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XG5cblx0XHRmb3IgKGxldCBjYWxMZXZlbCA9IDA7IGNhbExldmVsIDw9IGNhbERlZ3JlZTsgY2FsTGV2ZWwrKykge1xuXHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSArPSBjbGllbnRYICogTWF0aC5wb3coMSAtIHNjYWxlWCwgY2FsTGV2ZWwpO1xuXHRcdH1cblxuXHRcdGlmIChsYW5nID09PSAnYScpIHtcblx0XHRcdC8vIGNhbGliYXJhdGUgd2lkdGhcblx0XHRcdGZvciAobGV0IF9jYWxMZXZlbCA9IDA7IF9jYWxMZXZlbCA8PSBjYWxEZWdyZWU7IF9jYWxMZXZlbCsrKSB7XG5cdFx0XHRcdGNhbGliYXJhdGVkVmFsdWUgKz0gd2lkdGhEaWZmICogTWF0aC5wb3coMSAtIHNjYWxlWCwgX2NhbExldmVsKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjYWxpYmFyYXRlZFZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBjYWxpYmFyYXRlZFZhbHVlO1xuXHR9XG5cblx0Ly8gY2FsY3VsYXRlIHNjYWxlIFlcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVNjYWxlWShjbGllbnRZLCBjb250YWluZXIsIGNhbERlZ3JlZSwgdHJhbnNmb3JtT3JpZ2luWSkge1xuXHRcdHRyYW5zZm9ybU9yaWdpblkgPSBOdW1iZXIodHJhbnNmb3JtT3JpZ2luWSk7XG5cdFx0bGV0IGluaXRpYWxIZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0LFxuXHRcdFx0c2NhbGVkSGVpZ2h0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbllDb3JyZWN0aW9uRmFjdG9yID0gdHJhbnNmb3JtT3JpZ2luWSAvIChzY2FsZWRIZWlnaHQgKyB0cmFuc2Zvcm1PcmlnaW5ZKSxcblx0XHRcdHNjYWxlWSA9IHNjYWxlZEhlaWdodCAvIGluaXRpYWxIZWlnaHQsXG5cdFx0XHRjYWxpYmFyYXRlZFZhbHVlID0gMDtcblxuXHRcdHNjYWxlWSA9IHBhcnNlRmxvYXQoc2NhbGVZLnRvRml4ZWQoNSkpO1xuXG5cdFx0Zm9yIChsZXQgY2FsTGV2ZWwgPSAwOyBjYWxMZXZlbCA8PSBjYWxEZWdyZWU7IGNhbExldmVsKyspIHtcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgKz0gY2xpZW50WSAqIE1hdGgucG93KDEgLSBzY2FsZVksIGNhbExldmVsKTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgX2NhbExldmVsMiA9IDE7IF9jYWxMZXZlbDIgPD0gY2FsRGVncmVlOyBfY2FsTGV2ZWwyKyspIHtcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgLT0gdHJhbnNmb3JtT3JpZ2luWSAqIE1hdGgucG93KDEgLSBzY2FsZVksIF9jYWxMZXZlbDIpO1xuXHRcdH1cblx0XHRyZXR1cm4gY2FsaWJhcmF0ZWRWYWx1ZTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Y2FsaWJhcmF0ZVg6IGNhbGliYXJhdGVYLFxuXHRcdGNhbGliYXJhdGVZOiBjYWxpYmFyYXRlWVxuXHR9XG5cbn0oKSk7XG4iLCJpbXBvcnQgZnVuY3Rpb25zIGZyb20gJy4vZnVuY3Rpb25zLmpzJztcblxuLy8gZGVmYXVsdCBjYW52YXMgc3R5bGVcbmZ1bmN0aW9uIGluaXRDYW52YXNTdHlsZShoaWdobGlnaHRlcikge1xuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKSxcblx0XHRyYWRpdXMgPSBoaWdobGlnaHRlci5nZXRSYWRpdXMoKTtcblxuXHRjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XG5cdGNvbnRleHQubGluZUpvaW4gPSBcInJvdW5kXCI7XG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xuXHRjb250ZXh0LnN0cm9rZVN0eWxlID0gaGlnaGxpZ2h0ZXIuZ2V0Q29sb3IoKTtcblx0Y29udGV4dC5maWxsU3R5bGUgPSBoaWdobGlnaHRlci5nZXRDb2xvcigpO1xuXHRjb250ZXh0LmxpbmVXaWR0aCA9IHJhZGl1cyAqIDI7XG59XG5cbi8vIEFkanVzdCBjYW52YXMgY29udGFpbmVyIHBvc2l0aW9uIGFuZCBkaW1lbnNpb25zIHdpdGggbm9uZSBzY2FsZWQgZWxlbWVudFxuZnVuY3Rpb24gY2FudmFzQ29udGFpbmVyQWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQpIHtcblx0bGV0IGVsZW1lbnRQb3NpdGlvbnMgPSBmdW5jdGlvbnMuZ2V0UG9zaXRpb24oZWxlbWVudCksXG5cdFx0Y2FudmFzQ29udGFpbmVyRGltZW5zaW9ucyA9IHtcblx0XHRcdHdpZHRoOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLFxuXHRcdFx0aGVpZ2h0OiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcblx0XHRcdGxlZnQ6IGVsZW1lbnRQb3NpdGlvbnMueCxcblx0XHRcdHRvcDogZWxlbWVudFBvc2l0aW9ucy55LFxuXHRcdH07XG5cblx0ZnVuY3Rpb25zLmFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zKGhpZ2hsaWdodGVyLCAnY2FudmFzQ29udGFpbmVyRGltZW5zaW9ucycsIGNhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMpO1xuXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS53aWR0aCArICdweCc7XG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXJEaW1lbnNpb25zKCkuaGVpZ2h0ICsgJ3B4Jztcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuXHRjYW52YXNDb250YWluZXIuc3R5bGUubGVmdCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS5sZWZ0ICsgJ3B4Jztcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnRvcCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS50b3AgKyAncHgnO1xuXHRjYW52YXNDb250YWluZXIuc3R5bGUuekluZGV4ID0gaGlnaGxpZ2h0ZXIuZ2V0WkluZGV4KCk7XG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBhZGp1c3RDYW52YXNPblJlc2l6ZS5iaW5kKGhpZ2hsaWdodGVyKSk7XG59XG5cbi8vIHdob2xlIENvbnRhaW5lciBzdHlsZVxuZnVuY3Rpb24gd2hvbGVDb250YWluZXJBZGp1c3Qod2hvbGVDb250YWluZXIpIHtcblx0d2hvbGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSB3aG9sZUNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiAhPSAnYWJzb2x1dGUnID8gJ3JlbGF0aXZlJyA6ICdhYnNvbHV0ZSc7XG59XG5cbi8vIGVsZW1lbnQgb24gcmVzaXplXG5mdW5jdGlvbiBhZGp1c3RDYW52YXNPblJlc2l6ZSgpIHtcblx0bGV0IGNhbnZhc0NvbnRhaW5lciA9IHRoaXMuZ2V0Q2FudmFzQ29udGFpbmVyKCksXG5cdFx0ZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpLFxuXHRcdGVsZW1lbnRQb3NpdGlvbnMgPSBmdW5jdGlvbnMuZ2V0UG9zaXRpb24oZWxlbWVudCk7XG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gZWxlbWVudFBvc2l0aW9ucy54ICsgJ3B4Jztcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnRvcCA9IGVsZW1lbnRQb3NpdGlvbnMueSArICdweCc7XG59XG5cbi8vIEFkanVzdCBjYW52YXMgZWxlbWVudCBkaW1lbnNpb25zXG5mdW5jdGlvbiBjYW52YXNFbGVtZW50QWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNFbGVtZW50LCBlbGVtZW50KSB7XG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50LnNjcm9sbFdpZHRoICsgJ3B4Jztcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xuXHRjYW52YXNFbGVtZW50LnN0eWxlLnJpZ2h0ID0gJzBweCc7XG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUuekluZGV4ID0gJzEnO1xuXHRjYW52YXNFbGVtZW50LndpZHRoID0gZWxlbWVudC5zY3JvbGxXaWR0aDtcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50LnNjcm9sbEhlaWdodCArICdweCc7XG5cdGNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7XG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUub3BhY2l0eSA9IGhpZ2hsaWdodGVyLmdldE9wYWNpdHkoKTtcbn1cblxuZnVuY3Rpb24gaW5pdChoaWdobGlnaHRlciwgd2hvbGVDb250YWluZXIsIGNhbnZhc0NvbnRhaW5lciwgZWxlbWVudCwgY2FudmFzRWxlbWVudCkge1xuXHR3aG9sZUNvbnRhaW5lckFkanVzdCh3aG9sZUNvbnRhaW5lcik7XG5cdGNhbnZhc0NvbnRhaW5lckFkanVzdChoaWdobGlnaHRlciwgY2FudmFzQ29udGFpbmVyLCBlbGVtZW50KTtcblx0Y2FudmFzRWxlbWVudEFkanVzdChoaWdobGlnaHRlciwgY2FudmFzRWxlbWVudCwgZWxlbWVudCk7XG5cdGluaXRDYW52YXNTdHlsZShoaWdobGlnaHRlcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcblx0aW5pdDogaW5pdFxufVxuIiwiaW1wb3J0IGNhbGliYXJ0aW9uIGZyb20gJy4vY2FsaWJhcnRpb24uanMnO1xuXG4vLyBwdXQgYSBwb2ludCBvbiBjYW52YXNcbmZ1bmN0aW9uIHB1dFBvaW50KGhpZ2hsaWdodGVyLCBlbGVtZW50WCwgZWxlbWVudFkpIHtcblx0bGV0IGNvbnRleHQgPSBoaWdobGlnaHRlci5nZXRDb250ZXh0KCksXG5cdFx0cmFkaXVzID0gaGlnaGxpZ2h0ZXIuZ2V0UmFkaXVzKCk7XG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdGNvbnRleHQuYXJjKGVsZW1lbnRYLCBlbGVtZW50WSwgcmFkaXVzLCAwLCBNYXRoLlBJICogMik7XG5cdGNvbnRleHQuZmlsbCgpO1xufVxuXG4vLyBzdGFydCBwYWludCBvbiBjYW52YXNcbmZ1bmN0aW9uIHN0YXJ0RHJhd2luZyhldmVudCkge1xuXHRsZXQgcGFyZW50cyA9ICQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCksXG5cdFx0Y29udGFpbmVyID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUsXG5cdFx0ZWxlbWVudFggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQucGFnZVgsXG5cdFx0ZWxlbWVudFkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQucGFnZVksXG5cdFx0dHJhbnNmb3JtT3JpZ2luWSA9ICQoY29udGFpbmVyKS5jc3MoJ3RyYW5zZm9ybS1vcmlnaW4nKS5zcGxpdCgnICcpWzFdLFxuXHRcdGNhbGliYXJhdGlvbkxldmVsID0gdGhpcy5nZXRDYWxpYmFyYXRpb25MZXZlbCgpLFxuXHRcdGxhbmcgPSB0aGlzLmdldExhbmd1YWdlKCksXG5cdFx0Y29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dCgpO1xuXHR0cmFuc2Zvcm1PcmlnaW5ZID0gdHJhbnNmb3JtT3JpZ2luWS5yZXBsYWNlKCdweCcsICcnKTtcblxuXHRlbGVtZW50WCA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVYKGVsZW1lbnRYLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKTtcblx0ZWxlbWVudFkgPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWShlbGVtZW50WSwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSk7XG5cblx0cHV0UG9pbnQodGhpcywgZWxlbWVudFgsIGVsZW1lbnRZKTtcblx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0Y29udGV4dC5tb3ZlVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcbn1cblxuLy8gZHJhdyBsaW5lcyBvbiBjYW52YXNcbmZ1bmN0aW9uIGRyYXdMaW5lKGV2ZW50KSB7XG5cdGxldCBwYXJlbnRzID0gJChldmVudC50YXJnZXQpLnBhcmVudHMoKSxcblx0XHRjb250YWluZXIgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZSxcblx0XHRlbGVtZW50WCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5wYWdlWCxcblx0XHRlbGVtZW50WSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5wYWdlWSxcblx0XHR0cmFuc2Zvcm1PcmlnaW5ZID0gJChjb250YWluZXIpLmNzcygndHJhbnNmb3JtLW9yaWdpbicpLnNwbGl0KCcgJylbMV0sXG5cdFx0Y2FsaWJhcmF0aW9uTGV2ZWwgPSB0aGlzLmdldENhbGliYXJhdGlvbkxldmVsKCksXG5cdFx0bGFuZyA9IHRoaXMuZ2V0TGFuZ3VhZ2UoKSxcblx0XHRjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCk7XG5cdHRyYW5zZm9ybU9yaWdpblkgPSB0cmFuc2Zvcm1PcmlnaW5ZLnJlcGxhY2UoJ3B4JywgJycpO1xuXG5cdGVsZW1lbnRYID0gY2FsaWJhcnRpb24uY2FsaWJhcmF0ZVgoZWxlbWVudFgsIHBhcmVudHMsIGNvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIGxhbmcpO1xuXHRlbGVtZW50WSA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVZKGVsZW1lbnRZLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcblxuXHRjb250ZXh0LmxpbmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xuXHRjb250ZXh0LnN0cm9rZSgpO1xuXHRwdXRQb2ludCh0aGlzLCBlbGVtZW50WCwgZWxlbWVudFkpO1xuXHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRjb250ZXh0Lm1vdmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG5cdHB1dFBvaW50OiBwdXRQb2ludCxcblx0c3RhcnREcmF3aW5nOiBzdGFydERyYXdpbmcsXG5cdGRyYXdMaW5lOiBkcmF3TGluZVxufVxuIiwiZnVuY3Rpb24gaW5pdE1hcmtTdHlsZShoaWdobGlnaHRlcil7XG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xuXHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcbn1cblxuZnVuY3Rpb24gaW5pdEVyYXNlU3R5bGUoaGlnaGxpZ2h0ZXIpe1xuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKTtcblx0Y29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiO1xufVxuXG5mdW5jdGlvbiBjbGVhcihoaWdobGlnaHRlcil7XG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xuXHRsZXQgY2FudmFzID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpO1xuXHRjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG5cdGluaXRNYXJrU3R5bGU6IGluaXRNYXJrU3R5bGUsXG5cdGluaXRFcmFzZVN0eWxlOiBpbml0RXJhc2VTdHlsZSxcblx0Y2xlYXI6IGNsZWFyXG59XG4iLCIvLyBnZXQgcG9zaXRpb24gb2YgZWxlbWVudFxuZnVuY3Rpb24gZ2V0UG9zKGVsKSB7XG5cdGxldCBlbGVtZW50cyA9IFtdO1xuXHRmb3IgKGxldCBseCA9IDAsIGx5ID0gMDsgZWwgIT0gbnVsbDsgbHggKz0gZWwub2Zmc2V0TGVmdCwgbHkgKz0gZWwub2Zmc2V0VG9wLCBlbCA9IGVsLm9mZnNldFBhcmVudCkge1xuXHRcdGVsZW1lbnRzLnB1c2goZWwpO1xuXHR9XG5cdHJldHVybiB7IHg6IGx4LCB5OiBseSwgZWxlbWVudHM6IGVsZW1lbnRzIH07XG59XG5cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBhbiBlbGVtZW50J3MgZXhhY3QgcG9zaXRpb25cbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsKSB7XG5cdGxldCB4UG9zID0gMCxcblx0XHR5UG9zID0gMDtcblxuXHR3aGlsZSAoZWwpIHtcblx0XHRpZiAoZWwudGFnTmFtZSA9PSBcIkJPRFlcIikge1xuXHRcdFx0Ly8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzIHdpdGggYm9keS93aW5kb3cvZG9jdW1lbnQgYW5kIHBhZ2Ugc2Nyb2xsXG5cdFx0XHRsZXQgeFNjcm9sbCA9IGVsLnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXG5cdFx0XHRcdHlTY3JvbGwgPSBlbC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblxuXHRcdFx0eFBvcyArPSAoZWwub2Zmc2V0TGVmdCAtIHhTY3JvbGwgKyBlbC5jbGllbnRMZWZ0KTtcblx0XHRcdHlQb3MgKz0gKGVsLm9mZnNldFRvcCAtIHlTY3JvbGwgKyBlbC5jbGllbnRUb3ApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBmb3IgYWxsIG90aGVyIG5vbi1CT0RZIGVsZW1lbnRzXG5cdFx0XHR4UG9zICs9IChlbC5vZmZzZXRMZWZ0IC0gZWwuc2Nyb2xsTGVmdCArIGVsLmNsaWVudExlZnQpO1xuXHRcdFx0eVBvcyArPSAoZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50VG9wKTtcblx0XHR9XG5cblx0XHRlbCA9IGVsLm9mZnNldFBhcmVudDtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHg6IHhQb3MsXG5cdFx0eTogeVBvc1xuXHR9O1xufVxuXG5mdW5jdGlvbiBhZGRUb0hpZ2hsaWdodGVyT3B0aW9ucyhoaWdobGlnaHRlciwga2V5LCB2YWx1ZSkge1xuXHRoaWdobGlnaHRlci5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyhoaWdobGlnaHRlciwga2V5KSB7XG5cdHJldHVybiBoaWdobGlnaHRlci5vcHRpb25zW2tleV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcblx0Z2V0UG9zOiBnZXRQb3MsXG5cdGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbixcblx0YWRkVG9IaWdobGlnaHRlck9wdGlvbnM6IGFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zLFxuXHRnZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zOiBnZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zXG59XG4iLCJpbXBvcnQgc2Nyb2xsYXR0YWNoIGZyb20gJy4vc2Nyb2xsYXR0YWNoLmpzJztcblxubGV0IGFjdGl2ZUNhbnZhc0NsYXNzID0gJ2FjdGl2ZS1jYW52YXMtaGlnaGxpZ2h0ZXInO1xuXG5mdW5jdGlvbiBhY3RpdmF0ZShoaWdobGlnaHRlcil7XG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG5cdHNjcm9sbGF0dGFjaC51bmhvb2tDYW52YXNGcm9tRWxlbWVudChoaWdobGlnaHRlcik7XG5cdHNjcm9sbGF0dGFjaC5ob29rRWxlbWVudFRvQ2FudmFzKGhpZ2hsaWdodGVyKTtcbn1cblxuZnVuY3Rpb24gZGVhY3RpdmF0ZShoaWdobGlnaHRlcil7XG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG5cdHNjcm9sbGF0dGFjaC5ob29rQ2FudmFzVG9FbGVtZW50KGhpZ2hsaWdodGVyKTtcblx0c2Nyb2xsYXR0YWNoLnVuaG9va0VsZW1lbnRGcm9tQ2FudmFzKGhpZ2hsaWdodGVyKTtcbn1cblxuZnVuY3Rpb24gaW5pdEFjdGl2ZUNhbnZhc1N0eWxlKCl7XG5cdGlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzaGlnaGxpZ2h0ZXInKSl7XG5cdFx0bGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0XHRzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcblx0XHRzdHlsZS5pZCA9ICdjYW52YXNoaWdobGlnaHRlcic7XG5cdFx0c3R5bGUuaW5uZXJIVE1MID0gYGNhbnZhcy4ke2FjdGl2ZUNhbnZhc0NsYXNzfSB7IHotaW5kZXg6IDIgIWltcG9ydGFudDt9YDtcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG5cdGFjdGl2YXRlOiBhY3RpdmF0ZSxcblx0ZGVhY3RpdmF0ZTogZGVhY3RpdmF0ZSxcblx0aW5pdEFjdGl2ZUNhbnZhc1N0eWxlOiBpbml0QWN0aXZlQ2FudmFzU3R5bGUsXG5cdGFjdGl2ZUNhbnZhc0NsYXNzOiBhY3RpdmVDYW52YXNDbGFzc1xufSIsImltcG9ydCBkcmF3IGZyb20gJy4vZHJhdy5qcyc7XG5pbXBvcnQgZnVuY3Rpb25zIGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBjYW52YXNzdHlsZWRpbWVuc2lvbiBmcm9tICcuL2NhbnZhc3N0eWxlZGltZW5zaW9uLmpzJztcbmltcG9ydCBzY3JvbGxhdHRhY2ggZnJvbSAnLi9zY3JvbGxhdHRhY2guanMnO1xuaW1wb3J0IGhpZ2hsaWdodGVyQWN0aXZhdGlvbiBmcm9tICcuL2hpZ2hsaWdodGVyYWN0aXZhdGlvbi5qcyc7XG5cbi8vIGluaXRpYXRlIGNhbnZhcyBvbiBpbml0aWF0aW5nIGhpZ2hsaWdodGVyIG9iamVjdFxuZnVuY3Rpb24gaW5pdENhbnZhcyhoaWdobGlnaHRlcikge1xuXHRsZXQgd2hvbGVDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRXaG9sZUNvbnRhaW5lcigpLFxuXHRcdGVsZW1lbnQgPSBoaWdobGlnaHRlci5nZXRFbGVtZW50KCksXG5cdFx0Ly8gYnVpbGQgY2FudmFzXG5cdFx0Y2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxuXHRcdC8vIGJ1aWxkIGNhbnZhcyBjb250YWluZXJcblx0XHRjYW52YXNDb250YWluZXIgPSBidWlsZENhbnZhc0NvbnRhaW5lcihoaWdobGlnaHRlcik7XG5cblxuXHQvLyBhcHBlbmQgZWxlbWVudHNcblx0Y2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhc0VsZW1lbnQpO1xuXHR3aG9sZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXNDb250YWluZXIpO1xuXG5cdC8vIGFkZCB0byBoaWdobGlnaHRlclxuXHRmdW5jdGlvbnMuYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsICdjYW52YXNDb250YWluZXInLCBjYW52YXNDb250YWluZXIpO1xuXHRmdW5jdGlvbnMuYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsICdjYW52YXNFbGVtZW50JywgY2FudmFzRWxlbWVudCk7XG5cblx0Ly8gaW5pdCBjYW52YXMgc3R5bGVzIGFuZCBkaW1lbnNpb25zXG5cdGNhbnZhc3N0eWxlZGltZW5zaW9uLmluaXQoaGlnaGxpZ2h0ZXIsIHdob2xlQ29udGFpbmVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQsIGNhbnZhc0VsZW1lbnQpO1xuXG5cdC8vIGJpbmQgY2FudmFzIHRvIGVsZW1lbnQgb24gc2Nyb2xsXG5cdHNjcm9sbEF0dGFjaGVtZW50KGhpZ2hsaWdodGVyKTtcblxuXHQvLyBzdGFydCBkcmF3IG9uIGNhbnZhc1xuXHRkcmF3Q29kZShoaWdobGlnaHRlciwgY2FudmFzRWxlbWVudCk7XG5cblx0Ly8gbWFrZSBjYW52YXMgYWN0aXZlIGNsYXNzXG5cdGhpZ2hsaWdodGVyQWN0aXZhdGlvbi5pbml0QWN0aXZlQ2FudmFzU3R5bGUoKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsQXR0YWNoZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcblx0c2Nyb2xsYXR0YWNoLmluaXRWYXJpYWJsZXMoaGlnaGxpZ2h0ZXIpO1xuXHRzY3JvbGxhdHRhY2guaG9va0NhbnZhc1RvRWxlbWVudChoaWdobGlnaHRlcik7XG59XG5cbmZ1bmN0aW9uIGRyYXdDb2RlKGhpZ2hsaWdodGVyLCBjYW52YXNFbGVtZW50KSB7XG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRyYXcuc3RhcnREcmF3aW5nLmJpbmQoaGlnaGxpZ2h0ZXIpLCBmYWxzZSk7XG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZHJhdy5kcmF3TGluZS5iaW5kKGhpZ2hsaWdodGVyKSwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBidWlsZENhbnZhc0NvbnRhaW5lcihoaWdobGlnaHRlcikge1xuXHRsZXQgY2FudmFzQ29udGFpbmVyLFxuXHRcdGNhbnZhc0NvbnRhaW5lcklkID0gYCMke21ha2VDYW52YXNDb250YWluZXJJZChoaWdobGlnaHRlcil9YDtcblx0aWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhbnZhc0NvbnRhaW5lcklkKSkge1xuXHRcdGNhbnZhc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGNhbnZhc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgbWFrZUNhbnZhc0NvbnRhaW5lcklkKGhpZ2hsaWdodGVyKSk7XG5cdH0gZWxzZSB7XG5cdFx0Y2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYW52YXNDb250YWluZXJJZCk7XG5cdH1cblx0cmV0dXJuIGNhbnZhc0NvbnRhaW5lcjtcbn1cblxuZnVuY3Rpb24gbWFrZUNhbnZhc0NvbnRhaW5lcklkKGhpZ2hsaWdodGVyKSB7XG5cdGxldCBlbGVtZW50SWQgPSBoaWdobGlnaHRlci5vcHRpb25zLmVsZW1lbnQsXG5cdFx0Y2FudmFzQ29udGFpbmVySWQgPSBgJHtlbGVtZW50SWR9LWNhbnZhc0NvbnRhaW5lcmA7XG5cdHJldHVybiBjYW52YXNDb250YWluZXJJZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuXHRpbml0Q2FudmFzOiBpbml0Q2FudmFzXG59XG4iLCJpbXBvcnQgZHJhd3N0eWxlcyBmcm9tICcuL2RyYXdzdHlsZXMuanMnO1xuXG5mdW5jdGlvbiBzYXZlKGhpZ2hsaWdodGVyKSB7XG5cdGxldCBjYW52YXNFbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpLFxuXHRcdGltYWdlRGF0YSA9IGNhbnZhc0VsZW1lbnQudG9EYXRhVVJMKCk7XG5cdGhpZ2hsaWdodGVyLmltYWdlRGF0YSA9IGltYWdlRGF0YTtcblx0cmV0dXJuIGltYWdlRGF0YTtcbn1cblxuZnVuY3Rpb24gbG9hZChoaWdobGlnaHRlcikge1xuXHRpZiAoaGlnaGxpZ2h0ZXIuaW1hZ2VEYXRhKSB7XG5cdFx0ZHJhd3N0eWxlcy5jbGVhcihoaWdobGlnaHRlcik7XG5cdFx0ZHJhd3N0eWxlcy5pbml0TWFya1N0eWxlKGhpZ2hsaWdodGVyKTtcblx0XHRsZXQgY2FudmFzRWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0VsZW1lbnQoKSxcblx0XHRcdGltYWdlID0gbmV3IEltYWdlKCk7XG5cdFx0aW1hZ2Uuc3JjID0gaGlnaGxpZ2h0ZXIuaW1hZ2VEYXRhO1xuXHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2FudmFzRWxlbWVudC5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG5cdHNhdmU6IHNhdmUsXG5cdGxvYWQ6IGxvYWRcbn1cbiIsImxldCBlbGVtZW50LFxuXHRjYW52YXNDb250YWluZXI7XG5cbmZ1bmN0aW9uIGF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50KCkge1xuXHRjYW52YXNDb250YWluZXIuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3A7XG5cdGNhbnZhc0NvbnRhaW5lci5zY3JvbGxMZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xufVxuXG5mdW5jdGlvbiBhdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCgpIHtcblx0ZWxlbWVudC5zY3JvbGxUb3AgPSBjYW52YXNDb250YWluZXIuc2Nyb2xsVG9wO1xuXHRlbGVtZW50LnNjcm9sbExlZnQgPSBjYW52YXNDb250YWluZXIuc2Nyb2xsTGVmdDtcbn1cblxuZnVuY3Rpb24gaW5pdFZhcmlhYmxlcyhoaWdobGlnaHRlcikge1xuXHRjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcblx0ZWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldEVsZW1lbnQoKTtcblx0aGlnaGxpZ2h0ZXIuZXZlbnRzLmF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50ID0gYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQ7XG5cdGhpZ2hsaWdodGVyLmV2ZW50cy5hdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCA9IGF0dGFjaEVsZW1lbnRUb0NhbnZhc0V2ZW50O1xufVxuXG5mdW5jdGlvbiBob29rQ2FudmFzVG9FbGVtZW50KGhpZ2hsaWdodGVyKSB7XG5cdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGlnaGxpZ2h0ZXIuZXZlbnRzLmF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50KTtcbn1cblxuZnVuY3Rpb24gdW5ob29rQ2FudmFzRnJvbUVsZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcblx0ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoaWdobGlnaHRlci5ldmVudHMuYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQpO1xufVxuXG5mdW5jdGlvbiBob29rRWxlbWVudFRvQ2FudmFzKGhpZ2hsaWdodGVyKSB7XG5cdGNhbnZhc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoaWdobGlnaHRlci5ldmVudHMuYXR0YWNoRWxlbWVudFRvQ2FudmFzRXZlbnQpO1xufVxuXG5mdW5jdGlvbiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhcyhoaWdobGlnaHRlcikge1xuXHRjYW52YXNDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGlnaGxpZ2h0ZXIuZXZlbnRzLmF0dGFjaEVsZW1lbnRUb0NhbnZhc0V2ZW50KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuXHRpbml0VmFyaWFibGVzOiBpbml0VmFyaWFibGVzLFxuXHRob29rQ2FudmFzVG9FbGVtZW50OiBob29rQ2FudmFzVG9FbGVtZW50LFxuXHR1bmhvb2tDYW52YXNGcm9tRWxlbWVudDogdW5ob29rQ2FudmFzRnJvbUVsZW1lbnQsXG5cdGhvb2tFbGVtZW50VG9DYW52YXM6IGhvb2tFbGVtZW50VG9DYW52YXMsXG5cdHVuaG9va0VsZW1lbnRGcm9tQ2FudmFzOiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhc1xufSJdfQ==
