(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _initiation = require('./structure/initiation.js');

var _initiation2 = _interopRequireDefault(_initiation);

var _highlighteractivation = require('./structure/highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

var _drawstyles = require('./structure/drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

var _saveload = require('./structure/saveload.js');

var _saveload2 = _interopRequireDefault(_saveload);

var _functions = require('./structure/functions.js');

var _functions2 = _interopRequireDefault(_functions);

var _canvasstyledimension = require('./structure/canvasstyledimension.js');

var _canvasstyledimension2 = _interopRequireDefault(_canvasstyledimension);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Highlighter = function () {
	function Highlighter(options) {
		_classCallCheck(this, Highlighter);

		this.options = options;
		this.events = {};
		this.imageData = '';
		_initiation2.default.initCanvas(this);
	}

	_createClass(Highlighter, [{
		key: 'getElement',
		value: function getElement() {
			var element = document.querySelector('#' + this.options.element);
			if (!_functions2.default.getFromHighlighterOptions(this, 'element') || !element) {
				throw 'element id not detected';
			}
			return element;
		}
	}, {
		key: 'getDrawType',
		value: function getDrawType() {
			var drawType = _functions2.default.getFromHighlighterOptions(this, 'drawType') || 'mouse';
			if (drawType == 'mouse') {
				this.mouseState = 0;
			}
			return drawType;
		}
	}, {
		key: 'getCanvasElement',
		value: function getCanvasElement() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasElement');
		}
	}, {
		key: 'getCanvasContainer',
		value: function getCanvasContainer() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasContainer');
		}
	}, {
		key: 'getCanvasContainerDimensions',
		value: function getCanvasContainerDimensions() {
			return _functions2.default.getFromHighlighterOptions(this, 'canvasContainerDimensions');
		}
	}, {
		key: 'getWholeContainer',
		value: function getWholeContainer() {
			return _functions2.default.getFromHighlighterOptions(this, 'container') ? document.querySelector(_functions2.default.getFromHighlighterOptions(this, 'container')) : document.querySelector('body');
		}
	}, {
		key: 'getZIndex',
		value: function getZIndex() {
			return _functions2.default.getFromHighlighterOptions(this, 'zIndex') || '1';
		}
	}, {
		key: 'getCalibarationLevel',
		value: function getCalibarationLevel() {
			return _functions2.default.getFromHighlighterOptions(this, 'calibarationLevel') || 10;
		}
	}, {
		key: 'getLanguage',
		value: function getLanguage() {
			return _functions2.default.getFromHighlighterOptions(this, 'lang') || 'e';
		}
	}, {
		key: 'getRadius',
		value: function getRadius() {
			return _functions2.default.getFromHighlighterOptions(this, 'radius') || 10;
		}
	}, {
		key: 'getContext',
		value: function getContext() {
			return this.getCanvasElement().getContext('2d');
		}
	}, {
		key: 'getOpacity',
		value: function getOpacity() {
			return _functions2.default.getFromHighlighterOptions(this, 'opacity');
		}
	}, {
		key: 'getColor',
		value: function getColor() {
			return _functions2.default.getFromHighlighterOptions(this, 'color') || 'yellow';
		}
	}, {
		key: 'activateHighlighter',
		value: function activateHighlighter() {
			_highlighteractivation2.default.activate(this);
		}
	}, {
		key: 'deactivateHighlighter',
		value: function deactivateHighlighter() {
			_highlighteractivation2.default.deactivate(this);
		}
	}, {
		key: 'startMarker',
		value: function startMarker() {
			_drawstyles2.default.initMarkStyle(this);
		}
	}, {
		key: 'startEraser',
		value: function startEraser() {
			_drawstyles2.default.initEraseStyle(this);
		}
	}, {
		key: 'clearCanvas',
		value: function clearCanvas() {
			_drawstyles2.default.clear(this);
		}
	}, {
		key: 'saveImage',
		value: function saveImage() {
			_saveload2.default.save(this);
		}
	}, {
		key: 'loadImage',
		value: function loadImage() {
			_saveload2.default.load(this);
		}
	}, {
		key: 'updateDimensions',
		value: function updateDimensions() {
			_canvasstyledimension2.default.init(this, this.getWholeContainer(), this.getCanvasContainer(), this.getElement(), this.getCanvasElement());
		}
	}]);

	return Highlighter;
}();

window.Highlighter = Highlighter;

},{"./structure/canvasstyledimension.js":3,"./structure/drawstyles.js":5,"./structure/functions.js":6,"./structure/highlighteractivation.js":7,"./structure/initiation.js":8,"./structure/saveload.js":9}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

// calibaration algorithms for x and Y positions of points
exports.default = function () {

	function calibarateX(clientX, parents, canvasContainer, calibarationLevel, lang) {
		var elementX = clientX;
		elementX = calibarateElementX(elementX, parents);
		elementX = calibarateScrollLeft(elementX, parents, canvasContainer);
		elementX = calibarateScaleX(elementX, canvasContainer, calibarationLevel, lang);
		return elementX;
	}

	function calibarateY(clientY, parents, canvasContainer, calibarationLevel, transformOriginY) {
		var elementY = clientY;
		elementY = calibarateElementY(elementY, parents);
		elementY = calibarateScrollTop(elementY, parents, canvasContainer);
		elementY = calibarateScaleY(elementY, canvasContainer, calibarationLevel, transformOriginY);
		return elementY;
	}

	// in case of absolute divs only - calculate left
	function calibarateElementX(clientX, parents) {
		var additions = 0,
		    accumOffsetLeft = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().left - accumOffsetLeft;
			accumOffsetLeft += element.getBoundingClientRect().left;
		});
		return clientX - additions;
	}

	// in case of absolute divs only - calculate top
	function calibarateElementY(clientY, parents) {
		var additions = 0,
		    accumOffsetTop = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().top - accumOffsetTop;
			accumOffsetTop += element.getBoundingClientRect().top;
		});
		return clientY - additions;
	}

	// calculate scroll left
	function calibarateScrollLeft(clientX, parents, container) {
		var initialWidth = container.offsetWidth,
		    scaledWidth = container.getBoundingClientRect().width,
		    widthDiff = scaledWidth - initialWidth,
		    scaleX = scaledWidth / initialWidth,
		    additions = 0;

		scaleX = parseFloat(scaleX.toFixed(5));

		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollLeft + element.scrollLeft * (scaleX - 1);
			} else {
				additions += element.scrollLeft;
			}
		});
		return clientX + additions;
	}

	// calculate scroll top
	function calibarateScrollTop(clientY, parents, container) {
		var initialHeight = container.offsetHeight,
		    scaledHeight = container.getBoundingClientRect().height,
		    scaleY = scaledHeight / initialHeight,
		    additions = 0;

		scaleY = parseFloat(scaleY.toFixed(5));

		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollTop + element.scrollTop * (scaleY - 1);
			} else {
				additions += element.scrollTop;
			}
		});
		return clientY + additions;
	}

	// calculate scale X
	function calibarateScaleX(clientX, container, calDegree, lang) {
		var initialWidth = container.offsetWidth,
		    scaledWidth = container.getBoundingClientRect().width,
		    widthDiff = scaledWidth - initialWidth,
		    scaleX = scaledWidth / initialWidth,
		    calibaratedValue = 0;

		scaleX = parseFloat(scaleX.toFixed(5));

		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientX * Math.pow(1 - scaleX, calLevel);
		}

		if (lang === 'a') {
			// calibarate width
			for (var _calLevel = 0; _calLevel <= calDegree; _calLevel++) {
				calibaratedValue += widthDiff * Math.pow(1 - scaleX, _calLevel);
			}
			return calibaratedValue;
		}

		return calibaratedValue;
	}

	// calculate scale Y
	function calibarateScaleY(clientY, container, calDegree, transformOriginY) {
		transformOriginY = Number(transformOriginY);
		var initialHeight = container.offsetHeight,
		    scaledHeight = container.getBoundingClientRect().height,
		    transformOriginYCorrectionFactor = transformOriginY / (scaledHeight + transformOriginY),
		    scaleY = scaledHeight / initialHeight,
		    calibaratedValue = 0;

		scaleY = parseFloat(scaleY.toFixed(5));

		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientY * Math.pow(1 - scaleY, calLevel);
		}
		for (var _calLevel2 = 1; _calLevel2 <= calDegree; _calLevel2++) {
			calibaratedValue -= transformOriginY * Math.pow(1 - scaleY, _calLevel2);
		}
		return calibaratedValue;
	}

	return {
		calibarateX: calibarateX,
		calibarateY: calibarateY
	};
}();

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _functions = require("./functions.js");

var _functions2 = _interopRequireDefault(_functions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// default canvas style
function initCanvasStyle(highlighter) {
	var context = highlighter.getContext(),
	    radius = highlighter.getRadius();

	context.lineCap = "round";
	context.lineJoin = "round";
	context.globalCompositeOperation = "source-over";
	context.strokeStyle = highlighter.getColor();
	context.fillStyle = highlighter.getColor();
	context.lineWidth = radius * 2;
}

// Adjust canvas container position and dimensions with none scaled element
function canvasContainerAdjust(highlighter, canvasContainer, element) {
	var elementPositions = _functions2.default.getPosition(element),
	    canvasContainerDimensions = {
		width: element.getBoundingClientRect().width,
		height: element.getBoundingClientRect().height,
		left: elementPositions.x,
		top: elementPositions.y
	};

	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainerDimensions', canvasContainerDimensions);

	canvasContainer.style.width = highlighter.getCanvasContainerDimensions().width + 'px';
	canvasContainer.style.height = highlighter.getCanvasContainerDimensions().height + 'px';
	canvasContainer.style.position = 'absolute';
	canvasContainer.style.overflow = 'auto';
	canvasContainer.style.left = highlighter.getCanvasContainerDimensions().left + 'px';
	canvasContainer.style.top = highlighter.getCanvasContainerDimensions().top + 'px';
	canvasContainer.style.zIndex = highlighter.getZIndex();
	canvasContainer.style.pointerEvents = 'none';
	window.addEventListener("resize", adjustCanvasOnResize.bind(highlighter));
}

// whole Container style
function wholeContainerAdjust(wholeContainer) {
	wholeContainer.style.position = wholeContainer.style.position != 'absolute' ? 'relative' : 'absolute';
}

// element on resize
function adjustCanvasOnResize() {
	var canvasContainer = this.getCanvasContainer(),
	    element = this.getElement(),
	    elementPositions = _functions2.default.getPosition(element);
	canvasContainer.style.left = elementPositions.x + 'px';
	canvasContainer.style.top = elementPositions.y + 'px';
}

// Adjust canvas element dimensions
function canvasElementAdjust(highlighter, canvasElement, element) {
	canvasElement.style.width = element.scrollWidth + 'px';
	canvasElement.style.display = 'block';
	canvasElement.style.position = 'absolute';
	canvasElement.style.left = '0px';
	canvasElement.style.right = '0px';
	canvasElement.style.zIndex = '1';
	canvasElement.style.cursor = 'pointer';
	canvasElement.width = element.scrollWidth;
	canvasElement.style.height = element.scrollHeight + 'px';
	canvasElement.height = element.scrollHeight;
	canvasElement.style.opacity = highlighter.getOpacity();
}

function init(highlighter, wholeContainer, canvasContainer, element, canvasElement) {
	wholeContainerAdjust(wholeContainer);
	canvasContainerAdjust(highlighter, canvasContainer, element);
	canvasElementAdjust(highlighter, canvasElement, element);
	initCanvasStyle(highlighter);
}

exports.default = {
	init: init
};

},{"./functions.js":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _calibartion = require('./calibartion.js');

var _calibartion2 = _interopRequireDefault(_calibartion);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// put a point on canvas
function putPoint(highlighter, elementX, elementY) {
	var context = highlighter.getContext(),
	    radius = highlighter.getRadius();
	context.beginPath();
	context.arc(elementX, elementY, radius, 0, Math.PI * 2);
	context.fill();
}

// start paint on canvas
function startDrawing(event) {
	var parents = $(event.target).parents(),
	    container = event.target.parentNode,
	    elementX = event.touches ? event.touches[0].clientX : event.pageX,
	    elementY = event.touches ? event.touches[0].clientY : event.pageY,
	    transformOriginY = $(container).css('transform-origin').split(' ')[1],
	    calibarationLevel = this.getCalibarationLevel(),
	    lang = this.getLanguage(),
	    context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
	this.mouseState = 1;
}

function endDrawing() {
	this.mouseState = 0;
}

// draw lines on canvas
function drawLine(event) {
	var parents = $(event.target).parents(),
	    container = event.target.parentNode,
	    elementX = event.touches ? event.touches[0].clientX : event.pageX,
	    elementY = event.touches ? event.touches[0].clientY : event.pageY,
	    transformOriginY = $(container).css('transform-origin').split(' ')[1],
	    calibarationLevel = this.getCalibarationLevel(),
	    lang = this.getLanguage(),
	    context = this.getContext(),
	    drawType = this.getDrawType();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	if (drawType == 'mouse') {
		if (event.which == 1 && this.mouseState == 0) {
			context.lineTo(elementX, elementY);
			context.stroke();
			putPoint(this, elementX, elementY);
			context.beginPath();
			context.moveTo(elementX, elementY);
		}
	} else {
		context.lineTo(elementX, elementY);
		context.stroke();
		putPoint(this, elementX, elementY);
		context.beginPath();
		context.moveTo(elementX, elementY);
	}
}

exports.default = {
	putPoint: putPoint,
	startDrawing: startDrawing,
	drawLine: drawLine,
	endDrawing: endDrawing
};

},{"./calibartion.js":2}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
function initMarkStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "source-over";
}

function initEraseStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "destination-out";
}

function clear(highlighter) {
	var context = highlighter.getContext();
	var canvas = highlighter.getCanvasElement();
	context.clearRect(0, 0, canvas.width, canvas.height);
}

exports.default = {
	initMarkStyle: initMarkStyle,
	initEraseStyle: initEraseStyle,
	clear: clear
};

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
// get position of element
function getPos(el) {
	var elements = [];
	for (var _lx = 0, _ly = 0; el != null; _lx += el.offsetLeft, _ly += el.offsetTop, el = el.offsetParent) {
		elements.push(el);
	}
	return { x: lx, y: ly, elements: elements };
}

// Helper function to get an element's exact position
function getPosition(el) {
	var xPos = 0,
	    yPos = 0;

	while (el) {
		if (el.tagName == "BODY") {
			// deal with browser quirks with body/window/document and page scroll
			var xScroll = el.scrollLeft || document.documentElement.scrollLeft,
			    yScroll = el.scrollTop || document.documentElement.scrollTop;

			xPos += el.offsetLeft - xScroll + el.clientLeft;
			yPos += el.offsetTop - yScroll + el.clientTop;
		} else {
			// for all other non-BODY elements
			xPos += el.offsetLeft - el.scrollLeft + el.clientLeft;
			yPos += el.offsetTop - el.scrollTop + el.clientTop;
		}

		el = el.offsetParent;
	}
	return {
		x: xPos,
		y: yPos
	};
}

function addToHighlighterOptions(highlighter, key, value) {
	highlighter.options[key] = value;
}

function getFromHighlighterOptions(highlighter, key) {
	return highlighter.options[key];
}

exports.default = {
	getPos: getPos,
	getPosition: getPosition,
	addToHighlighterOptions: addToHighlighterOptions,
	getFromHighlighterOptions: getFromHighlighterOptions
};

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var activeCanvasClass = 'active-canvas-highlighter';

function activate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	var canvasElement = highlighter.getCanvasElement();
	canvasContainer.style.pointerEvents = 'auto';
	canvasElement.style.zIndex = '10';
	_scrollattach2.default.unhookCanvasFromElement(highlighter);
	_scrollattach2.default.hookElementToCanvas(highlighter);
}

function deactivate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	var canvasElement = highlighter.getCanvasElement();
	canvasContainer.style.pointerEvents = 'none';
	canvasElement.style.zIndex = '1';
	_scrollattach2.default.hookCanvasToElement(highlighter);
	_scrollattach2.default.unhookElementFromCanvas(highlighter);
}

function initActiveCanvasStyle() {
	if (!document.getElementById('canvashighlighter')) {
		var style = document.createElement('style');
		style.type = 'text/css';
		style.id = 'canvashighlighter';
		style.innerHTML = 'canvas.' + activeCanvasClass + ' { z-index: 2 !important;}';
		document.getElementsByTagName('head')[0].appendChild(style);
	}
}

exports.default = {
	activate: activate,
	deactivate: deactivate,
	initActiveCanvasStyle: initActiveCanvasStyle,
	activeCanvasClass: activeCanvasClass
};

},{"./scrollattach.js":10}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _draw = require('./draw.js');

var _draw2 = _interopRequireDefault(_draw);

var _functions = require('./functions.js');

var _functions2 = _interopRequireDefault(_functions);

var _canvasstyledimension = require('./canvasstyledimension.js');

var _canvasstyledimension2 = _interopRequireDefault(_canvasstyledimension);

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

var _highlighteractivation = require('./highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// initiate canvas on initiating highlighter object
function initCanvas(highlighter) {
	var wholeContainer = highlighter.getWholeContainer(),
	    element = highlighter.getElement(),

	// build canvas
	canvasElement = document.createElement('canvas'),

	// build canvas container
	canvasContainer = buildCanvasContainer(highlighter);

	// append elements
	canvasContainer.appendChild(canvasElement);
	wholeContainer.appendChild(canvasContainer);

	// add to highlighter
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainer', canvasContainer);
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasElement', canvasElement);

	// init canvas styles and dimensions
	_canvasstyledimension2.default.init(highlighter, wholeContainer, canvasContainer, element, canvasElement);

	// bind canvas to element on scroll
	scrollAttachement(highlighter);

	// start draw on canvas
	drawCode(highlighter, canvasElement);

	// make canvas active class
	_highlighteractivation2.default.initActiveCanvasStyle();
}

function scrollAttachement(highlighter) {
	_scrollattach2.default.initVariables(highlighter);
	_scrollattach2.default.hookCanvasToElement(highlighter);
}

function drawCode(highlighter, canvasElement) {
	if (highlighter.getDrawType() == 'touch') {
		canvasElement.addEventListener('touchstart', _draw2.default.startDrawing.bind(highlighter), false);
		canvasElement.addEventListener('touchmove', _draw2.default.drawLine.bind(highlighter), false);
	} else {
		canvasElement.addEventListener('mousedown', _draw2.default.startDrawing.bind(highlighter), false);
		canvasElement.addEventListener('mousemove', _draw2.default.drawLine.bind(highlighter), false);
		canvasElement.addEventListener('mouseup', _draw2.default.endDrawing.bind(highlighter), false);
	}
}

function buildCanvasContainer(highlighter) {
	var canvasContainer = void 0,
	    canvasContainerId = '#' + makeCanvasContainerId(highlighter);
	if (!document.querySelector(canvasContainerId)) {
		canvasContainer = document.createElement('div');
		canvasContainer.setAttribute('id', makeCanvasContainerId(highlighter));
	} else {
		canvasContainer = document.querySelector(canvasContainerId);
	}
	return canvasContainer;
}

function makeCanvasContainerId(highlighter) {
	var elementId = highlighter.options.element,
	    canvasContainerId = elementId + '-canvasContainer';
	return canvasContainerId;
}

exports.default = {
	initCanvas: initCanvas
};

},{"./canvasstyledimension.js":3,"./draw.js":4,"./functions.js":6,"./highlighteractivation.js":7,"./scrollattach.js":10}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _drawstyles = require('./drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function save(highlighter) {
	var canvasElement = highlighter.getCanvasElement(),
	    imageData = canvasElement.toDataURL();
	highlighter.imageData = imageData;
	return imageData;
}

function load(highlighter) {
	if (highlighter.imageData) {
		(function () {
			_drawstyles2.default.clear(highlighter);
			_drawstyles2.default.initMarkStyle(highlighter);
			var canvasElement = highlighter.getCanvasElement(),
			    image = new Image();
			image.src = highlighter.imageData;
			image.onload = function () {
				canvasElement.getContext('2d').drawImage(image, 0, 0);
			};
		})();
	}
}

exports.default = {
	save: save,
	load: load
};

},{"./drawstyles.js":5}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var element = void 0,
    canvasContainer = void 0;

function attachCanvasToElementEvent() {
	canvasContainer.scrollTop = element.scrollTop;
	canvasContainer.scrollLeft = element.scrollLeft;
}

function attachElementToCanvasEvent() {
	element.scrollTop = canvasContainer.scrollTop;
	element.scrollLeft = canvasContainer.scrollLeft;
}

function initVariables(highlighter) {
	canvasContainer = highlighter.getCanvasContainer();
	element = highlighter.getElement();
	highlighter.events.attachCanvasToElementEvent = attachCanvasToElementEvent;
	highlighter.events.attachElementToCanvasEvent = attachElementToCanvasEvent;
}

function hookCanvasToElement(highlighter) {
	element.addEventListener('scroll', highlighter.events.attachCanvasToElementEvent);
}

function unhookCanvasFromElement(highlighter) {
	element.removeEventListener('scroll', highlighter.events.attachCanvasToElementEvent);
}

function hookElementToCanvas(highlighter) {
	canvasContainer.addEventListener('scroll', highlighter.events.attachElementToCanvasEvent);
}

function unhookElementFromCanvas(highlighter) {
	canvasContainer.removeEventListener('scroll', highlighter.events.attachElementToCanvasEvent);
}

exports.default = {
	initVariables: initVariables,
	hookCanvasToElement: hookCanvasToElement,
	unhookCanvasFromElement: unhookCanvasFromElement,
	hookElementToCanvas: hookElementToCanvas,
	unhookElementFromCanvas: unhookElementFromCanvas
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxoaWdobGlnaHRlci5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcY2FsaWJhcnRpb24uanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGNhbnZhc3N0eWxlZGltZW5zaW9uLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3LmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3c3R5bGVzLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxmdW5jdGlvbnMuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGhpZ2hsaWdodGVyYWN0aXZhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcaW5pdGlhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcc2F2ZWxvYWQuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXHNjcm9sbGF0dGFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7QUNBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7O0lBRU0sVztBQUNMLHNCQUFZLE9BQVosRUFBcUI7QUFBQTs7QUFDcEIsT0FBSyxPQUFMLEdBQWUsT0FBZjtBQUNBLE9BQUssTUFBTCxHQUFjLEVBQWQ7QUFDQSxPQUFLLFNBQUwsR0FBaUIsRUFBakI7QUFDQSx1QkFBVyxVQUFYLENBQXNCLElBQXRCO0FBQ0E7Ozs7K0JBRVk7QUFDWixPQUFJLFVBQVUsU0FBUyxhQUFULE9BQTJCLEtBQUssT0FBTCxDQUFhLE9BQXhDLENBQWQ7QUFDQSxPQUFHLENBQUMsb0JBQVUseUJBQVYsQ0FBb0MsSUFBcEMsRUFBMEMsU0FBMUMsQ0FBRCxJQUF5RCxDQUFDLE9BQTdELEVBQXNFO0FBQ3JFLFVBQU0seUJBQU47QUFDQTtBQUNELFVBQU8sT0FBUDtBQUNBOzs7Z0NBRWE7QUFDYixPQUFJLFdBQVcsb0JBQVUseUJBQVYsQ0FBb0MsSUFBcEMsRUFBMEMs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QW1CLDBCQUFuQixHQUFnRCwwQkFBaEQ7QUFDQSxhQUFZLE1BQVosQ0FBbUIsMEJBQW5CLEdBQWdELDBCQUFoRDtBQUNBOztBQUVELFNBQVMsbUJBQVQsQ0FBNkIsV0FBN0IsRUFBMEM7QUFDekMsU0FBUSxnQkFBUixDQUF5QixRQUF6QixFQUFtQyxZQUFZLE1BQVosQ0FBbUIsMEJBQXREO0FBQ0E7O0FBRUQsU0FBUyx1QkFBVCxDQUFpQyxXQUFqQyxFQUE4QztBQUM3QyxTQUFRLG1CQUFSLENBQTRCLFFBQTVCLEVBQXNDLFlBQVksTUFBWixDQUFtQiwwQkFBekQ7QUFDQTs7QUFFRCxTQUFTLG1CQUFULENBQTZCLFdBQTdCLEVBQTBDO0FBQ3pDLGlCQUFnQixnQkFBaEIsQ0FBaUMsUUFBakMsRUFBMkMsWUFBWSxNQUFaLENBQW1CLDBCQUE5RDtBQUNBOztBQUVELFNBQVMsdUJBQVQsQ0FBaUMsV0FBakMsRUFBOEM7QUFDN0MsaUJBQWdCLG1CQUFoQixDQUFvQyxRQUFwQyxFQUE4QyxZQUFZLE1BQVosQ0FBbUIsMEJBQWpFO0FBQ0E7O2tCQUVjO0FBQ2QsZ0JBQWUsYUFERDtBQUVkLHNCQUFxQixtQkFGUDtBQUdkLDBCQUF5Qix1QkFIWDtBQUlkLHNCQUFxQixtQkFKUDtBQUtkLDBCQUF5QjtBQUxYLEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGluaXRpYXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaW5pdGlhdGlvbi5qcyc7XHJcbmltcG9ydCBoaWdobGlnaHRlckFjdGl2YXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaGlnaGxpZ2h0ZXJhY3RpdmF0aW9uLmpzJztcclxuaW1wb3J0IGRyYXdTdHlsZXMgZnJvbSAnLi9zdHJ1Y3R1cmUvZHJhd3N0eWxlcy5qcyc7XHJcbmltcG9ydCBzYXZlbG9hZCBmcm9tICcuL3N0cnVjdHVyZS9zYXZlbG9hZC5qcyc7XHJcbmltcG9ydCBmdW5jdGlvbnMgZnJvbSAnLi9zdHJ1Y3R1cmUvZnVuY3Rpb25zLmpzJztcclxuaW1wb3J0IGNhbnZhc3N0eWxlZGltZW5zaW9uIGZyb20gJy4vc3RydWN0dXJlL2NhbnZhc3N0eWxlZGltZW5zaW9uLmpzJztcclxuXHJcbmNsYXNzIEhpZ2hsaWdodGVyIHtcclxuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cdFx0dGhpcy5ldmVudHMgPSB7fTtcclxuXHRcdHRoaXMuaW1hZ2VEYXRhID0gJyc7XHJcblx0XHRpbml0aWF0aW9uLmluaXRDYW52YXModGhpcyk7XHJcblx0fVxyXG5cclxuXHRnZXRFbGVtZW50KCkge1xyXG5cdFx0bGV0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLm9wdGlvbnMuZWxlbWVudH1gKTtcclxuXHRcdGlmKCFmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnZWxlbWVudCcpIHx8ICFlbGVtZW50ICl7XHJcblx0XHRcdHRocm93ICdlbGVtZW50IGlkIG5vdCBkZXRlY3RlZCc7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZWxlbWVudDtcclxuXHR9XHJcblxyXG5cdGdldERyYXdUeXBlKCkge1xyXG5cdFx0bGV0IGRyYXdUeXBlID0gZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ2RyYXdUeXBlJykgfHwgJ21vdXNlJztcclxuXHRcdGlmKGRyYXdUeXBlID09ICdtb3VzZScpe1xyXG5cdFx0XHR0aGlzLm1vdXNlU3RhdGUgPSAwO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRyYXdUeXBlO1xyXG5cdH1cclxuXHJcblx0Z2V0Q2FudmFzRWxlbWVudCgpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnY2FudmFzRWxlbWVudCcpO1xyXG5cdH1cclxuXHJcblx0Z2V0Q2FudmFzQ29udGFpbmVyKCkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjYW52YXNDb250YWluZXInKTtcclxuXHR9XHJcblxyXG5cdGdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ2NhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMnKTtcclxuXHR9XHJcblxyXG5cdGdldFdob2xlQ29udGFpbmVyKCkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdjb250YWluZXInKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ2NvbnRhaW5lcicpKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHR9XHJcblxyXG5cdGdldFpJbmRleCgpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnekluZGV4JykgfHwgJzEnO1xyXG5cdH1cclxuXHJcblx0Z2V0Q2FsaWJhcmF0aW9uTGV2ZWwoKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb25zLmdldEZyb21IaWdobGlnaHRlck9wdGlvbnModGhpcywgJ2NhbGliYXJhdGlvbkxldmVsJykgfHwgMTA7XHJcblx0fVxyXG5cclxuXHRnZXRMYW5ndWFnZSgpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnbGFuZycpIHx8ICdlJztcclxuXHR9XHJcblxyXG5cdGdldFJhZGl1cygpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAncmFkaXVzJykgfHwgMTA7XHJcblx0fVxyXG5cclxuXHRnZXRDb250ZXh0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2FudmFzRWxlbWVudCgpLmdldENvbnRleHQoJzJkJyk7XHJcblx0fVxyXG5cclxuXHRnZXRPcGFjaXR5KCkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9ucy5nZXRGcm9tSGlnaGxpZ2h0ZXJPcHRpb25zKHRoaXMsICdvcGFjaXR5Jyk7XHJcblx0fVxyXG5cclxuXHRnZXRDb2xvcigpIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbnMuZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyh0aGlzLCAnY29sb3InKSB8fCAneWVsbG93JztcclxuXHR9XHJcblxyXG5cdGFjdGl2YXRlSGlnaGxpZ2h0ZXIoKSB7XHJcblx0XHRoaWdobGlnaHRlckFjdGl2YXRpb24uYWN0aXZhdGUodGhpcyk7XHJcblx0fVxyXG5cclxuXHRkZWFjdGl2YXRlSGlnaGxpZ2h0ZXIoKSB7XHJcblx0XHRoaWdobGlnaHRlckFjdGl2YXRpb24uZGVhY3RpdmF0ZSh0aGlzKTtcclxuXHR9XHJcblxyXG5cdHN0YXJ0TWFya2VyKCkge1xyXG5cdFx0ZHJhd1N0eWxlcy5pbml0TWFya1N0eWxlKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0c3RhcnRFcmFzZXIoKSB7XHJcblx0XHRkcmF3U3R5bGVzLmluaXRFcmFzZVN0eWxlKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0Y2xlYXJDYW52YXMoKSB7XHJcblx0XHRkcmF3U3R5bGVzLmNsZWFyKHRoaXMpO1xyXG5cdH1cclxuXHJcblx0c2F2ZUltYWdlKCkge1xyXG5cdFx0c2F2ZWxvYWQuc2F2ZSh0aGlzKTtcclxuXHR9XHJcblxyXG5cdGxvYWRJbWFnZSgpIHtcclxuXHRcdHNhdmVsb2FkLmxvYWQodGhpcyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVEaW1lbnNpb25zKCl7XHJcblx0XHRjYW52YXNzdHlsZWRpbWVuc2lvbi5pbml0KHRoaXMsIHRoaXMuZ2V0V2hvbGVDb250YWluZXIoKSwgdGhpcy5nZXRDYW52YXNDb250YWluZXIoKSwgdGhpcy5nZXRFbGVtZW50KCksIHRoaXMuZ2V0Q2FudmFzRWxlbWVudCgpKTtcclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5IaWdobGlnaHRlciA9IEhpZ2hsaWdodGVyOyIsIi8vIGNhbGliYXJhdGlvbiBhbGdvcml0aG1zIGZvciB4IGFuZCBZIHBvc2l0aW9ucyBvZiBwb2ludHNcclxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uKCkge1xyXG5cclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlWChjbGllbnRYLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKSB7XHJcblx0XHRsZXQgZWxlbWVudFggPSBjbGllbnRYO1xyXG5cdFx0ZWxlbWVudFggPSBjYWxpYmFyYXRlRWxlbWVudFgoZWxlbWVudFgsIHBhcmVudHMpO1xyXG5cdFx0ZWxlbWVudFggPSBjYWxpYmFyYXRlU2Nyb2xsTGVmdChlbGVtZW50WCwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyKTtcclxuXHRcdGVsZW1lbnRYID0gY2FsaWJhcmF0ZVNjYWxlWChlbGVtZW50WCwgY2FudmFzQ29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZyk7XHJcblx0XHRyZXR1cm4gZWxlbWVudFg7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlWShjbGllbnRZLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKSB7XHJcblx0XHRsZXQgZWxlbWVudFkgPSBjbGllbnRZO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlRWxlbWVudFkoZWxlbWVudFksIHBhcmVudHMpO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlU2Nyb2xsVG9wKGVsZW1lbnRZLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIpO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlU2NhbGVZKGVsZW1lbnRZLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHRcdHJldHVybiBlbGVtZW50WTtcclxuXHR9XHJcblxyXG5cdC8vIGluIGNhc2Ugb2YgYWJzb2x1dGUgZGl2cyBvbmx5IC0gY2FsY3VsYXRlIGxlZnRcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlRWxlbWVudFgoY2xpZW50WCwgcGFyZW50cykge1xyXG5cdFx0bGV0IGFkZGl0aW9ucyA9IDAsXHJcblx0XHRcdGFjY3VtT2Zmc2V0TGVmdCA9IDA7XHJcblx0XHRwYXJlbnRzID0gcGFyZW50cy50b0FycmF5KCkucmV2ZXJzZSgpO1xyXG5cdFx0cGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIG51bWJlcikge1xyXG5cdFx0XHRhZGRpdGlvbnMgKz0gKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGFjY3VtT2Zmc2V0TGVmdCk7XHJcblx0XHRcdGFjY3VtT2Zmc2V0TGVmdCArPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRYIC0gYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gaW4gY2FzZSBvZiBhYnNvbHV0ZSBkaXZzIG9ubHkgLSBjYWxjdWxhdGUgdG9wXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZUVsZW1lbnRZKGNsaWVudFksIHBhcmVudHMpIHtcclxuXHRcdGxldCBhZGRpdGlvbnMgPSAwLFxyXG5cdFx0XHRhY2N1bU9mZnNldFRvcCA9IDA7XHJcblx0XHRwYXJlbnRzID0gcGFyZW50cy50b0FycmF5KCkucmV2ZXJzZSgpO1xyXG5cdFx0cGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIG51bWJlcikge1xyXG5cdFx0XHRhZGRpdGlvbnMgKz0gKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gYWNjdW1PZmZzZXRUb3ApO1xyXG5cdFx0XHRhY2N1bU9mZnNldFRvcCArPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGNsaWVudFkgLSBhZGRpdGlvbnM7XHJcblx0fVxyXG5cclxuXHQvLyBjYWxjdWxhdGUgc2Nyb2xsIGxlZnRcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2Nyb2xsTGVmdChjbGllbnRYLCBwYXJlbnRzLCBjb250YWluZXIpIHtcclxuXHRcdGxldCBpbml0aWFsV2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGgsXHJcblx0XHRcdHNjYWxlZFdpZHRoID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLFxyXG5cdFx0XHR3aWR0aERpZmYgPSBzY2FsZWRXaWR0aCAtIGluaXRpYWxXaWR0aCxcclxuXHRcdFx0c2NhbGVYID0gc2NhbGVkV2lkdGggLyBpbml0aWFsV2lkdGgsXHJcblx0XHRcdGFkZGl0aW9ucyA9IDA7XHJcblxyXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XHJcblxyXG5cdFx0cGFyZW50cy5lYWNoKGZ1bmN0aW9uKG51bWJlciwgZWxlbWVudCkge1xyXG5cdFx0XHRpZiAoZWxlbWVudCA9PT0gY29udGFpbmVyKSB7XHJcblx0XHRcdFx0YWRkaXRpb25zICs9IGVsZW1lbnQuc2Nyb2xsTGVmdCArIGVsZW1lbnQuc2Nyb2xsTGVmdCAqIChzY2FsZVggLSAxKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxMZWZ0O1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRYICsgYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHNjcm9sbCB0b3BcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2Nyb2xsVG9wKGNsaWVudFksIHBhcmVudHMsIGNvbnRhaW5lcikge1xyXG5cdFx0bGV0IGluaXRpYWxIZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0LFxyXG5cdFx0XHRzY2FsZWRIZWlnaHQgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxyXG5cdFx0XHRzY2FsZVkgPSBzY2FsZWRIZWlnaHQgLyBpbml0aWFsSGVpZ2h0LFxyXG5cdFx0XHRhZGRpdGlvbnMgPSAwO1xyXG5cclxuXHRcdHNjYWxlWSA9IHBhcnNlRmxvYXQoc2NhbGVZLnRvRml4ZWQoNSkpO1xyXG5cclxuXHRcdHBhcmVudHMuZWFjaChmdW5jdGlvbihudW1iZXIsIGVsZW1lbnQpIHtcclxuXHRcdFx0aWYgKGVsZW1lbnQgPT09IGNvbnRhaW5lcikge1xyXG5cdFx0XHRcdGFkZGl0aW9ucyArPSBlbGVtZW50LnNjcm9sbFRvcCArIGVsZW1lbnQuc2Nyb2xsVG9wICogKHNjYWxlWSAtIDEpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFkZGl0aW9ucyArPSBlbGVtZW50LnNjcm9sbFRvcDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gY2xpZW50WSArIGFkZGl0aW9ucztcclxuXHR9XHJcblxyXG5cdC8vIGNhbGN1bGF0ZSBzY2FsZSBYXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVNjYWxlWChjbGllbnRYLCBjb250YWluZXIsIGNhbERlZ3JlZSwgbGFuZykge1xyXG5cdFx0bGV0IGluaXRpYWxXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcclxuXHRcdFx0c2NhbGVkV2lkdGggPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsXHJcblx0XHRcdHdpZHRoRGlmZiA9IHNjYWxlZFdpZHRoIC0gaW5pdGlhbFdpZHRoLFxyXG5cdFx0XHRzY2FsZVggPSBzY2FsZWRXaWR0aCAvIGluaXRpYWxXaWR0aCxcclxuXHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSA9IDA7XHJcblxyXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgY2FsTGV2ZWwgPSAwOyBjYWxMZXZlbCA8PSBjYWxEZWdyZWU7IGNhbExldmVsKyspIHtcclxuXHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSArPSBjbGllbnRYICogTWF0aC5wb3coMSAtIHNjYWxlWCwgY2FsTGV2ZWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChsYW5nID09PSAnYScpIHtcclxuXHRcdFx0Ly8gY2FsaWJhcmF0ZSB3aWR0aFxyXG5cdFx0XHRmb3IgKGxldCBfY2FsTGV2ZWwgPSAwOyBfY2FsTGV2ZWwgPD0gY2FsRGVncmVlOyBfY2FsTGV2ZWwrKykge1xyXG5cdFx0XHRcdGNhbGliYXJhdGVkVmFsdWUgKz0gd2lkdGhEaWZmICogTWF0aC5wb3coMSAtIHNjYWxlWCwgX2NhbExldmVsKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gY2FsaWJhcmF0ZWRWYWx1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY2FsaWJhcmF0ZWRWYWx1ZTtcclxuXHR9XHJcblxyXG5cdC8vIGNhbGN1bGF0ZSBzY2FsZSBZXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVNjYWxlWShjbGllbnRZLCBjb250YWluZXIsIGNhbERlZ3JlZSwgdHJhbnNmb3JtT3JpZ2luWSkge1xyXG5cdFx0dHJhbnNmb3JtT3JpZ2luWSA9IE51bWJlcih0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHRcdGxldCBpbml0aWFsSGVpZ2h0ID0gY29udGFpbmVyLm9mZnNldEhlaWdodCxcclxuXHRcdFx0c2NhbGVkSGVpZ2h0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcclxuXHRcdFx0dHJhbnNmb3JtT3JpZ2luWUNvcnJlY3Rpb25GYWN0b3IgPSB0cmFuc2Zvcm1PcmlnaW5ZIC8gKHNjYWxlZEhlaWdodCArIHRyYW5zZm9ybU9yaWdpblkpLFxyXG5cdFx0XHRzY2FsZVkgPSBzY2FsZWRIZWlnaHQgLyBpbml0aWFsSGVpZ2h0LFxyXG5cdFx0XHRjYWxpYmFyYXRlZFZhbHVlID0gMDtcclxuXHJcblx0XHRzY2FsZVkgPSBwYXJzZUZsb2F0KHNjYWxlWS50b0ZpeGVkKDUpKTtcclxuXHJcblx0XHRmb3IgKGxldCBjYWxMZXZlbCA9IDA7IGNhbExldmVsIDw9IGNhbERlZ3JlZTsgY2FsTGV2ZWwrKykge1xyXG5cdFx0XHRjYWxpYmFyYXRlZFZhbHVlICs9IGNsaWVudFkgKiBNYXRoLnBvdygxIC0gc2NhbGVZLCBjYWxMZXZlbCk7XHJcblx0XHR9XHJcblx0XHRmb3IgKGxldCBfY2FsTGV2ZWwyID0gMTsgX2NhbExldmVsMiA8PSBjYWxEZWdyZWU7IF9jYWxMZXZlbDIrKykge1xyXG5cdFx0XHRjYWxpYmFyYXRlZFZhbHVlIC09IHRyYW5zZm9ybU9yaWdpblkgKiBNYXRoLnBvdygxIC0gc2NhbGVZLCBfY2FsTGV2ZWwyKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjYWxpYmFyYXRlZFZhbHVlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdGNhbGliYXJhdGVYOiBjYWxpYmFyYXRlWCxcclxuXHRcdGNhbGliYXJhdGVZOiBjYWxpYmFyYXRlWVxyXG5cdH1cclxuXHJcbn0oKSk7IiwiaW1wb3J0IGZ1bmN0aW9ucyBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XHJcblxyXG4vLyBkZWZhdWx0IGNhbnZhcyBzdHlsZVxyXG5mdW5jdGlvbiBpbml0Q2FudmFzU3R5bGUoaGlnaGxpZ2h0ZXIpIHtcclxuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKSxcclxuXHRcdHJhZGl1cyA9IGhpZ2hsaWdodGVyLmdldFJhZGl1cygpO1xyXG5cclxuXHRjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcblx0Y29udGV4dC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuXHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcclxuXHRjb250ZXh0LnN0cm9rZVN0eWxlID0gaGlnaGxpZ2h0ZXIuZ2V0Q29sb3IoKTtcclxuXHRjb250ZXh0LmZpbGxTdHlsZSA9IGhpZ2hsaWdodGVyLmdldENvbG9yKCk7XHJcblx0Y29udGV4dC5saW5lV2lkdGggPSByYWRpdXMgKiAyO1xyXG59XHJcblxyXG4vLyBBZGp1c3QgY2FudmFzIGNvbnRhaW5lciBwb3NpdGlvbiBhbmQgZGltZW5zaW9ucyB3aXRoIG5vbmUgc2NhbGVkIGVsZW1lbnRcclxuZnVuY3Rpb24gY2FudmFzQ29udGFpbmVyQWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQpIHtcclxuXHRsZXQgZWxlbWVudFBvc2l0aW9ucyA9IGZ1bmN0aW9ucy5nZXRQb3NpdGlvbihlbGVtZW50KSxcclxuXHRcdGNhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMgPSB7XHJcblx0XHRcdHdpZHRoOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLFxyXG5cdFx0XHRoZWlnaHQ6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxyXG5cdFx0XHRsZWZ0OiBlbGVtZW50UG9zaXRpb25zLngsXHJcblx0XHRcdHRvcDogZWxlbWVudFBvc2l0aW9ucy55LFxyXG5cdFx0fTtcclxuXHJcblx0ZnVuY3Rpb25zLmFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zKGhpZ2hsaWdodGVyLCAnY2FudmFzQ29udGFpbmVyRGltZW5zaW9ucycsIGNhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMpO1xyXG5cclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUud2lkdGggPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXJEaW1lbnNpb25zKCkud2lkdGggKyAncHgnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXJEaW1lbnNpb25zKCkuaGVpZ2h0ICsgJ3B4JztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUubGVmdCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS5sZWZ0ICsgJ3B4JztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUudG9wID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzQ29udGFpbmVyRGltZW5zaW9ucygpLnRvcCArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9IGhpZ2hsaWdodGVyLmdldFpJbmRleCgpO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGFkanVzdENhbnZhc09uUmVzaXplLmJpbmQoaGlnaGxpZ2h0ZXIpKTtcclxufVxyXG5cclxuLy8gd2hvbGUgQ29udGFpbmVyIHN0eWxlXHJcbmZ1bmN0aW9uIHdob2xlQ29udGFpbmVyQWRqdXN0KHdob2xlQ29udGFpbmVyKSB7XHJcblx0d2hvbGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSB3aG9sZUNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiAhPSAnYWJzb2x1dGUnID8gJ3JlbGF0aXZlJyA6ICdhYnNvbHV0ZSc7XHJcbn1cclxuXHJcbi8vIGVsZW1lbnQgb24gcmVzaXplXHJcbmZ1bmN0aW9uIGFkanVzdENhbnZhc09uUmVzaXplKCkge1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSB0aGlzLmdldENhbnZhc0NvbnRhaW5lcigpLFxyXG5cdFx0ZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpLFxyXG5cdFx0ZWxlbWVudFBvc2l0aW9ucyA9IGZ1bmN0aW9ucy5nZXRQb3NpdGlvbihlbGVtZW50KTtcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUubGVmdCA9IGVsZW1lbnRQb3NpdGlvbnMueCArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnRvcCA9IGVsZW1lbnRQb3NpdGlvbnMueSArICdweCc7XHJcbn1cclxuXHJcbi8vIEFkanVzdCBjYW52YXMgZWxlbWVudCBkaW1lbnNpb25zXHJcbmZ1bmN0aW9uIGNhbnZhc0VsZW1lbnRBZGp1c3QoaGlnaGxpZ2h0ZXIsIGNhbnZhc0VsZW1lbnQsIGVsZW1lbnQpIHtcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudC5zY3JvbGxXaWR0aCArICdweCc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLmxlZnQgPSAnMHB4JztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLnJpZ2h0ID0gJzBweCc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMSc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcblx0Y2FudmFzRWxlbWVudC53aWR0aCA9IGVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBlbGVtZW50LnNjcm9sbEhlaWdodCArICdweCc7XHJcblx0Y2FudmFzRWxlbWVudC5oZWlnaHQgPSBlbGVtZW50LnNjcm9sbEhlaWdodDtcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBoaWdobGlnaHRlci5nZXRPcGFjaXR5KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXQoaGlnaGxpZ2h0ZXIsIHdob2xlQ29udGFpbmVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQsIGNhbnZhc0VsZW1lbnQpIHtcclxuXHR3aG9sZUNvbnRhaW5lckFkanVzdCh3aG9sZUNvbnRhaW5lcik7XHJcblx0Y2FudmFzQ29udGFpbmVyQWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQpO1xyXG5cdGNhbnZhc0VsZW1lbnRBZGp1c3QoaGlnaGxpZ2h0ZXIsIGNhbnZhc0VsZW1lbnQsIGVsZW1lbnQpO1xyXG5cdGluaXRDYW52YXNTdHlsZShoaWdobGlnaHRlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0OiBpbml0XHJcbn07IiwiaW1wb3J0IGNhbGliYXJ0aW9uIGZyb20gJy4vY2FsaWJhcnRpb24uanMnO1xyXG5cclxuLy8gcHV0IGEgcG9pbnQgb24gY2FudmFzXHJcbmZ1bmN0aW9uIHB1dFBvaW50KGhpZ2hsaWdodGVyLCBlbGVtZW50WCwgZWxlbWVudFkpIHtcclxuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKSxcclxuXHRcdHJhZGl1cyA9IGhpZ2hsaWdodGVyLmdldFJhZGl1cygpO1xyXG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0Y29udGV4dC5hcmMoZWxlbWVudFgsIGVsZW1lbnRZLCByYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcclxuXHRjb250ZXh0LmZpbGwoKTtcclxufVxyXG5cclxuLy8gc3RhcnQgcGFpbnQgb24gY2FudmFzXHJcbmZ1bmN0aW9uIHN0YXJ0RHJhd2luZyhldmVudCkge1xyXG5cdGxldCBwYXJlbnRzID0gJChldmVudC50YXJnZXQpLnBhcmVudHMoKSxcclxuXHRcdGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLFxyXG5cdFx0ZWxlbWVudFggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQucGFnZVgsXHJcblx0XHRlbGVtZW50WSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5wYWdlWSxcclxuXHRcdHRyYW5zZm9ybU9yaWdpblkgPSAkKGNvbnRhaW5lcikuY3NzKCd0cmFuc2Zvcm0tb3JpZ2luJykuc3BsaXQoJyAnKVsxXSxcclxuXHRcdGNhbGliYXJhdGlvbkxldmVsID0gdGhpcy5nZXRDYWxpYmFyYXRpb25MZXZlbCgpLFxyXG5cdFx0bGFuZyA9IHRoaXMuZ2V0TGFuZ3VhZ2UoKSxcclxuXHRcdGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKTtcclxuXHR0cmFuc2Zvcm1PcmlnaW5ZID0gdHJhbnNmb3JtT3JpZ2luWS5yZXBsYWNlKCdweCcsICcnKTtcclxuXHJcblx0ZWxlbWVudFggPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWChlbGVtZW50WCwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZyk7XHJcblx0ZWxlbWVudFkgPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWShlbGVtZW50WSwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSk7XHJcblxyXG5cdHB1dFBvaW50KHRoaXMsIGVsZW1lbnRYLCBlbGVtZW50WSk7XHJcblx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRjb250ZXh0Lm1vdmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xyXG5cdHRoaXMubW91c2VTdGF0ZSA9IDE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZERyYXdpbmcoKXtcclxuXHR0aGlzLm1vdXNlU3RhdGUgPSAwO1xyXG59XHJcblxyXG4vLyBkcmF3IGxpbmVzIG9uIGNhbnZhc1xyXG5mdW5jdGlvbiBkcmF3TGluZShldmVudCkge1xyXG5cdGxldCBwYXJlbnRzID0gJChldmVudC50YXJnZXQpLnBhcmVudHMoKSxcclxuXHRcdGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLFxyXG5cdFx0ZWxlbWVudFggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQucGFnZVgsXHJcblx0XHRlbGVtZW50WSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5wYWdlWSxcclxuXHRcdHRyYW5zZm9ybU9yaWdpblkgPSAkKGNvbnRhaW5lcikuY3NzKCd0cmFuc2Zvcm0tb3JpZ2luJykuc3BsaXQoJyAnKVsxXSxcclxuXHRcdGNhbGliYXJhdGlvbkxldmVsID0gdGhpcy5nZXRDYWxpYmFyYXRpb25MZXZlbCgpLFxyXG5cdFx0bGFuZyA9IHRoaXMuZ2V0TGFuZ3VhZ2UoKSxcclxuXHRcdGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKSxcclxuXHRcdGRyYXdUeXBlID0gdGhpcy5nZXREcmF3VHlwZSgpO1xyXG5cdHRyYW5zZm9ybU9yaWdpblkgPSB0cmFuc2Zvcm1PcmlnaW5ZLnJlcGxhY2UoJ3B4JywgJycpO1xyXG5cclxuXHRlbGVtZW50WCA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVYKGVsZW1lbnRYLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKTtcclxuXHRlbGVtZW50WSA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVZKGVsZW1lbnRZLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHJcblx0aWYoZHJhd1R5cGUgPT0gJ21vdXNlJyl7XHJcblx0XHRpZihldmVudC53aGljaCA9PSAxICYmIHRoaXMubW91c2VTdGF0ZSA9PSAwKXtcclxuXHRcdFx0Y29udGV4dC5saW5lVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxuXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRcdFx0cHV0UG9pbnQodGhpcywgZWxlbWVudFgsIGVsZW1lbnRZKTtcclxuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRcdFx0Y29udGV4dC5tb3ZlVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxuXHRcdH1cclxuXHR9IGVsc2V7XHJcblx0XHRjb250ZXh0LmxpbmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xyXG5cdFx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRcdHB1dFBvaW50KHRoaXMsIGVsZW1lbnRYLCBlbGVtZW50WSk7XHJcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y29udGV4dC5tb3ZlVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRwdXRQb2ludDogcHV0UG9pbnQsXHJcblx0c3RhcnREcmF3aW5nOiBzdGFydERyYXdpbmcsXHJcblx0ZHJhd0xpbmU6IGRyYXdMaW5lLFxyXG5cdGVuZERyYXdpbmc6IGVuZERyYXdpbmdcclxufTsiLCJmdW5jdGlvbiBpbml0TWFya1N0eWxlKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKTtcclxuXHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdEVyYXNlU3R5bGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xyXG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1vdXRcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXIoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xyXG5cdGxldCBjYW52YXMgPSBoaWdobGlnaHRlci5nZXRDYW52YXNFbGVtZW50KCk7XHJcblx0Y29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdGluaXRNYXJrU3R5bGU6IGluaXRNYXJrU3R5bGUsXHJcblx0aW5pdEVyYXNlU3R5bGU6IGluaXRFcmFzZVN0eWxlLFxyXG5cdGNsZWFyOiBjbGVhclxyXG59OyIsIi8vIGdldCBwb3NpdGlvbiBvZiBlbGVtZW50XHJcbmZ1bmN0aW9uIGdldFBvcyhlbCkge1xyXG5cdGxldCBlbGVtZW50cyA9IFtdO1xyXG5cdGZvciAobGV0IGx4ID0gMCwgbHkgPSAwOyBlbCAhPSBudWxsOyBseCArPSBlbC5vZmZzZXRMZWZ0LCBseSArPSBlbC5vZmZzZXRUb3AsIGVsID0gZWwub2Zmc2V0UGFyZW50KSB7XHJcblx0XHRlbGVtZW50cy5wdXNoKGVsKTtcclxuXHR9XHJcblx0cmV0dXJuIHsgeDogbHgsIHk6IGx5LCBlbGVtZW50czogZWxlbWVudHMgfTtcclxufVxyXG5cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgYW4gZWxlbWVudCdzIGV4YWN0IHBvc2l0aW9uXHJcbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsKSB7XHJcblx0bGV0IHhQb3MgPSAwLFxyXG5cdFx0eVBvcyA9IDA7XHJcblxyXG5cdHdoaWxlIChlbCkge1xyXG5cdFx0aWYgKGVsLnRhZ05hbWUgPT0gXCJCT0RZXCIpIHtcclxuXHRcdFx0Ly8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzIHdpdGggYm9keS93aW5kb3cvZG9jdW1lbnQgYW5kIHBhZ2Ugc2Nyb2xsXHJcblx0XHRcdGxldCB4U2Nyb2xsID0gZWwuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcclxuXHRcdFx0XHR5U2Nyb2xsID0gZWwuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcblxyXG5cdFx0XHR4UG9zICs9IChlbC5vZmZzZXRMZWZ0IC0geFNjcm9sbCArIGVsLmNsaWVudExlZnQpO1xyXG5cdFx0XHR5UG9zICs9IChlbC5vZmZzZXRUb3AgLSB5U2Nyb2xsICsgZWwuY2xpZW50VG9wKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGZvciBhbGwgb3RoZXIgbm9uLUJPRFkgZWxlbWVudHNcclxuXHRcdFx0eFBvcyArPSAoZWwub2Zmc2V0TGVmdCAtIGVsLnNjcm9sbExlZnQgKyBlbC5jbGllbnRMZWZ0KTtcclxuXHRcdFx0eVBvcyArPSAoZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50VG9wKTtcclxuXHRcdH1cclxuXHJcblx0XHRlbCA9IGVsLm9mZnNldFBhcmVudDtcclxuXHR9XHJcblx0cmV0dXJuIHtcclxuXHRcdHg6IHhQb3MsXHJcblx0XHR5OiB5UG9zXHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsIGtleSwgdmFsdWUpIHtcclxuXHRoaWdobGlnaHRlci5vcHRpb25zW2tleV0gPSB2YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9ucyhoaWdobGlnaHRlciwga2V5KSB7XHJcblx0cmV0dXJuIGhpZ2hsaWdodGVyLm9wdGlvbnNba2V5XTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdGdldFBvczogZ2V0UG9zLFxyXG5cdGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbixcclxuXHRhZGRUb0hpZ2hsaWdodGVyT3B0aW9uczogYWRkVG9IaWdobGlnaHRlck9wdGlvbnMsXHJcblx0Z2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9uczogZ2V0RnJvbUhpZ2hsaWdodGVyT3B0aW9uc1xyXG59OyIsImltcG9ydCBzY3JvbGxhdHRhY2ggZnJvbSAnLi9zY3JvbGxhdHRhY2guanMnO1xyXG5cclxubGV0IGFjdGl2ZUNhbnZhc0NsYXNzID0gJ2FjdGl2ZS1jYW52YXMtaGlnaGxpZ2h0ZXInO1xyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRsZXQgY2FudmFzRWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0VsZW1lbnQoKTtcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcxMCc7XHJcblx0c2Nyb2xsYXR0YWNoLnVuaG9va0NhbnZhc0Zyb21FbGVtZW50KGhpZ2hsaWdodGVyKTtcclxuXHRzY3JvbGxhdHRhY2guaG9va0VsZW1lbnRUb0NhbnZhcyhoaWdobGlnaHRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYWN0aXZhdGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRsZXQgY2FudmFzRWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0VsZW1lbnQoKTtcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcxJztcclxuXHRzY3JvbGxhdHRhY2guaG9va0NhbnZhc1RvRWxlbWVudChoaWdobGlnaHRlcik7XHJcblx0c2Nyb2xsYXR0YWNoLnVuaG9va0VsZW1lbnRGcm9tQ2FudmFzKGhpZ2hsaWdodGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdEFjdGl2ZUNhbnZhc1N0eWxlKCl7XHJcblx0aWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNoaWdobGlnaHRlcicpKXtcclxuXHRcdGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblx0XHRzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcclxuXHRcdHN0eWxlLmlkID0gJ2NhbnZhc2hpZ2hsaWdodGVyJztcclxuXHRcdHN0eWxlLmlubmVySFRNTCA9IGBjYW52YXMuJHthY3RpdmVDYW52YXNDbGFzc30geyB6LWluZGV4OiAyICFpbXBvcnRhbnQ7fWA7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRhY3RpdmF0ZTogYWN0aXZhdGUsXHJcblx0ZGVhY3RpdmF0ZTogZGVhY3RpdmF0ZSxcclxuXHRpbml0QWN0aXZlQ2FudmFzU3R5bGU6IGluaXRBY3RpdmVDYW52YXNTdHlsZSxcclxuXHRhY3RpdmVDYW52YXNDbGFzczogYWN0aXZlQ2FudmFzQ2xhc3NcclxufTsiLCJpbXBvcnQgZHJhdyBmcm9tICcuL2RyYXcuanMnO1xyXG5pbXBvcnQgZnVuY3Rpb25zIGZyb20gJy4vZnVuY3Rpb25zLmpzJztcclxuaW1wb3J0IGNhbnZhc3N0eWxlZGltZW5zaW9uIGZyb20gJy4vY2FudmFzc3R5bGVkaW1lbnNpb24uanMnO1xyXG5pbXBvcnQgc2Nyb2xsYXR0YWNoIGZyb20gJy4vc2Nyb2xsYXR0YWNoLmpzJztcclxuaW1wb3J0IGhpZ2hsaWdodGVyQWN0aXZhdGlvbiBmcm9tICcuL2hpZ2hsaWdodGVyYWN0aXZhdGlvbi5qcyc7XHJcblxyXG4vLyBpbml0aWF0ZSBjYW52YXMgb24gaW5pdGlhdGluZyBoaWdobGlnaHRlciBvYmplY3RcclxuZnVuY3Rpb24gaW5pdENhbnZhcyhoaWdobGlnaHRlcikge1xyXG5cdGxldCB3aG9sZUNvbnRhaW5lciA9IGhpZ2hsaWdodGVyLmdldFdob2xlQ29udGFpbmVyKCksXHJcblx0XHRlbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0RWxlbWVudCgpLFxyXG5cdFx0Ly8gYnVpbGQgY2FudmFzXHJcblx0XHRjYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXHJcblx0XHQvLyBidWlsZCBjYW52YXMgY29udGFpbmVyXHJcblx0XHRjYW52YXNDb250YWluZXIgPSBidWlsZENhbnZhc0NvbnRhaW5lcihoaWdobGlnaHRlcik7XHJcblxyXG5cclxuXHQvLyBhcHBlbmQgZWxlbWVudHNcclxuXHRjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzRWxlbWVudCk7XHJcblx0d2hvbGVDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyKTtcclxuXHJcblx0Ly8gYWRkIHRvIGhpZ2hsaWdodGVyXHJcblx0ZnVuY3Rpb25zLmFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zKGhpZ2hsaWdodGVyLCAnY2FudmFzQ29udGFpbmVyJywgY2FudmFzQ29udGFpbmVyKTtcclxuXHRmdW5jdGlvbnMuYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsICdjYW52YXNFbGVtZW50JywgY2FudmFzRWxlbWVudCk7XHJcblxyXG5cdC8vIGluaXQgY2FudmFzIHN0eWxlcyBhbmQgZGltZW5zaW9uc1xyXG5cdGNhbnZhc3N0eWxlZGltZW5zaW9uLmluaXQoaGlnaGxpZ2h0ZXIsIHdob2xlQ29udGFpbmVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQsIGNhbnZhc0VsZW1lbnQpO1xyXG5cclxuXHQvLyBiaW5kIGNhbnZhcyB0byBlbGVtZW50IG9uIHNjcm9sbFxyXG5cdHNjcm9sbEF0dGFjaGVtZW50KGhpZ2hsaWdodGVyKTtcclxuXHJcblx0Ly8gc3RhcnQgZHJhdyBvbiBjYW52YXNcclxuXHRkcmF3Q29kZShoaWdobGlnaHRlciwgY2FudmFzRWxlbWVudCk7XHJcblxyXG5cdC8vIG1ha2UgY2FudmFzIGFjdGl2ZSBjbGFzc1xyXG5cdGhpZ2hsaWdodGVyQWN0aXZhdGlvbi5pbml0QWN0aXZlQ2FudmFzU3R5bGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsQXR0YWNoZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcclxuXHRzY3JvbGxhdHRhY2guaW5pdFZhcmlhYmxlcyhoaWdobGlnaHRlcik7XHJcblx0c2Nyb2xsYXR0YWNoLmhvb2tDYW52YXNUb0VsZW1lbnQoaGlnaGxpZ2h0ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3Q29kZShoaWdobGlnaHRlciwgY2FudmFzRWxlbWVudCkge1xyXG5cdGlmKGhpZ2hsaWdodGVyLmdldERyYXdUeXBlKCkgPT0gJ3RvdWNoJyl7XHJcblx0XHRjYW52YXNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmF3LnN0YXJ0RHJhd2luZy5iaW5kKGhpZ2hsaWdodGVyKSwgZmFsc2UpO1xyXG5cdFx0Y2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBkcmF3LmRyYXdMaW5lLmJpbmQoaGlnaGxpZ2h0ZXIpLCBmYWxzZSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhdy5zdGFydERyYXdpbmcuYmluZChoaWdobGlnaHRlciksIGZhbHNlKTtcclxuXHRcdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhdy5kcmF3TGluZS5iaW5kKGhpZ2hsaWdodGVyKSwgZmFsc2UpO1xyXG5cdFx0Y2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhdy5lbmREcmF3aW5nLmJpbmQoaGlnaGxpZ2h0ZXIpLCBmYWxzZSk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZENhbnZhc0NvbnRhaW5lcihoaWdobGlnaHRlcikge1xyXG5cdGxldCBjYW52YXNDb250YWluZXIsXHJcblx0XHRjYW52YXNDb250YWluZXJJZCA9IGAjJHttYWtlQ2FudmFzQ29udGFpbmVySWQoaGlnaGxpZ2h0ZXIpfWA7XHJcblx0aWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhbnZhc0NvbnRhaW5lcklkKSkge1xyXG5cdFx0Y2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRjYW52YXNDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsIG1ha2VDYW52YXNDb250YWluZXJJZChoaWdobGlnaHRlcikpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjYW52YXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhbnZhc0NvbnRhaW5lcklkKTtcclxuXHR9XHJcblx0cmV0dXJuIGNhbnZhc0NvbnRhaW5lcjtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNhbnZhc0NvbnRhaW5lcklkKGhpZ2hsaWdodGVyKSB7XHJcblx0bGV0IGVsZW1lbnRJZCA9IGhpZ2hsaWdodGVyLm9wdGlvbnMuZWxlbWVudCxcclxuXHRcdGNhbnZhc0NvbnRhaW5lcklkID0gYCR7ZWxlbWVudElkfS1jYW52YXNDb250YWluZXJgO1xyXG5cdHJldHVybiBjYW52YXNDb250YWluZXJJZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdGluaXRDYW52YXM6IGluaXRDYW52YXNcclxufTsiLCJpbXBvcnQgZHJhd3N0eWxlcyBmcm9tICcuL2RyYXdzdHlsZXMuanMnO1xyXG5cclxuZnVuY3Rpb24gc2F2ZShoaWdobGlnaHRlcikge1xyXG5cdGxldCBjYW52YXNFbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpLFxyXG5cdFx0aW1hZ2VEYXRhID0gY2FudmFzRWxlbWVudC50b0RhdGFVUkwoKTtcclxuXHRoaWdobGlnaHRlci5pbWFnZURhdGEgPSBpbWFnZURhdGE7XHJcblx0cmV0dXJuIGltYWdlRGF0YTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZChoaWdobGlnaHRlcikge1xyXG5cdGlmIChoaWdobGlnaHRlci5pbWFnZURhdGEpIHtcclxuXHRcdGRyYXdzdHlsZXMuY2xlYXIoaGlnaGxpZ2h0ZXIpO1xyXG5cdFx0ZHJhd3N0eWxlcy5pbml0TWFya1N0eWxlKGhpZ2hsaWdodGVyKTtcclxuXHRcdGxldCBjYW52YXNFbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpLFxyXG5cdFx0XHRpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1hZ2Uuc3JjID0gaGlnaGxpZ2h0ZXIuaW1hZ2VEYXRhO1xyXG5cdFx0aW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xyXG5cdFx0fTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRzYXZlOiBzYXZlLFxyXG5cdGxvYWQ6IGxvYWRcclxufTsiLCJsZXQgZWxlbWVudCxcclxuXHRjYW52YXNDb250YWluZXI7XHJcblxyXG5mdW5jdGlvbiBhdHRhY2hDYW52YXNUb0VsZW1lbnRFdmVudCgpIHtcclxuXHRjYW52YXNDb250YWluZXIuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxUb3A7XHJcblx0Y2FudmFzQ29udGFpbmVyLnNjcm9sbExlZnQgPSBlbGVtZW50LnNjcm9sbExlZnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF0dGFjaEVsZW1lbnRUb0NhbnZhc0V2ZW50KCkge1xyXG5cdGVsZW1lbnQuc2Nyb2xsVG9wID0gY2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRlbGVtZW50LnNjcm9sbExlZnQgPSBjYW52YXNDb250YWluZXIuc2Nyb2xsTGVmdDtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFZhcmlhYmxlcyhoaWdobGlnaHRlcikge1xyXG5cdGNhbnZhc0NvbnRhaW5lciA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lcigpO1xyXG5cdGVsZW1lbnQgPSBoaWdobGlnaHRlci5nZXRFbGVtZW50KCk7XHJcblx0aGlnaGxpZ2h0ZXIuZXZlbnRzLmF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50ID0gYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQ7XHJcblx0aGlnaGxpZ2h0ZXIuZXZlbnRzLmF0dGFjaEVsZW1lbnRUb0NhbnZhc0V2ZW50ID0gYXR0YWNoRWxlbWVudFRvQ2FudmFzRXZlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhvb2tDYW52YXNUb0VsZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcclxuXHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhpZ2hsaWdodGVyLmV2ZW50cy5hdHRhY2hDYW52YXNUb0VsZW1lbnRFdmVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuaG9va0NhbnZhc0Zyb21FbGVtZW50KGhpZ2hsaWdodGVyKSB7XHJcblx0ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoaWdobGlnaHRlci5ldmVudHMuYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBob29rRWxlbWVudFRvQ2FudmFzKGhpZ2hsaWdodGVyKSB7XHJcblx0Y2FudmFzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhpZ2hsaWdodGVyLmV2ZW50cy5hdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVuaG9va0VsZW1lbnRGcm9tQ2FudmFzKGhpZ2hsaWdodGVyKSB7XHJcblx0Y2FudmFzQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhpZ2hsaWdodGVyLmV2ZW50cy5hdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0VmFyaWFibGVzOiBpbml0VmFyaWFibGVzLFxyXG5cdGhvb2tDYW52YXNUb0VsZW1lbnQ6IGhvb2tDYW52YXNUb0VsZW1lbnQsXHJcblx0dW5ob29rQ2FudmFzRnJvbUVsZW1lbnQ6IHVuaG9va0NhbnZhc0Zyb21FbGVtZW50LFxyXG5cdGhvb2tFbGVtZW50VG9DYW52YXM6IGhvb2tFbGVtZW50VG9DYW52YXMsXHJcblx0dW5ob29rRWxlbWVudEZyb21DYW52YXM6IHVuaG9va0VsZW1lbnRGcm9tQ2FudmFzXHJcbn07Il19
