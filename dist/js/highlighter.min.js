(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _initiation = require('./structure/initiation.js');

var _initiation2 = _interopRequireDefault(_initiation);

var _highlighteractivation = require('./structure/highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

var _drawstyles = require('./structure/drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

var _saveload = require('./structure/saveload.js');

var _saveload2 = _interopRequireDefault(_saveload);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Highlighter = function ($) {

	function Highlighter(options) {
		this.options = options;
		this.image = '';
		_initiation2.default.initCanvasOnElement(this);
	}

	Highlighter.prototype.getElement = function () {
		var element = document.querySelector('#' + this.options.element);
		if (!this.options.element || !element) {
			throw 'element id not detected';
		}
		return element;
	};

	Highlighter.prototype.getCanvasElement = function () {
		return this.options.canvasElement;
	};

	Highlighter.prototype.getCanvasContainer = function () {
		return this.options.canvasContainer;
	};

	Highlighter.prototype.getCanvasContainerDimensions = function () {
		return this.options.canvasContainerDimensions;
	};

	Highlighter.prototype.getWholeContainer = function () {
		return this.options.container ? document.querySelector(this.options.container) : document.querySelector('body');
	};

	Highlighter.prototype.getZIndex = function () {
		return this.options.zIndex || '1';
	};

	Highlighter.prototype.getCalibarationLevel = function () {
		return this.options.calibarationLevel || 10;
	};

	Highlighter.prototype.getLanguage = function () {
		return this.options.lang || 'e';
	};

	Highlighter.prototype.getRadius = function () {
		return this.options.radius || 10;
	};

	Highlighter.prototype.getContext = function () {
		return this.getCanvasElement().getContext('2d');
	};

	Highlighter.prototype.getOpacity = function () {
		return this.options.opacity;
	};

	Highlighter.prototype.getColor = function () {
		return this.options.color || 'yellow';
	};

	Highlighter.prototype.activateHighlighter = function () {
		_highlighteractivation2.default.activate(this);
	};

	Highlighter.prototype.deactivateHighlighter = function () {
		_highlighteractivation2.default.deactivate(this);
	};

	Highlighter.prototype.startMarker = function () {
		_drawstyles2.default.initMarkStyle(this);
	};

	Highlighter.prototype.startEraser = function () {
		_drawstyles2.default.initEraseStyle(this);
	};

	Highlighter.prototype.saveImage = function () {
		_saveload2.default.save(this);
	};

	Highlighter.prototype.loadImage = function () {
		_saveload2.default.load(this);
	};

	window.Highlighter = Highlighter;

	return Highlighter;
}(jQuery);

},{"./structure/drawstyles.js":5,"./structure/highlighteractivation.js":7,"./structure/initiation.js":8,"./structure/saveload.js":9}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

// calibaration algorithms for x and Y positions of points
exports.default = function () {

	function calibarateX(clientX, parents, canvasContainer, calibarationLevel, lang) {
		var elementX = clientX;
		elementX = calibarateElementX(elementX, parents);
		elementX = calibarateScrollLeft(elementX, parents, canvasContainer);
		elementX = calibarateScaleX(elementX, canvasContainer, calibarationLevel, lang);
		return elementX;
	}

	function calibarateY(clientY, parents, canvasContainer, calibarationLevel, transformOriginY) {
		var elementY = clientY;
		elementY = calibarateElementY(elementY, parents);
		elementY = calibarateScrollTop(elementY, parents, canvasContainer);
		elementY = calibarateScaleY(elementY, canvasContainer, calibarationLevel, transformOriginY);
		return elementY;
	}

	// in case of absolute divs only - calculate left
	function calibarateElementX(clientX, parents) {
		var additions = 0;
		var accumOffsetLeft = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().left - accumOffsetLeft;
			accumOffsetLeft += element.getBoundingClientRect().left;
		});
		return clientX - additions;
	}

	// in case of absolute divs only - calculate top
	function calibarateElementY(clientY, parents) {
		var additions = 0;
		var accumOffsetTop = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().top - accumOffsetTop;
			accumOffsetTop += element.getBoundingClientRect().top;
		});
		return clientY - additions;
	}

	// calculate scroll left
	function calibarateScrollLeft(clientX, parents, container) {
		var initialWidth = container.offsetWidth;
		var scaledWidth = container.getBoundingClientRect().width;
		var widthDiff = scaledWidth - initialWidth;
		var scaleX = scaledWidth / initialWidth;
		scaleX = parseFloat(scaleX.toFixed(5));

		var additions = 0;
		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollLeft + element.scrollLeft * (scaleX - 1);
			} else {
				additions += element.scrollLeft;
			}
		});
		return clientX + additions;
	}

	// calculate scroll top
	function calibarateScrollTop(clientY, parents, container) {
		var initialHeight = container.offsetHeight;
		var scaledHeight = container.getBoundingClientRect().height;
		var scaleY = scaledHeight / initialHeight;
		scaleY = parseFloat(scaleY.toFixed(5));

		var additions = 0;
		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollTop + element.scrollTop * (scaleY - 1);
			} else {
				additions += element.scrollTop;
			}
		});
		return clientY + additions;
	}

	// calculate scale X
	function calibarateScaleX(clientX, container, calDegree, lang) {
		var initialWidth = container.offsetWidth;
		var scaledWidth = container.getBoundingClientRect().width;
		var widthDiff = scaledWidth - initialWidth;
		var scaleX = scaledWidth / initialWidth;
		scaleX = parseFloat(scaleX.toFixed(5));
		var calibaratedValue = 0;
		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientX * Math.pow(1 - scaleX, calLevel);
		}

		if (lang === 'a') {
			// calibarate width
			for (var _calLevel = 0; _calLevel <= calDegree; _calLevel++) {
				calibaratedValue += widthDiff * Math.pow(1 - scaleX, _calLevel);
			}
			return calibaratedValue;
		}

		return calibaratedValue;
	}

	// calculate scale Y
	function calibarateScaleY(clientY, container, calDegree, transformOriginY) {
		var initialHeight = container.offsetHeight;
		var scaledHeight = container.getBoundingClientRect().height;
		transformOriginY = Number(transformOriginY);
		var transformOriginYCorrectionFactor = transformOriginY / (scaledHeight + transformOriginY);
		var scaleY = scaledHeight / initialHeight;
		scaleY = parseFloat(scaleY.toFixed(5));
		var calibaratedValue = 0;
		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientY * Math.pow(1 - scaleY, calLevel);
		}
		for (var _calLevel2 = 1; _calLevel2 <= calDegree; _calLevel2++) {
			calibaratedValue -= transformOriginY * Math.pow(1 - scaleY, _calLevel2);
		}
		return calibaratedValue;
	}

	return {
		calibarateX: calibarateX,
		calibarateY: calibarateY
	};
}();

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _functions = require("./functions.js");

var _functions2 = _interopRequireDefault(_functions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// default canvas style
function initCanvasStyle(highlighter) {
	var context = highlighter.getContext();
	var radius = highlighter.getRadius();
	context.lineCap = "round";
	context.lineJoin = "round";
	context.globalCompositeOperation = "source-over";
	context.strokeStyle = highlighter.getColor();
	context.fillStyle = highlighter.getColor();
	context.lineWidth = radius * 2;
}

// Adjust canvas container position and dimensions with none scaled element
function canvasContainerAdjust(highlighter, canvasContainer, element) {
	var elementPositions = _functions2.default.getPosition(element);
	var canvasContainerDimensions = {
		width: element.getBoundingClientRect().width,
		height: element.getBoundingClientRect().height,
		left: elementPositions.x,
		top: elementPositions.y
	};
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainerDimensions', canvasContainerDimensions);

	canvasContainer.style.width = highlighter.getCanvasContainerDimensions().width + 'px';
	canvasContainer.style.height = highlighter.getCanvasContainerDimensions().height + 'px';
	canvasContainer.style.position = 'absolute';
	canvasContainer.style.overflow = 'auto';
	canvasContainer.style.left = highlighter.getCanvasContainerDimensions().left + 'px';
	canvasContainer.style.top = highlighter.getCanvasContainerDimensions().top + 'px';
	canvasContainer.style.zIndex = highlighter.getZIndex();
	canvasContainer.style.pointerEvents = 'none';
	window.addEventListener("resize", adjustCanvasOnResize.bind(highlighter));
}

// whole Container style
function wholeContainerAdjust(wholeContainer) {
	wholeContainer.style.position = wholeContainer.style.position != 'absolute' ? 'relative' : 'absolute';
}

// element on resize
function adjustCanvasOnResize() {
	var canvasContainer = this.getCanvasContainer();
	var element = this.getElement();
	var elementPositions = _functions2.default.getPosition(element);
	canvasContainer.style.left = elementPositions.x + 'px';
	canvasContainer.style.top = elementPositions.y + 'px';
}

// Adjust canvas element dimensions
function canvasElementAdjust(highlighter, canvasElement, element) {
	canvasElement.style.width = element.scrollWidth + 'px';
	canvasElement.style.display = 'block';
	canvasElement.style.position = 'absolute';
	canvasElement.style.left = '0px';
	canvasElement.style.right = '0px';
	canvasElement.style.zIndex = '1';
	canvasElement.width = element.scrollWidth;
	canvasElement.style.height = element.scrollHeight + 'px';
	canvasElement.height = element.scrollHeight;
	canvasElement.style.opacity = highlighter.getOpacity();
}

function init(highlighter, wholeContainer, canvasContainer, element, canvasElement) {
	wholeContainerAdjust(wholeContainer);
	canvasContainerAdjust(highlighter, canvasContainer, element);
	canvasElementAdjust(highlighter, canvasElement, element);
	initCanvasStyle(highlighter);
}

exports.default = {
	init: init
};

},{"./functions.js":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _calibartion = require('./calibartion.js');

var _calibartion2 = _interopRequireDefault(_calibartion);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// put a point on canvas
function putPoint(highlighter, elementX, elementY) {
	var context = highlighter.getContext();
	var radius = highlighter.getRadius();
	context.beginPath();
	context.arc(elementX, elementY, radius, 0, Math.PI * 2);
	context.fill();
}

// start paint on canvas
function startDrawing(event) {
	var parents = $(event.target).parents();
	var container = event.target.parentNode;
	var elementX = event.touches ? event.touches[0].clientX : event.pageX;
	var elementY = event.touches ? event.touches[0].clientY : event.pageY;
	var transformOriginY = $(container).css('transform-origin').split(' ')[1];
	var calibarationLevel = this.getCalibarationLevel();
	var lang = this.getLanguage();
	var context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

// draw lines on canvas
function drawLine(event) {
	var parents = $(event.target).parents();
	var container = event.target.parentNode;
	var elementX = event.touches ? event.touches[0].clientX : event.pageX;
	var elementY = event.touches ? event.touches[0].clientY : event.pageY;
	var transformOriginY = $(container).css('transform-origin').split(' ')[1];
	var calibarationLevel = this.getCalibarationLevel();
	var lang = this.getLanguage();
	var context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	context.lineTo(elementX, elementY);
	context.stroke();
	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

exports.default = {
	putPoint: putPoint,
	startDrawing: startDrawing,
	drawLine: drawLine
};

},{"./calibartion.js":2}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
function initMarkStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "source-over";
}

function initEraseStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "destination-out";
}

exports.default = {
	initMarkStyle: initMarkStyle,
	initEraseStyle: initEraseStyle
};

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
// get position of element
function getPos(el) {
	var elements = [];
	for (var lx = 0, ly = 0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent) {
		elements.push(el);
	}
	return { x: lx, y: ly, elements: elements };
}

// Helper function to get an element's exact position
function getPosition(el) {
	var xPos = 0;
	var yPos = 0;

	while (el) {
		if (el.tagName == "BODY") {
			// deal with browser quirks with body/window/document and page scroll
			var xScroll = el.scrollLeft || document.documentElement.scrollLeft;
			var yScroll = el.scrollTop || document.documentElement.scrollTop;

			xPos += el.offsetLeft - xScroll + el.clientLeft;
			yPos += el.offsetTop - yScroll + el.clientTop;
		} else {
			// for all other non-BODY elements
			xPos += el.offsetLeft - el.scrollLeft + el.clientLeft;
			yPos += el.offsetTop - el.scrollTop + el.clientTop;
		}

		el = el.offsetParent;
	}
	return {
		x: xPos,
		y: yPos
	};
}

function addToHighlighterOptions(highlighter, key, value) {
	highlighter.options[key] = value;
}

exports.default = {
	getPos: getPos,
	getPosition: getPosition,
	addToHighlighterOptions: addToHighlighterOptions
};

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function activate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'auto';
	_scrollattach2.default.unhookCanvasFromElement();
	_scrollattach2.default.hookElementToCanvas();
}

function deactivate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'none';
	_scrollattach2.default.hookCanvasToElement();
	_scrollattach2.default.unhookElementFromCanvas();
}

exports.default = {
	activate: activate,
	deactivate: deactivate
};

},{"./scrollattach.js":10}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _draw = require('./draw.js');

var _draw2 = _interopRequireDefault(_draw);

var _functions = require('./functions.js');

var _functions2 = _interopRequireDefault(_functions);

var _canvasstyledimension = require('./canvasstyledimension.js');

var _canvasstyledimension2 = _interopRequireDefault(_canvasstyledimension);

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// initiate canvas on initiating highlighter object
function initCanvasOnElement(highlighter) {
	var wholeContainer = highlighter.getWholeContainer();
	var element = highlighter.getElement();

	// build canvas
	var canvasElement = document.createElement('canvas');

	// build canvas container
	var canvasContainer = buildCanvasContainer(highlighter);

	// append elements
	canvasContainer.appendChild(canvasElement);
	wholeContainer.appendChild(canvasContainer);

	// add to highlighter
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasContainer', canvasContainer);
	_functions2.default.addToHighlighterOptions(highlighter, 'canvasElement', canvasElement);

	// init canvas styles and dimensions
	_canvasstyledimension2.default.init(highlighter, wholeContainer, canvasContainer, element, canvasElement);

	// bind canvas to element on scroll
	scrollAttachement(highlighter);

	// start draw on canvas
	drawCode(highlighter, canvasElement);
}

function scrollAttachement(highlighter) {
	_scrollattach2.default.initVariables(highlighter);
	_scrollattach2.default.hookCanvasToElement();
}

function drawCode(highlighter, canvasElement) {
	canvasElement.addEventListener('touchstart', _draw2.default.startDrawing.bind(highlighter), false);
	canvasElement.addEventListener('touchmove', _draw2.default.drawLine.bind(highlighter), false);
}

function buildCanvasContainer(highlighter) {
	var canvasContainer = void 0;
	var canvasContainerId = '#' + makeCanvasContainerId(highlighter);
	if (!document.querySelector(canvasContainerId)) {
		canvasContainer = document.createElement('div');
		canvasContainer.setAttribute('id', makeCanvasContainerId(highlighter));
	} else {
		canvasContainer = document.querySelector(canvasContainerId);
	}
	return canvasContainer;
}

function makeCanvasContainerId(highlighter) {
	var elementId = highlighter.options.element;
	var canvasContainerId = elementId + '-canvasContainer';
	return canvasContainerId;
}

exports.default = {
	initCanvasOnElement: initCanvasOnElement
};

},{"./canvasstyledimension.js":3,"./draw.js":4,"./functions.js":6,"./scrollattach.js":10}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
function save(highlighter) {
	var canvasElement = highlighter.getCanvasElement();
	var imageData = canvasElement.toDataURL();
	highlighter.image = imageData;
	console.log(imageData);
	return imageData;
}

function load(highlighter) {
	if (highlighter.image) {
		(function () {
			var canvasElement = highlighter.getCanvasElement();
			var image = new Image();
			image.src = highlighter.image;
			image.onload = function () {
				canvasElement.getContext('2d').drawImage(image, 0, 0);
			};
		})();
	}
}

exports.default = {
	save: save,
	load: load
};

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var element = void 0;
var canvasContainer = void 0;
//attach canvas to element
var attachCanvasToElement = void 0;
//attach element to canvas
var attachElementToCanvas = void 0;

function attachCanvasToElementEvent() {
	canvasContainer.scrollTop = element.scrollTop;
	canvasContainer.scrollLeft = element.scrollLeft;
}

function attachElementToCanvasEvent() {
	element.scrollTop = canvasContainer.scrollTop;
	element.scrollLeft = canvasContainer.scrollLeft;
}

function initVariables(highlighter) {
	attachCanvasToElement = attachCanvasToElementEvent.bind(highlighter);
	attachElementToCanvas = attachElementToCanvasEvent.bind(highlighter);
	canvasContainer = highlighter.getCanvasContainer();
	element = highlighter.getElement();
}

function hookCanvasToElement() {
	element.addEventListener('scroll', attachCanvasToElement);
}

function unhookCanvasFromElement() {
	element.removeEventListener('scroll', attachCanvasToElement);
}

function hookElementToCanvas() {
	canvasContainer.addEventListener('scroll', attachElementToCanvas);
}

function unhookElementFromCanvas() {
	canvasContainer.removeEventListener('scroll', attachElementToCanvas);
}

exports.default = {
	initVariables: initVariables,
	hookCanvasToElement: hookCanvasToElement,
	unhookCanvasFromElement: unhookCanvasFromElement,
	hookElementToCanvas: hookElementToCanvas,
	unhookElementFromCanvas: unhookElementFromCanvas
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxoaWdobGlnaHRlci5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcY2FsaWJhcnRpb24uanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGNhbnZhc3N0eWxlZGltZW5zaW9uLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3LmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3c3R5bGVzLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxmdW5jdGlvbnMuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGhpZ2hsaWdodGVyYWN0aXZhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcaW5pdGlhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcc2F2ZWxvYWQuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXHNjcm9sbGF0dGFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQUksY0FBZSxVQUFTLENBQVQsRUFBWTs7QUFFOUIsVUFBUyxXQUFULENBQXFCLE9BQXJCLEVBQThCO0FBQzdCLE9BQUssT0FBTCxHQUFlLE9BQWY7QUFDQSxPQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsdUJBQVcsbUJBQVgsQ0FBK0IsSUFBL0I7QUFDQTs7QUFFRCxhQUFZLFNBQVosQ0FBc0IsVUFBdEIsR0FBbUMsWUFBVztBQUM3QyxNQUFJLFVBQVUsU0FBUyxhQUFULE9BQTJCLEtBQUssT0FBTCxDQUFhLE9BQXhDLENBQWQ7QUFDQSxNQUFHLENBQUMsS0FBSyxPQUFMLENBQWEsT0FBZCxJQUF5QixDQUFDLE9BQTdCLEVBQXNDO0FBQ3JDLFNBQU0seUJBQU47QUFDQTtBQUNELFNBQU8sT0FBUDtBQUNBLEVBTkQ7O0FBUUEsYUFBWSxTQUFaLENBQXNCLGdCQUF0QixHQUF5QyxZQUFXO0FBQ25ELFNBQU8sS0FB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QSxJQUFJLDhCQUFKO0FBQ0E7QUFDQSxJQUFJLDhCQUFKOztBQUVBLFNBQVMsMEJBQVQsR0FBcUM7QUFDcEMsaUJBQWdCLFNBQWhCLEdBQTRCLFFBQVEsU0FBcEM7QUFDQSxpQkFBZ0IsVUFBaEIsR0FBNkIsUUFBUSxVQUFyQztBQUNBOztBQUVELFNBQVMsMEJBQVQsR0FBcUM7QUFDcEMsU0FBUSxTQUFSLEdBQW9CLGdCQUFnQixTQUFwQztBQUNBLFNBQVEsVUFBUixHQUFxQixnQkFBZ0IsVUFBckM7QUFDQTs7QUFFRCxTQUFTLGFBQVQsQ0FBdUIsV0FBdkIsRUFBbUM7QUFDbEMseUJBQXdCLDJCQUEyQixJQUEzQixDQUFnQyxXQUFoQyxDQUF4QjtBQUNBLHlCQUF1QiwyQkFBMkIsSUFBM0IsQ0FBZ0MsV0FBaEMsQ0FBdkI7QUFDQSxtQkFBa0IsWUFBWSxrQkFBWixFQUFsQjtBQUNBLFdBQVUsWUFBWSxVQUFaLEVBQVY7QUFDQTs7QUFFRCxTQUFTLG1CQUFULEdBQThCO0FBQzdCLFNBQVEsZ0JBQVIsQ0FBeUIsUUFBekIsRUFBbUMscUJBQW5DO0FBQ0E7O0FBRUQsU0FBUyx1QkFBVCxHQUFrQztBQUNqQyxTQUFRLG1CQUFSLENBQTRCLFFBQTVCLEVBQXNDLHFCQUF0QztBQUNBOztBQUVELFNBQVMsbUJBQVQsR0FBOEI7QUFDN0IsaUJBQWdCLGdCQUFoQixDQUFpQyxRQUFqQyxFQUEyQyxxQkFBM0M7QUFDQTs7QUFFRCxTQUFTLHVCQUFULEdBQWtDO0FBQ2pDLGlCQUFnQixtQkFBaEIsQ0FBb0MsUUFBcEMsRUFBOEMscUJBQTlDO0FBQ0E7O2tCQUVjO0FBQ2QsZ0JBQWUsYUFERDtBQUVkLHNCQUFxQixtQkFGUDtBQUdkLDBCQUF5Qix1QkFIWDtBQUlkLHNCQUFxQixtQkFKUDtBQUtkLDBCQUF5QjtBQUxYLEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGluaXRpYXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaW5pdGlhdGlvbi5qcyc7XHJcbmltcG9ydCBoaWdobGlnaHRlckFjdGl2YXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaGlnaGxpZ2h0ZXJhY3RpdmF0aW9uLmpzJztcclxuaW1wb3J0IGRyYXdTdHlsZXMgZnJvbSAnLi9zdHJ1Y3R1cmUvZHJhd3N0eWxlcy5qcyc7XHJcbmltcG9ydCBzYXZlbG9hZCBmcm9tICcuL3N0cnVjdHVyZS9zYXZlbG9hZC5qcyc7XHJcblxyXG52YXIgSGlnaGxpZ2h0ZXIgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuXHRmdW5jdGlvbiBIaWdobGlnaHRlcihvcHRpb25zKSB7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cdFx0dGhpcy5pbWFnZSA9ICcnO1xyXG5cdFx0aW5pdGlhdGlvbi5pbml0Q2FudmFzT25FbGVtZW50KHRoaXMpO1xyXG5cdH1cclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdGxldCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7dGhpcy5vcHRpb25zLmVsZW1lbnR9YCk7XHJcblx0XHRpZighdGhpcy5vcHRpb25zLmVsZW1lbnQgfHwgIWVsZW1lbnQgKXtcclxuXHRcdFx0dGhyb3cgJ2VsZW1lbnQgaWQgbm90IGRldGVjdGVkJztcclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGVtZW50O1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRDYW52YXNFbGVtZW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmNhbnZhc0VsZW1lbnQ7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldENhbnZhc0NvbnRhaW5lciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5jYW52YXNDb250YWluZXI7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuY2FudmFzQ29udGFpbmVyRGltZW5zaW9ucztcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0V2hvbGVDb250YWluZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuY29udGFpbmVyID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuY29udGFpbmVyKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLnpJbmRleCB8fCAnMSc7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldENhbGliYXJhdGlvbkxldmVsID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmNhbGliYXJhdGlvbkxldmVsIHx8IDEwO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRMYW5ndWFnZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5sYW5nIHx8ICdlJztcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLnJhZGl1cyB8fCAxMDtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2FudmFzRWxlbWVudCgpLmdldENvbnRleHQoJzJkJyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMub3BhY2l0eTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuY29sb3IgfHwgJ3llbGxvdyc7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmFjdGl2YXRlSGlnaGxpZ2h0ZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdGhpZ2hsaWdodGVyQWN0aXZhdGlvbi5hY3RpdmF0ZSh0aGlzKTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZGVhY3RpdmF0ZUhpZ2hsaWdodGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRoaWdobGlnaHRlckFjdGl2YXRpb24uZGVhY3RpdmF0ZSh0aGlzKTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuc3RhcnRNYXJrZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdGRyYXdTdHlsZXMuaW5pdE1hcmtTdHlsZSh0aGlzKTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuc3RhcnRFcmFzZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdGRyYXdTdHlsZXMuaW5pdEVyYXNlU3R5bGUodGhpcyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLnNhdmVJbWFnZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c2F2ZWxvYWQuc2F2ZSh0aGlzKTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUubG9hZEltYWdlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRzYXZlbG9hZC5sb2FkKHRoaXMpO1xyXG5cdH07XHJcblxyXG5cdHdpbmRvdy5IaWdobGlnaHRlciA9IEhpZ2hsaWdodGVyO1xyXG5cclxuXHRyZXR1cm4gSGlnaGxpZ2h0ZXI7XHJcblxyXG59KShqUXVlcnkpOyIsIi8vIGNhbGliYXJhdGlvbiBhbGdvcml0aG1zIGZvciB4IGFuZCBZIHBvc2l0aW9ucyBvZiBwb2ludHNcclxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uKCkge1xyXG5cclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlWChjbGllbnRYLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKSB7XHJcblx0XHR2YXIgZWxlbWVudFggPSBjbGllbnRYO1xyXG5cdFx0ZWxlbWVudFggPSBjYWxpYmFyYXRlRWxlbWVudFgoZWxlbWVudFgsIHBhcmVudHMpO1xyXG5cdFx0ZWxlbWVudFggPSBjYWxpYmFyYXRlU2Nyb2xsTGVmdChlbGVtZW50WCwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyKTtcclxuXHRcdGVsZW1lbnRYID0gY2FsaWJhcmF0ZVNjYWxlWChlbGVtZW50WCwgY2FudmFzQ29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZyk7XHJcblx0XHRyZXR1cm4gZWxlbWVudFg7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlWShjbGllbnRZLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKSB7XHJcblx0XHR2YXIgZWxlbWVudFkgPSBjbGllbnRZO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlRWxlbWVudFkoZWxlbWVudFksIHBhcmVudHMpO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlU2Nyb2xsVG9wKGVsZW1lbnRZLCBwYXJlbnRzLCBjYW52YXNDb250YWluZXIpO1xyXG5cdFx0ZWxlbWVudFkgPSBjYWxpYmFyYXRlU2NhbGVZKGVsZW1lbnRZLCBjYW52YXNDb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHRcdHJldHVybiBlbGVtZW50WTtcclxuXHR9XHJcblxyXG5cdC8vIGluIGNhc2Ugb2YgYWJzb2x1dGUgZGl2cyBvbmx5IC0gY2FsY3VsYXRlIGxlZnRcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlRWxlbWVudFgoY2xpZW50WCwgcGFyZW50cykge1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IDA7XHJcblx0XHRsZXQgYWNjdW1PZmZzZXRMZWZ0ID0gMDtcclxuXHRcdHBhcmVudHMgPSBwYXJlbnRzLnRvQXJyYXkoKS5yZXZlcnNlKCk7XHJcblx0XHRwYXJlbnRzLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgbnVtYmVyKSB7XHJcblx0XHRcdGFkZGl0aW9ucyArPSAoZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gYWNjdW1PZmZzZXRMZWZ0KTtcclxuXHRcdFx0YWNjdW1PZmZzZXRMZWZ0ICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGNsaWVudFggLSBhZGRpdGlvbnM7XHJcblx0fVxyXG5cclxuXHQvLyBpbiBjYXNlIG9mIGFic29sdXRlIGRpdnMgb25seSAtIGNhbGN1bGF0ZSB0b3BcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlRWxlbWVudFkoY2xpZW50WSwgcGFyZW50cykge1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IDA7XHJcblx0XHRsZXQgYWNjdW1PZmZzZXRUb3AgPSAwO1xyXG5cdFx0cGFyZW50cyA9IHBhcmVudHMudG9BcnJheSgpLnJldmVyc2UoKTtcclxuXHRcdHBhcmVudHMuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50LCBudW1iZXIpIHtcclxuXHRcdFx0YWRkaXRpb25zICs9IChlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIGFjY3VtT2Zmc2V0VG9wKTtcclxuXHRcdFx0YWNjdW1PZmZzZXRUb3AgKz0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRZIC0gYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHNjcm9sbCBsZWZ0XHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVNjcm9sbExlZnQoY2xpZW50WCwgcGFyZW50cywgY29udGFpbmVyKSB7XHJcblx0XHR2YXIgaW5pdGlhbFdpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoO1xyXG5cdFx0dmFyIHNjYWxlZFdpZHRoID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5cdFx0dmFyIHdpZHRoRGlmZiA9IHNjYWxlZFdpZHRoIC0gaW5pdGlhbFdpZHRoO1xyXG5cdFx0dmFyIHNjYWxlWCA9IHNjYWxlZFdpZHRoIC8gaW5pdGlhbFdpZHRoO1xyXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XHJcblxyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IDA7XHJcblx0XHRwYXJlbnRzLmVhY2goZnVuY3Rpb24obnVtYmVyLCBlbGVtZW50KSB7XHJcblx0XHRcdGlmIChlbGVtZW50ID09PSBjb250YWluZXIpIHtcclxuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxMZWZ0ICsgZWxlbWVudC5zY3JvbGxMZWZ0ICogKHNjYWxlWCAtIDEpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFkZGl0aW9ucyArPSBlbGVtZW50LnNjcm9sbExlZnQ7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGNsaWVudFggKyBhZGRpdGlvbnM7XHJcblx0fVxyXG5cclxuXHQvLyBjYWxjdWxhdGUgc2Nyb2xsIHRvcFxyXG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVTY3JvbGxUb3AoY2xpZW50WSwgcGFyZW50cywgY29udGFpbmVyKSB7XHJcblx0XHR2YXIgaW5pdGlhbEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XHJcblx0XHR2YXIgc2NhbGVkSGVpZ2h0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHRcdHZhciBzY2FsZVkgPSBzY2FsZWRIZWlnaHQgLyBpbml0aWFsSGVpZ2h0O1xyXG5cdFx0c2NhbGVZID0gcGFyc2VGbG9hdChzY2FsZVkudG9GaXhlZCg1KSk7XHJcblxyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IDA7XHJcblx0XHRwYXJlbnRzLmVhY2goZnVuY3Rpb24obnVtYmVyLCBlbGVtZW50KSB7XHJcblx0XHRcdGlmIChlbGVtZW50ID09PSBjb250YWluZXIpIHtcclxuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxUb3AgKyBlbGVtZW50LnNjcm9sbFRvcCAqIChzY2FsZVkgLSAxKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxUb3A7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGNsaWVudFkgKyBhZGRpdGlvbnM7XHJcblx0fVxyXG5cclxuXHQvLyBjYWxjdWxhdGUgc2NhbGUgWFxyXG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVTY2FsZVgoY2xpZW50WCwgY29udGFpbmVyLCBjYWxEZWdyZWUsIGxhbmcpIHtcclxuXHRcdHZhciBpbml0aWFsV2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGg7XHJcblx0XHR2YXIgc2NhbGVkV2lkdGggPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcblx0XHR2YXIgd2lkdGhEaWZmID0gc2NhbGVkV2lkdGggLSBpbml0aWFsV2lkdGg7XHJcblx0XHR2YXIgc2NhbGVYID0gc2NhbGVkV2lkdGggLyBpbml0aWFsV2lkdGg7XHJcblx0XHRzY2FsZVggPSBwYXJzZUZsb2F0KHNjYWxlWC50b0ZpeGVkKDUpKTtcclxuXHRcdHZhciBjYWxpYmFyYXRlZFZhbHVlID0gMDtcclxuXHRcdGZvciAodmFyIGNhbExldmVsID0gMDsgY2FsTGV2ZWwgPD0gY2FsRGVncmVlOyBjYWxMZXZlbCsrKSB7XHJcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgKz0gY2xpZW50WCAqIE1hdGgucG93KDEgLSBzY2FsZVgsIGNhbExldmVsKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobGFuZyA9PT0gJ2EnKSB7XHJcblx0XHRcdC8vIGNhbGliYXJhdGUgd2lkdGhcclxuXHRcdFx0Zm9yICh2YXIgX2NhbExldmVsID0gMDsgX2NhbExldmVsIDw9IGNhbERlZ3JlZTsgX2NhbExldmVsKyspIHtcclxuXHRcdFx0XHRjYWxpYmFyYXRlZFZhbHVlICs9IHdpZHRoRGlmZiAqIE1hdGgucG93KDEgLSBzY2FsZVgsIF9jYWxMZXZlbCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGNhbGliYXJhdGVkVmFsdWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGNhbGliYXJhdGVkVmFsdWU7XHJcblx0fVxyXG5cclxuXHQvLyBjYWxjdWxhdGUgc2NhbGUgWVxyXG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVTY2FsZVkoY2xpZW50WSwgY29udGFpbmVyLCBjYWxEZWdyZWUsIHRyYW5zZm9ybU9yaWdpblkpIHtcclxuXHRcdHZhciBpbml0aWFsSGVpZ2h0ID0gY29udGFpbmVyLm9mZnNldEhlaWdodDtcclxuXHRcdHZhciBzY2FsZWRIZWlnaHQgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG5cdFx0dHJhbnNmb3JtT3JpZ2luWSA9IE51bWJlcih0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHRcdHZhciB0cmFuc2Zvcm1PcmlnaW5ZQ29ycmVjdGlvbkZhY3RvciA9IHRyYW5zZm9ybU9yaWdpblkgLyAoc2NhbGVkSGVpZ2h0ICsgdHJhbnNmb3JtT3JpZ2luWSk7XHJcblx0XHR2YXIgc2NhbGVZID0gc2NhbGVkSGVpZ2h0IC8gaW5pdGlhbEhlaWdodDtcclxuXHRcdHNjYWxlWSA9IHBhcnNlRmxvYXQoc2NhbGVZLnRvRml4ZWQoNSkpO1xyXG5cdFx0dmFyIGNhbGliYXJhdGVkVmFsdWUgPSAwO1xyXG5cdFx0Zm9yICh2YXIgY2FsTGV2ZWwgPSAwOyBjYWxMZXZlbCA8PSBjYWxEZWdyZWU7IGNhbExldmVsKyspIHtcclxuXHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSArPSBjbGllbnRZICogTWF0aC5wb3coMSAtIHNjYWxlWSwgY2FsTGV2ZWwpO1xyXG5cdFx0fVxyXG5cdFx0Zm9yICh2YXIgX2NhbExldmVsMiA9IDE7IF9jYWxMZXZlbDIgPD0gY2FsRGVncmVlOyBfY2FsTGV2ZWwyKyspIHtcclxuXHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSAtPSB0cmFuc2Zvcm1PcmlnaW5ZICogTWF0aC5wb3coMSAtIHNjYWxlWSwgX2NhbExldmVsMik7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2FsaWJhcmF0ZWRWYWx1ZTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRjYWxpYmFyYXRlWDogY2FsaWJhcmF0ZVgsXHJcblx0XHRjYWxpYmFyYXRlWTogY2FsaWJhcmF0ZVlcclxuXHR9XHJcblxyXG59KCkpO1xyXG4iLCJpbXBvcnQgZnVuY3Rpb25zIGZyb20gJy4vZnVuY3Rpb25zLmpzJztcclxuXHJcbi8vIGRlZmF1bHQgY2FudmFzIHN0eWxlXHJcbmZ1bmN0aW9uIGluaXRDYW52YXNTdHlsZShoaWdobGlnaHRlcil7XHJcblx0bGV0IGNvbnRleHQgPSBoaWdobGlnaHRlci5nZXRDb250ZXh0KCk7XHJcblx0bGV0IHJhZGl1cyA9IGhpZ2hsaWdodGVyLmdldFJhZGl1cygpO1xyXG5cdGNvbnRleHQubGluZUNhcCA9IFwicm91bmRcIjtcclxuXHRjb250ZXh0LmxpbmVKb2luID0gXCJyb3VuZFwiO1xyXG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xyXG5cdGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBoaWdobGlnaHRlci5nZXRDb2xvcigpO1xyXG5cdGNvbnRleHQuZmlsbFN0eWxlID0gaGlnaGxpZ2h0ZXIuZ2V0Q29sb3IoKTtcclxuXHRjb250ZXh0LmxpbmVXaWR0aCA9IHJhZGl1cyAqIDI7XHJcbn1cclxuXHJcbi8vIEFkanVzdCBjYW52YXMgY29udGFpbmVyIHBvc2l0aW9uIGFuZCBkaW1lbnNpb25zIHdpdGggbm9uZSBzY2FsZWQgZWxlbWVudFxyXG5mdW5jdGlvbiBjYW52YXNDb250YWluZXJBZGp1c3QoaGlnaGxpZ2h0ZXIsIGNhbnZhc0NvbnRhaW5lciwgZWxlbWVudCkge1xyXG5cdGxldCBlbGVtZW50UG9zaXRpb25zID0gZnVuY3Rpb25zLmdldFBvc2l0aW9uKGVsZW1lbnQpO1xyXG5cdGxldCBjYW52YXNDb250YWluZXJEaW1lbnNpb25zID0ge1xyXG5cdFx0d2lkdGg6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsXHJcblx0XHRoZWlnaHQ6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LFxyXG5cdFx0bGVmdDogZWxlbWVudFBvc2l0aW9ucy54LFxyXG5cdFx0dG9wOiBlbGVtZW50UG9zaXRpb25zLnksXHJcblx0fTtcclxuXHRmdW5jdGlvbnMuYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsICdjYW52YXNDb250YWluZXJEaW1lbnNpb25zJywgY2FudmFzQ29udGFpbmVyRGltZW5zaW9ucyk7XHJcblxyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS53aWR0aCArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lckRpbWVuc2lvbnMoKS5oZWlnaHQgKyAncHgnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzQ29udGFpbmVyRGltZW5zaW9ucygpLmxlZnQgKyAncHgnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS50b3AgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXJEaW1lbnNpb25zKCkudG9wICsgJ3B4JztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUuekluZGV4ID0gaGlnaGxpZ2h0ZXIuZ2V0WkluZGV4KCk7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgYWRqdXN0Q2FudmFzT25SZXNpemUuYmluZChoaWdobGlnaHRlcikpO1xyXG59XHJcblxyXG4vLyB3aG9sZSBDb250YWluZXIgc3R5bGVcclxuZnVuY3Rpb24gd2hvbGVDb250YWluZXJBZGp1c3Qod2hvbGVDb250YWluZXIpe1xyXG5cdHdob2xlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gd2hvbGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gIT0gJ2Fic29sdXRlJyA/ICdyZWxhdGl2ZScgOiAnYWJzb2x1dGUnO1xyXG59XHJcblxyXG4vLyBlbGVtZW50IG9uIHJlc2l6ZVxyXG5mdW5jdGlvbiBhZGp1c3RDYW52YXNPblJlc2l6ZSgpe1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSB0aGlzLmdldENhbnZhc0NvbnRhaW5lcigpO1xyXG5cdGxldCBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KCk7XHJcblx0bGV0IGVsZW1lbnRQb3NpdGlvbnMgPSBmdW5jdGlvbnMuZ2V0UG9zaXRpb24oZWxlbWVudCk7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBlbGVtZW50UG9zaXRpb25zLnggKyAncHgnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS50b3AgPSBlbGVtZW50UG9zaXRpb25zLnkgKyAncHgnO1xyXG59XHJcblxyXG4vLyBBZGp1c3QgY2FudmFzIGVsZW1lbnQgZGltZW5zaW9uc1xyXG5mdW5jdGlvbiBjYW52YXNFbGVtZW50QWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNFbGVtZW50LCBlbGVtZW50KSB7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnQuc2Nyb2xsV2lkdGggKyAncHgnO1xyXG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5yaWdodCA9ICcwcHgnO1xyXG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUuekluZGV4ID0gJzEnO1xyXG5cdGNhbnZhc0VsZW1lbnQud2lkdGggPSBlbGVtZW50LnNjcm9sbFdpZHRoO1xyXG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG5cdGNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcblx0Y2FudmFzRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gaGlnaGxpZ2h0ZXIuZ2V0T3BhY2l0eSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0KGhpZ2hsaWdodGVyLCB3aG9sZUNvbnRhaW5lciwgY2FudmFzQ29udGFpbmVyLCBlbGVtZW50LCBjYW52YXNFbGVtZW50KXtcclxuXHR3aG9sZUNvbnRhaW5lckFkanVzdCh3aG9sZUNvbnRhaW5lcik7XHJcblx0Y2FudmFzQ29udGFpbmVyQWRqdXN0KGhpZ2hsaWdodGVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQpO1xyXG5cdGNhbnZhc0VsZW1lbnRBZGp1c3QoaGlnaGxpZ2h0ZXIsIGNhbnZhc0VsZW1lbnQsIGVsZW1lbnQpO1xyXG5cdGluaXRDYW52YXNTdHlsZShoaWdobGlnaHRlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0OiBpbml0XHJcbn0iLCJpbXBvcnQgY2FsaWJhcnRpb24gZnJvbSAnLi9jYWxpYmFydGlvbi5qcyc7XHJcblxyXG4vLyBwdXQgYSBwb2ludCBvbiBjYW52YXNcclxuZnVuY3Rpb24gcHV0UG9pbnQoaGlnaGxpZ2h0ZXIsIGVsZW1lbnRYLCBlbGVtZW50WSkge1xyXG5cdHZhciBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xyXG5cdHZhciByYWRpdXMgPSBoaWdobGlnaHRlci5nZXRSYWRpdXMoKTtcclxuXHRjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG5cdGNvbnRleHQuYXJjKGVsZW1lbnRYLCBlbGVtZW50WSwgcmFkaXVzLCAwLCBNYXRoLlBJICogMik7XHJcblx0Y29udGV4dC5maWxsKCk7XHJcbn1cclxuXHJcbi8vIHN0YXJ0IHBhaW50IG9uIGNhbnZhc1xyXG5mdW5jdGlvbiBzdGFydERyYXdpbmcoZXZlbnQpIHtcclxuXHR2YXIgcGFyZW50cyA9ICQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCk7XHJcblx0dmFyIGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG5cdHZhciBlbGVtZW50WCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5wYWdlWDtcclxuXHR2YXIgZWxlbWVudFkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQucGFnZVk7XHJcblx0dmFyIHRyYW5zZm9ybU9yaWdpblkgPSAkKGNvbnRhaW5lcikuY3NzKCd0cmFuc2Zvcm0tb3JpZ2luJykuc3BsaXQoJyAnKVsxXTtcclxuXHR2YXIgY2FsaWJhcmF0aW9uTGV2ZWwgPSB0aGlzLmdldENhbGliYXJhdGlvbkxldmVsKCk7XHJcblx0dmFyIGxhbmcgPSB0aGlzLmdldExhbmd1YWdlKCk7XHJcblx0dmFyIGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKTtcclxuXHR0cmFuc2Zvcm1PcmlnaW5ZID0gdHJhbnNmb3JtT3JpZ2luWS5yZXBsYWNlKCdweCcsICcnKTtcclxuXHJcblx0ZWxlbWVudFggPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWChlbGVtZW50WCwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZyk7XHJcblx0ZWxlbWVudFkgPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWShlbGVtZW50WSwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSk7XHJcblxyXG5cdHB1dFBvaW50KHRoaXMsIGVsZW1lbnRYLCBlbGVtZW50WSk7XHJcblx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRjb250ZXh0Lm1vdmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xyXG59XHJcblxyXG4vLyBkcmF3IGxpbmVzIG9uIGNhbnZhc1xyXG5mdW5jdGlvbiBkcmF3TGluZShldmVudCkge1xyXG5cdHZhciBwYXJlbnRzID0gJChldmVudC50YXJnZXQpLnBhcmVudHMoKTtcclxuXHR2YXIgY29udGFpbmVyID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XHJcblx0dmFyIGVsZW1lbnRYID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LnBhZ2VYO1xyXG5cdHZhciBlbGVtZW50WSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5wYWdlWTtcclxuXHR2YXIgdHJhbnNmb3JtT3JpZ2luWSA9ICQoY29udGFpbmVyKS5jc3MoJ3RyYW5zZm9ybS1vcmlnaW4nKS5zcGxpdCgnICcpWzFdO1xyXG5cdHZhciBjYWxpYmFyYXRpb25MZXZlbCA9IHRoaXMuZ2V0Q2FsaWJhcmF0aW9uTGV2ZWwoKTtcclxuXHR2YXIgbGFuZyA9IHRoaXMuZ2V0TGFuZ3VhZ2UoKTtcclxuXHR2YXIgY29udGV4dCA9IHRoaXMuZ2V0Q29udGV4dCgpO1xyXG5cdHRyYW5zZm9ybU9yaWdpblkgPSB0cmFuc2Zvcm1PcmlnaW5ZLnJlcGxhY2UoJ3B4JywgJycpO1xyXG5cclxuXHRlbGVtZW50WCA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVYKGVsZW1lbnRYLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCBsYW5nKTtcclxuXHRlbGVtZW50WSA9IGNhbGliYXJ0aW9uLmNhbGliYXJhdGVZKGVsZW1lbnRZLCBwYXJlbnRzLCBjb250YWluZXIsIGNhbGliYXJhdGlvbkxldmVsLCB0cmFuc2Zvcm1PcmlnaW5ZKTtcclxuXHJcblx0Y29udGV4dC5saW5lVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxuXHRjb250ZXh0LnN0cm9rZSgpO1xyXG5cdHB1dFBvaW50KHRoaXMsIGVsZW1lbnRYLCBlbGVtZW50WSk7XHJcblx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRjb250ZXh0Lm1vdmVUbyhlbGVtZW50WCwgZWxlbWVudFkpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0cHV0UG9pbnQ6IHB1dFBvaW50LFxyXG5cdHN0YXJ0RHJhd2luZzogc3RhcnREcmF3aW5nLFxyXG5cdGRyYXdMaW5lOiBkcmF3TGluZVxyXG59IiwiZnVuY3Rpb24gaW5pdE1hcmtTdHlsZShoaWdobGlnaHRlcil7XHJcblx0bGV0IGNvbnRleHQgPSBoaWdobGlnaHRlci5nZXRDb250ZXh0KCk7XHJcblx0Y29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRFcmFzZVN0eWxlKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKTtcclxuXHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCI7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0TWFya1N0eWxlOiBpbml0TWFya1N0eWxlLFxyXG5cdGluaXRFcmFzZVN0eWxlOiBpbml0RXJhc2VTdHlsZVxyXG59XHJcbiIsIi8vIGdldCBwb3NpdGlvbiBvZiBlbGVtZW50XHJcbmZ1bmN0aW9uIGdldFBvcyhlbCkge1xyXG5cdGxldCBlbGVtZW50cyA9IFtdO1xyXG5cdGZvciAodmFyIGx4ID0gMCwgbHkgPSAwOyBlbCAhPSBudWxsOyBseCArPSBlbC5vZmZzZXRMZWZ0LCBseSArPSBlbC5vZmZzZXRUb3AsIGVsID0gZWwub2Zmc2V0UGFyZW50KXtcclxuXHRcdGVsZW1lbnRzLnB1c2goZWwpO1xyXG5cdH1cclxuXHRyZXR1cm4geyB4OiBseCwgeTogbHksIGVsZW1lbnRzOiBlbGVtZW50cyB9O1xyXG59XHJcblxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBhbiBlbGVtZW50J3MgZXhhY3QgcG9zaXRpb25cclxuZnVuY3Rpb24gZ2V0UG9zaXRpb24oZWwpIHtcclxuXHR2YXIgeFBvcyA9IDA7XHJcblx0dmFyIHlQb3MgPSAwO1xyXG5cclxuXHR3aGlsZSAoZWwpIHtcclxuXHRcdGlmIChlbC50YWdOYW1lID09IFwiQk9EWVwiKSB7XHJcblx0XHRcdC8vIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcyB3aXRoIGJvZHkvd2luZG93L2RvY3VtZW50IGFuZCBwYWdlIHNjcm9sbFxyXG5cdFx0XHR2YXIgeFNjcm9sbCA9IGVsLnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcblx0XHRcdHZhciB5U2Nyb2xsID0gZWwuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcblxyXG5cdFx0XHR4UG9zICs9IChlbC5vZmZzZXRMZWZ0IC0geFNjcm9sbCArIGVsLmNsaWVudExlZnQpO1xyXG5cdFx0XHR5UG9zICs9IChlbC5vZmZzZXRUb3AgLSB5U2Nyb2xsICsgZWwuY2xpZW50VG9wKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGZvciBhbGwgb3RoZXIgbm9uLUJPRFkgZWxlbWVudHNcclxuXHRcdFx0eFBvcyArPSAoZWwub2Zmc2V0TGVmdCAtIGVsLnNjcm9sbExlZnQgKyBlbC5jbGllbnRMZWZ0KTtcclxuXHRcdFx0eVBvcyArPSAoZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50VG9wKTtcclxuXHRcdH1cclxuXHJcblx0XHRlbCA9IGVsLm9mZnNldFBhcmVudDtcclxuXHR9XHJcblx0cmV0dXJuIHtcclxuXHRcdHg6IHhQb3MsXHJcblx0XHR5OiB5UG9zXHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9IaWdobGlnaHRlck9wdGlvbnMoaGlnaGxpZ2h0ZXIsIGtleSwgdmFsdWUpe1xyXG5cdGhpZ2hsaWdodGVyLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0Z2V0UG9zOiBnZXRQb3MsXHJcblx0Z2V0UG9zaXRpb246IGdldFBvc2l0aW9uLFxyXG5cdGFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zOiBhZGRUb0hpZ2hsaWdodGVyT3B0aW9uc1xyXG59IiwiaW1wb3J0IHNjcm9sbGF0dGFjaCBmcm9tICcuL3Njcm9sbGF0dGFjaC5qcyc7XHJcblxyXG5mdW5jdGlvbiBhY3RpdmF0ZShoaWdobGlnaHRlcil7XHJcblx0bGV0IGNhbnZhc0NvbnRhaW5lciA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0NvbnRhaW5lcigpO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xyXG5cdHNjcm9sbGF0dGFjaC51bmhvb2tDYW52YXNGcm9tRWxlbWVudCgpO1xyXG5cdHNjcm9sbGF0dGFjaC5ob29rRWxlbWVudFRvQ2FudmFzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlYWN0aXZhdGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcclxuXHRzY3JvbGxhdHRhY2guaG9va0NhbnZhc1RvRWxlbWVudCgpO1xyXG5cdHNjcm9sbGF0dGFjaC51bmhvb2tFbGVtZW50RnJvbUNhbnZhcygpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0YWN0aXZhdGU6IGFjdGl2YXRlLFxyXG5cdGRlYWN0aXZhdGU6IGRlYWN0aXZhdGVcclxufSIsImltcG9ydCBkcmF3IGZyb20gJy4vZHJhdy5qcyc7XHJcbmltcG9ydCBmdW5jdGlvbnMgZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xyXG5pbXBvcnQgY2FudmFzc3R5bGVkaW1lbnNpb24gZnJvbSAnLi9jYW52YXNzdHlsZWRpbWVuc2lvbi5qcyc7XHJcbmltcG9ydCBzY3JvbGxhdHRhY2ggZnJvbSAnLi9zY3JvbGxhdHRhY2guanMnO1xyXG5cclxuLy8gaW5pdGlhdGUgY2FudmFzIG9uIGluaXRpYXRpbmcgaGlnaGxpZ2h0ZXIgb2JqZWN0XHJcbmZ1bmN0aW9uIGluaXRDYW52YXNPbkVsZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcclxuXHRsZXQgd2hvbGVDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRXaG9sZUNvbnRhaW5lcigpO1xyXG5cdGxldCBlbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0RWxlbWVudCgpO1xyXG5cclxuXHQvLyBidWlsZCBjYW52YXNcclxuXHRsZXQgY2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cclxuXHQvLyBidWlsZCBjYW52YXMgY29udGFpbmVyXHJcblx0bGV0IGNhbnZhc0NvbnRhaW5lciA9IGJ1aWxkQ2FudmFzQ29udGFpbmVyKGhpZ2hsaWdodGVyKTtcclxuXHJcblx0Ly8gYXBwZW5kIGVsZW1lbnRzXHJcblx0Y2FudmFzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhc0VsZW1lbnQpO1xyXG5cdHdob2xlQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhc0NvbnRhaW5lcik7XHJcblxyXG5cdC8vIGFkZCB0byBoaWdobGlnaHRlclxyXG5cdGZ1bmN0aW9ucy5hZGRUb0hpZ2hsaWdodGVyT3B0aW9ucyhoaWdobGlnaHRlciwgJ2NhbnZhc0NvbnRhaW5lcicsIGNhbnZhc0NvbnRhaW5lcik7XHJcblx0ZnVuY3Rpb25zLmFkZFRvSGlnaGxpZ2h0ZXJPcHRpb25zKGhpZ2hsaWdodGVyLCAnY2FudmFzRWxlbWVudCcsIGNhbnZhc0VsZW1lbnQpO1xyXG5cclxuXHQvLyBpbml0IGNhbnZhcyBzdHlsZXMgYW5kIGRpbWVuc2lvbnNcclxuXHRjYW52YXNzdHlsZWRpbWVuc2lvbi5pbml0KGhpZ2hsaWdodGVyLCB3aG9sZUNvbnRhaW5lciwgY2FudmFzQ29udGFpbmVyLCBlbGVtZW50LCBjYW52YXNFbGVtZW50KTtcclxuXHJcblx0Ly8gYmluZCBjYW52YXMgdG8gZWxlbWVudCBvbiBzY3JvbGxcclxuXHRzY3JvbGxBdHRhY2hlbWVudChoaWdobGlnaHRlcik7XHJcblxyXG5cdC8vIHN0YXJ0IGRyYXcgb24gY2FudmFzXHJcblx0ZHJhd0NvZGUoaGlnaGxpZ2h0ZXIsIGNhbnZhc0VsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzY3JvbGxBdHRhY2hlbWVudChoaWdobGlnaHRlcil7XHJcblx0c2Nyb2xsYXR0YWNoLmluaXRWYXJpYWJsZXMoaGlnaGxpZ2h0ZXIpO1xyXG5cdHNjcm9sbGF0dGFjaC5ob29rQ2FudmFzVG9FbGVtZW50KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDb2RlKGhpZ2hsaWdodGVyLCBjYW52YXNFbGVtZW50KXtcclxuXHRjYW52YXNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmF3LnN0YXJ0RHJhd2luZy5iaW5kKGhpZ2hsaWdodGVyKSwgZmFsc2UpO1xyXG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZHJhdy5kcmF3TGluZS5iaW5kKGhpZ2hsaWdodGVyKSwgZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZENhbnZhc0NvbnRhaW5lcihoaWdobGlnaHRlcil7XHJcblx0bGV0IGNhbnZhc0NvbnRhaW5lcjtcclxuXHRsZXQgY2FudmFzQ29udGFpbmVySWQgPSBgIyR7bWFrZUNhbnZhc0NvbnRhaW5lcklkKGhpZ2hsaWdodGVyKX1gO1xyXG5cdGlmKCAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYW52YXNDb250YWluZXJJZCkpe1xyXG5cdFx0Y2FudmFzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRjYW52YXNDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsIG1ha2VDYW52YXNDb250YWluZXJJZChoaWdobGlnaHRlcikpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjYW52YXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhbnZhc0NvbnRhaW5lcklkKTtcclxuXHR9XHJcblx0cmV0dXJuIGNhbnZhc0NvbnRhaW5lcjtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNhbnZhc0NvbnRhaW5lcklkKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgZWxlbWVudElkID0gaGlnaGxpZ2h0ZXIub3B0aW9ucy5lbGVtZW50O1xyXG5cdGxldCBjYW52YXNDb250YWluZXJJZCA9IGAke2VsZW1lbnRJZH0tY2FudmFzQ29udGFpbmVyYDtcclxuXHRyZXR1cm4gY2FudmFzQ29udGFpbmVySWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0Q2FudmFzT25FbGVtZW50OiBpbml0Q2FudmFzT25FbGVtZW50XHJcbn0iLCJmdW5jdGlvbiBzYXZlKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgY2FudmFzRWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0VsZW1lbnQoKTtcclxuXHRsZXQgaW1hZ2VEYXRhID0gY2FudmFzRWxlbWVudC50b0RhdGFVUkwoKTtcclxuXHRoaWdobGlnaHRlci5pbWFnZSA9IGltYWdlRGF0YTtcclxuXHRjb25zb2xlLmxvZyhpbWFnZURhdGEpO1xyXG5cdHJldHVybiBpbWFnZURhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWQoaGlnaGxpZ2h0ZXIpe1xyXG5cdGlmKGhpZ2hsaWdodGVyLmltYWdlKXtcclxuXHRcdGxldCBjYW52YXNFbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpO1xyXG5cdFx0bGV0IGltYWdlID0gbmV3IEltYWdlKCk7XHJcblx0XHRpbWFnZS5zcmMgPSBoaWdobGlnaHRlci5pbWFnZTtcclxuXHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAgLCAwKTtcclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0c2F2ZTogc2F2ZSxcclxuXHRsb2FkOiBsb2FkXHJcbn0iLCJsZXQgZWxlbWVudDtcclxubGV0IGNhbnZhc0NvbnRhaW5lcjtcclxuLy9hdHRhY2ggY2FudmFzIHRvIGVsZW1lbnRcclxubGV0IGF0dGFjaENhbnZhc1RvRWxlbWVudDtcclxuLy9hdHRhY2ggZWxlbWVudCB0byBjYW52YXNcclxubGV0IGF0dGFjaEVsZW1lbnRUb0NhbnZhcztcclxuXHJcbmZ1bmN0aW9uIGF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50KCl7XHJcblx0Y2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zY3JvbGxMZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCgpe1xyXG5cdGVsZW1lbnQuc2Nyb2xsVG9wID0gY2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRlbGVtZW50LnNjcm9sbExlZnQgPSBjYW52YXNDb250YWluZXIuc2Nyb2xsTGVmdDtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFZhcmlhYmxlcyhoaWdobGlnaHRlcil7XHJcblx0YXR0YWNoQ2FudmFzVG9FbGVtZW50ID0gYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQuYmluZChoaWdobGlnaHRlcik7XHJcblx0YXR0YWNoRWxlbWVudFRvQ2FudmFzPSBhdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudC5iaW5kKGhpZ2hsaWdodGVyKTtcclxuXHRjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRlbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0RWxlbWVudCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBob29rQ2FudmFzVG9FbGVtZW50KCl7XHJcblx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hDYW52YXNUb0VsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmhvb2tDYW52YXNGcm9tRWxlbWVudCgpe1xyXG5cdGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgYXR0YWNoQ2FudmFzVG9FbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaG9va0VsZW1lbnRUb0NhbnZhcygpe1xyXG5cdGNhbnZhc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hFbGVtZW50VG9DYW52YXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhcygpe1xyXG5cdGNhbnZhc0NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hFbGVtZW50VG9DYW52YXMpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0aW5pdFZhcmlhYmxlczogaW5pdFZhcmlhYmxlcyxcclxuXHRob29rQ2FudmFzVG9FbGVtZW50OiBob29rQ2FudmFzVG9FbGVtZW50LFxyXG5cdHVuaG9va0NhbnZhc0Zyb21FbGVtZW50OiB1bmhvb2tDYW52YXNGcm9tRWxlbWVudCxcclxuXHRob29rRWxlbWVudFRvQ2FudmFzOiBob29rRWxlbWVudFRvQ2FudmFzLFxyXG5cdHVuaG9va0VsZW1lbnRGcm9tQ2FudmFzOiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhc1xyXG59Il19
