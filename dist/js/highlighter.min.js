(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _initiation = require('./structure/initiation.js');

var _initiation2 = _interopRequireDefault(_initiation);

var _highlighteractivation = require('./structure/highlighteractivation.js');

var _highlighteractivation2 = _interopRequireDefault(_highlighteractivation);

var _drawstyles = require('./structure/drawstyles.js');

var _drawstyles2 = _interopRequireDefault(_drawstyles);

var _saveload = require('./structure/saveload.js');

var _saveload2 = _interopRequireDefault(_saveload);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Highlighter = function ($) {

	function Highlighter(options) {
		this.options = options;
		this.image = '';
		_initiation2.default.initCanvasOnElement(this);
	}

	Highlighter.prototype.getElement = function () {
		return document.querySelector(this.options.element);
	};

	Highlighter.prototype.getCanvasElement = function () {
		return this.options.canvasElement;
	};

	Highlighter.prototype.getCanvasContainer = function () {
		return this.options.canvasContainer;
	};

	Highlighter.prototype.getWholeContainer = function () {
		return this.options.container ? document.querySelector(this.options.container) : document.querySelector('body');
	};

	Highlighter.prototype.getZIndex = function () {
		return this.options.index || '1';
	};

	Highlighter.prototype.getCalibarationLevel = function () {
		return this.options.calibarationLevel || 10;
	};

	Highlighter.prototype.getLanguage = function () {
		return this.options.lang || 'e';
	};

	Highlighter.prototype.getRadius = function () {
		return this.options.radius || 10;
	};

	Highlighter.prototype.getContext = function () {
		return this.getCanvasElement().getContext('2d');
	};

	Highlighter.prototype.getOpacity = function () {
		return this.options.opacity;
	};

	Highlighter.prototype.getColor = function () {
		return this.options.color || 'yellow';
	};

	Highlighter.prototype.activateHighlighter = function () {
		_highlighteractivation2.default.activate(this);
	};

	Highlighter.prototype.deactivateHighlighter = function () {
		_highlighteractivation2.default.deactivate(this);
	};

	Highlighter.prototype.startMarker = function () {
		_drawstyles2.default.initMarkStyle(this);
	};

	Highlighter.prototype.startEraser = function () {
		_drawstyles2.default.initEraseStyle(this);
	};

	Highlighter.prototype.saveImage = function () {
		_saveload2.default.save(this);
	};

	Highlighter.prototype.loadImage = function () {
		_saveload2.default.load(this);
	};

	window.Highlighter = Highlighter;

	return Highlighter;
}(jQuery);

},{"./structure/drawstyles.js":5,"./structure/highlighteractivation.js":7,"./structure/initiation.js":8,"./structure/saveload.js":9}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

// calibaration algorithms for x and Y positions of points
exports.default = function () {

	function calibarateX(clientX, parents, canvasContainer, calibarationLevel, lang) {
		var elementX = clientX;
		elementX = calibarateElementX(elementX, parents);
		elementX = calibarateScrollLeft(elementX, parents, canvasContainer);
		elementX = calibarateScaleX(elementX, canvasContainer, calibarationLevel, lang);
		return elementX;
	}

	function calibarateY(clientY, parents, canvasContainer, calibarationLevel, transformOriginY) {
		var elementY = clientY;
		elementY = calibarateElementY(elementY, parents);
		elementY = calibarateScrollTop(elementY, parents, canvasContainer);
		elementY = calibarateScaleY(elementY, canvasContainer, calibarationLevel, transformOriginY);
		return elementY;
	}

	// in case of absolute divs only - calculate left
	function calibarateElementX(clientX, parents) {
		var additions = 0;
		var accumOffsetLeft = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().left - accumOffsetLeft;
			accumOffsetLeft += element.getBoundingClientRect().left;
		});
		return clientX - additions;
	}

	// in case of absolute divs only - calculate top
	function calibarateElementY(clientY, parents) {
		var additions = 0;
		var accumOffsetTop = 0;
		parents = parents.toArray().reverse();
		parents.forEach(function (element, number) {
			additions += element.getBoundingClientRect().top - accumOffsetTop;
			accumOffsetTop += element.getBoundingClientRect().top;
		});
		return clientY - additions;
	}

	// calculate scroll left
	function calibarateScrollLeft(clientX, parents, container) {
		var initialWidth = container.offsetWidth;
		var scaledWidth = container.getBoundingClientRect().width;
		var widthDiff = scaledWidth - initialWidth;
		var scaleX = scaledWidth / initialWidth;
		scaleX = parseFloat(scaleX.toFixed(5));

		var additions = 0;
		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollLeft + element.scrollLeft * (scaleX - 1);
			} else {
				additions += element.scrollLeft;
			}
		});
		return clientX + additions;
	}

	// calculate scroll top
	function calibarateScrollTop(clientY, parents, container) {
		var initialHeight = container.offsetHeight;
		var scaledHeight = container.getBoundingClientRect().height;
		var scaleY = scaledHeight / initialHeight;
		scaleY = parseFloat(scaleY.toFixed(5));

		var additions = 0;
		parents.each(function (number, element) {
			if (element === container) {
				additions += element.scrollTop + element.scrollTop * (scaleY - 1);
			} else {
				additions += element.scrollTop;
			}
		});
		return clientY + additions;
	}

	// calculate scale X
	function calibarateScaleX(clientX, container, calDegree, lang) {
		var initialWidth = container.offsetWidth;
		var scaledWidth = container.getBoundingClientRect().width;
		var widthDiff = scaledWidth - initialWidth;
		var scaleX = scaledWidth / initialWidth;
		scaleX = parseFloat(scaleX.toFixed(5));
		var calibaratedValue = 0;
		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientX * Math.pow(1 - scaleX, calLevel);
		}

		if (lang === 'a') {
			// calibarate width
			for (var _calLevel = 0; _calLevel <= calDegree; _calLevel++) {
				calibaratedValue += widthDiff * Math.pow(1 - scaleX, _calLevel);
			}
			return calibaratedValue;
		}

		return calibaratedValue;
	}

	// calculate scale Y
	function calibarateScaleY(clientY, container, calDegree, transformOriginY) {
		var initialHeight = container.offsetHeight;
		var scaledHeight = container.getBoundingClientRect().height;
		transformOriginY = Number(transformOriginY);
		var transformOriginYCorrectionFactor = transformOriginY / (scaledHeight + transformOriginY);
		var scaleY = scaledHeight / initialHeight;
		scaleY = parseFloat(scaleY.toFixed(5));
		var calibaratedValue = 0;
		for (var calLevel = 0; calLevel <= calDegree; calLevel++) {
			calibaratedValue += clientY * Math.pow(1 - scaleY, calLevel);
		}
		for (var _calLevel2 = 1; _calLevel2 <= calDegree; _calLevel2++) {
			calibaratedValue -= transformOriginY * Math.pow(1 - scaleY, _calLevel2);
		}
		return calibaratedValue;
	}

	return {
		calibarateX: calibarateX,
		calibarateY: calibarateY
	};
}();

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _functions = require("./functions.js");

var _functions2 = _interopRequireDefault(_functions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// default canvas style
function initCanvasStyle(highlighter) {
	var context = highlighter.getContext();
	var radius = highlighter.getRadius();
	context.lineCap = "round";
	context.lineJoin = "round";
	context.globalCompositeOperation = "source-over";
	context.strokeStyle = highlighter.getColor();
	context.fillStyle = highlighter.getColor();
	context.lineWidth = radius * 2;
}

// Adjust canvas container position and dimensions with none scaled element
function canvasContainerAdjustDimensions(highlighter, canvasContainer, element) {
	var elementPositions = _functions2.default.getPosition(element);
	canvasContainer.style.width = element.getBoundingClientRect().width + 'px';
	canvasContainer.style.height = element.getBoundingClientRect().height + 'px';
	canvasContainer.style.position = 'absolute';
	canvasContainer.style.overflow = 'auto';
	canvasContainer.style.left = elementPositions.x + 'px';
	canvasContainer.style.top = elementPositions.y + 'px';
	canvasContainer.style.zIndex = highlighter.getZIndex();
	canvasContainer.style.pointerEvents = 'none';
	canvasContainer.style.opacity = highlighter.getOpacity();
	window.addEventListener("resize", adjustCanvasOnResize.bind(highlighter));
}

// element on resize
function adjustCanvasOnResize() {
	var canvasContainer = this.getCanvasContainer();
	var element = this.getElement();
	var elementPositions = _functions2.default.getPosition(element);
	canvasContainer.style.left = elementPositions.x + 'px';
	canvasContainer.style.top = elementPositions.y + 'px';
}

// Adjust canvas element dimensions
function canvasElementAdjustDimensions(canvasElement, element) {
	canvasElement.style.width = element.scrollWidth + 'px';
	canvasElement.style.display = 'block';
	canvasElement.width = element.scrollWidth;
	canvasElement.style.height = element.scrollHeight + 'px';
	canvasElement.height = element.scrollHeight;
}

function init(highlighter, canvasContainer, element, canvasElement) {
	canvasContainerAdjustDimensions(highlighter, canvasContainer, element);
	canvasElementAdjustDimensions(canvasElement, element);
	initCanvasStyle(highlighter);
}

exports.default = {
	init: init
};

},{"./functions.js":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _calibartion = require('./calibartion.js');

var _calibartion2 = _interopRequireDefault(_calibartion);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// put a point on canvas
function putPoint(highlighter, elementX, elementY) {
	var context = highlighter.getContext();
	var radius = highlighter.getRadius();
	context.beginPath();
	context.arc(elementX, elementY, radius, 0, Math.PI * 2);
	context.fill();
}

// start paint on canvas
function startDrawing(event) {
	var parents = $(event.target).parents();
	var container = event.target.parentNode;
	var elementX = event.touches ? event.touches[0].clientX : event.pageX;
	var elementY = event.touches ? event.touches[0].clientY : event.pageY;
	var transformOriginY = $(container).css('transform-origin').split(' ')[1];
	var calibarationLevel = this.getCalibarationLevel();
	var lang = this.getLanguage();
	var context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

// draw lines on canvas
function drawLine(event) {
	var parents = $(event.target).parents();
	var container = event.target.parentNode;
	var elementX = event.touches ? event.touches[0].clientX : event.pageX;
	var elementY = event.touches ? event.touches[0].clientY : event.pageY;
	var transformOriginY = $(container).css('transform-origin').split(' ')[1];
	var calibarationLevel = this.getCalibarationLevel();
	var lang = this.getLanguage();
	var context = this.getContext();
	transformOriginY = transformOriginY.replace('px', '');

	elementX = _calibartion2.default.calibarateX(elementX, parents, container, calibarationLevel, lang);
	elementY = _calibartion2.default.calibarateY(elementY, parents, container, calibarationLevel, transformOriginY);

	context.lineTo(elementX, elementY);
	context.stroke();
	putPoint(this, elementX, elementY);
	context.beginPath();
	context.moveTo(elementX, elementY);
}

exports.default = {
	putPoint: putPoint,
	startDrawing: startDrawing,
	drawLine: drawLine
};

},{"./calibartion.js":2}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
function initMarkStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "source-over";
}

function initEraseStyle(highlighter) {
	var context = highlighter.getContext();
	context.globalCompositeOperation = "destination-out";
}

exports.default = {
	initMarkStyle: initMarkStyle,
	initEraseStyle: initEraseStyle
};

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
// get position of element
function getPos(el) {
	var elements = [];
	for (var lx = 0, ly = 0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent) {
		elements.push(el);
	}
	return { x: lx, y: ly, elements: elements };
}

// Helper function to get an element's exact position
function getPosition(el) {
	var xPos = 0;
	var yPos = 0;

	while (el) {
		if (el.tagName == "BODY") {
			// deal with browser quirks with body/window/document and page scroll
			var xScroll = el.scrollLeft || document.documentElement.scrollLeft;
			var yScroll = el.scrollTop || document.documentElement.scrollTop;

			xPos += el.offsetLeft - xScroll + el.clientLeft;
			yPos += el.offsetTop - yScroll + el.clientTop;
		} else {
			// for all other non-BODY elements
			xPos += el.offsetLeft - el.scrollLeft + el.clientLeft;
			yPos += el.offsetTop - el.scrollTop + el.clientTop;
		}

		el = el.offsetParent;
	}
	return {
		x: xPos,
		y: yPos
	};
}

exports.default = {
	getPos: getPos,
	getPosition: getPosition
};

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function activate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'auto';
	_scrollattach2.default.unhookCanvasFromElement();
	_scrollattach2.default.hookElementToCanvas();
}

function deactivate(highlighter) {
	var canvasContainer = highlighter.getCanvasContainer();
	canvasContainer.style.pointerEvents = 'none';
	_scrollattach2.default.hookCanvasToElement();
	_scrollattach2.default.unhookElementFromCanvas();
}

exports.default = {
	activate: activate,
	deactivate: deactivate
};

},{"./scrollattach.js":10}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _draw = require('./draw.js');

var _draw2 = _interopRequireDefault(_draw);

var _canvasstyledimension = require('./canvasstyledimension.js');

var _canvasstyledimension2 = _interopRequireDefault(_canvasstyledimension);

var _scrollattach = require('./scrollattach.js');

var _scrollattach2 = _interopRequireDefault(_scrollattach);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// initiate canvas on initiating highlighter object
function initCanvasOnElement(highlighter) {
	var wholeContainer = highlighter.getWholeContainer();
	var element = highlighter.getElement();
	var canvasElement = document.createElement('canvas');
	var canvasContainer = document.createElement('div');
	wholeContainer.style.position = wholeContainer.style.position != 'absolute' ? 'relative' : 'absolute';

	// add highlighter
	canvasContainer.appendChild(canvasElement);
	wholeContainer.appendChild(canvasContainer);
	highlighter.options.canvasContainer = canvasContainer;
	highlighter.options.canvasElement = canvasElement;

	// init canvas styles and dimensions
	_canvasstyledimension2.default.init(highlighter, canvasContainer, element, canvasElement);

	// bind canvas to element on scroll
	_scrollattach2.default.initVariables(highlighter);
	_scrollattach2.default.hookCanvasToElement();

	// start draw on canvas
	canvasElement.addEventListener('touchstart', _draw2.default.startDrawing.bind(highlighter), false);
	canvasElement.addEventListener('touchmove', _draw2.default.drawLine.bind(highlighter), false);
}

exports.default = {
	initCanvasOnElement: initCanvasOnElement
};

},{"./canvasstyledimension.js":3,"./draw.js":4,"./scrollattach.js":10}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
function save(highlighter) {
	var canvasElement = highlighter.getCanvasElement();
	var imageData = canvasElement.toDataURL();
	highlighter.image = imageData;
	console.log(imageData);
	return imageData;
}

function load(highlighter) {
	if (highlighter.image) {
		(function () {
			var canvasElement = highlighter.getCanvasElement();
			var image = new Image();
			image.src = highlighter.image;
			image.onload = function () {
				canvasElement.getContext('2d').drawImage(image, 0, 0);
			};
		})();
	}
}

exports.default = {
	save: save,
	load: load
};

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
var element = void 0;
var canvasContainer = void 0;
//attach canvas to element
var attachCanvasToElement = void 0;
//attach element to canvas
var attachElementToCanvas = void 0;

function attachCanvasToElementEvent() {
	canvasContainer.scrollTop = element.scrollTop;
	canvasContainer.scrollLeft = element.scrollLeft;
}

function attachElementToCanvasEvent() {
	element.scrollTop = canvasContainer.scrollTop;
	element.scrollLeft = canvasContainer.scrollLeft;
}

function initVariables(highlighter) {
	attachCanvasToElement = attachCanvasToElementEvent.bind(highlighter);
	attachElementToCanvas = attachElementToCanvasEvent.bind(highlighter);
	canvasContainer = highlighter.getCanvasContainer();
	element = highlighter.getElement();
}

function hookCanvasToElement() {
	element.addEventListener('scroll', attachCanvasToElement);
}

function unhookCanvasFromElement() {
	element.removeEventListener('scroll', attachCanvasToElement);
}

function hookElementToCanvas() {
	canvasContainer.addEventListener('scroll', attachElementToCanvas);
}

function unhookElementFromCanvas() {
	canvasContainer.removeEventListener('scroll', attachElementToCanvas);
}

exports.default = {
	initVariables: initVariables,
	hookCanvasToElement: hookCanvasToElement,
	unhookCanvasFromElement: unhookCanvasFromElement,
	hookElementToCanvas: hookElementToCanvas,
	unhookElementFromCanvas: unhookElementFromCanvas
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxoaWdobGlnaHRlci5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcY2FsaWJhcnRpb24uanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGNhbnZhc3N0eWxlZGltZW5zaW9uLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3LmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxkcmF3c3R5bGVzLmpzIiwic3JjXFxqc1xcc3RydWN0dXJlXFxmdW5jdGlvbnMuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXGhpZ2hsaWdodGVyYWN0aXZhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcaW5pdGlhdGlvbi5qcyIsInNyY1xcanNcXHN0cnVjdHVyZVxcc2F2ZWxvYWQuanMiLCJzcmNcXGpzXFxzdHJ1Y3R1cmVcXHNjcm9sbGF0dGFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLElBQUksY0FBZSxVQUFTLENBQVQsRUFBWTs7QUFFOUIsVUFBUyxXQUFULENBQXFCLE9BQXJCLEVBQThCO0FBQzdCLE9BQUssT0FBTCxHQUFlLE9BQWY7QUFDQSxPQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsdUJBQVcsbUJBQVgsQ0FBK0IsSUFBL0I7QUFDQTs7QUFFRCxhQUFZLFNBQVosQ0FBc0IsVUFBdEIsR0FBbUMsWUFBVztBQUM3QyxTQUFPLFNBQVMsYUFBVCxDQUF1QixLQUFLLE9BQUwsQ0FBYSxPQUFwQyxDQUFQO0FBQ0EsRUFGRDs7QUFJQSxhQUFZLFNBQVosQ0FBc0IsZ0JBQXRCLEdBQXlDLFlBQVc7QUFDbkQsU0FBTyxLQUFLLE9BQUwsQ0FBYSxhQUFwQjtBQUNBLEVBRkQ7O0FBSUEsYUFBWSxTQUFaLENBQXNCLGtCQUF0QixHQUEyQyxZQUFXO0FBQ3JELFNBQU8sS0FBSyxPQUFMLENBQWEsZUFBcEI7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QztBQUNqQyxTQUFRLG1CQUFSLENBQTRCLFFBQTVCLEVBQXNDLHFCQUF0QztBQUNBOztBQUVELFNBQVMsbUJBQVQsR0FBOEI7QUFDN0IsaUJBQWdCLGdCQUFoQixDQUFpQyxRQUFqQyxFQUEyQyxxQkFBM0M7QUFDQTs7QUFFRCxTQUFTLHVCQUFULEdBQWtDO0FBQ2pDLGlCQUFnQixtQkFBaEIsQ0FBb0MsUUFBcEMsRUFBOEMscUJBQTlDO0FBQ0E7O2tCQUVjO0FBQ2QsZ0JBQWUsYUFERDtBQUVkLHNCQUFxQixtQkFGUDtBQUdkLDBCQUF5Qix1QkFIWDtBQUlkLHNCQUFxQixtQkFKUDtBQUtkLDBCQUF5QjtBQUxYLEMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGluaXRpYXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaW5pdGlhdGlvbi5qcyc7XHJcbmltcG9ydCBoaWdobGlnaHRlckFjdGl2YXRpb24gZnJvbSAnLi9zdHJ1Y3R1cmUvaGlnaGxpZ2h0ZXJhY3RpdmF0aW9uLmpzJztcclxuaW1wb3J0IGRyYXdTdHlsZXMgZnJvbSAnLi9zdHJ1Y3R1cmUvZHJhd3N0eWxlcy5qcyc7XHJcbmltcG9ydCBzYXZlbG9hZCBmcm9tICcuL3N0cnVjdHVyZS9zYXZlbG9hZC5qcyc7XHJcblxyXG52YXIgSGlnaGxpZ2h0ZXIgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuXHRmdW5jdGlvbiBIaWdobGlnaHRlcihvcHRpb25zKSB7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cdFx0dGhpcy5pbWFnZSA9ICcnO1xyXG5cdFx0aW5pdGlhdGlvbi5pbml0Q2FudmFzT25FbGVtZW50KHRoaXMpO1xyXG5cdH1cclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5lbGVtZW50KTtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0Q2FudmFzRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5jYW52YXNFbGVtZW50O1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRDYW52YXNDb250YWluZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuY2FudmFzQ29udGFpbmVyO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRXaG9sZUNvbnRhaW5lciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5jb250YWluZXIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5jb250YWluZXIpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRaSW5kZXggPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMuaW5kZXggfHwgJzEnO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRDYWxpYmFyYXRpb25MZXZlbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5jYWxpYmFyYXRpb25MZXZlbCB8fCAxMDtcclxuXHR9O1xyXG5cclxuXHRIaWdobGlnaHRlci5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMubGFuZyB8fCAnZSc7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5yYWRpdXMgfHwgMTA7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldENvbnRleHQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmdldENhbnZhc0VsZW1lbnQoKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5nZXRPcGFjaXR5ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLm9wYWNpdHk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLmNvbG9yIHx8ICd5ZWxsb3cnO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5hY3RpdmF0ZUhpZ2hsaWdodGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRoaWdobGlnaHRlckFjdGl2YXRpb24uYWN0aXZhdGUodGhpcyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmRlYWN0aXZhdGVIaWdobGlnaHRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aGlnaGxpZ2h0ZXJBY3RpdmF0aW9uLmRlYWN0aXZhdGUodGhpcyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLnN0YXJ0TWFya2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRkcmF3U3R5bGVzLmluaXRNYXJrU3R5bGUodGhpcyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLnN0YXJ0RXJhc2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRkcmF3U3R5bGVzLmluaXRFcmFzZVN0eWxlKHRoaXMpO1xyXG5cdH07XHJcblxyXG5cdEhpZ2hsaWdodGVyLnByb3RvdHlwZS5zYXZlSW1hZ2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdHNhdmVsb2FkLnNhdmUodGhpcyk7XHJcblx0fTtcclxuXHJcblx0SGlnaGxpZ2h0ZXIucHJvdG90eXBlLmxvYWRJbWFnZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c2F2ZWxvYWQubG9hZCh0aGlzKTtcclxuXHR9O1xyXG5cclxuXHR3aW5kb3cuSGlnaGxpZ2h0ZXIgPSBIaWdobGlnaHRlcjtcclxuXHJcblx0cmV0dXJuIEhpZ2hsaWdodGVyO1xyXG5cclxufSkoalF1ZXJ5KTsiLCIvLyBjYWxpYmFyYXRpb24gYWxnb3JpdGhtcyBmb3IgeCBhbmQgWSBwb3NpdGlvbnMgb2YgcG9pbnRzXHJcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbigpIHtcclxuXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVgoY2xpZW50WCwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZykge1xyXG5cdFx0dmFyIGVsZW1lbnRYID0gY2xpZW50WDtcclxuXHRcdGVsZW1lbnRYID0gY2FsaWJhcmF0ZUVsZW1lbnRYKGVsZW1lbnRYLCBwYXJlbnRzKTtcclxuXHRcdGVsZW1lbnRYID0gY2FsaWJhcmF0ZVNjcm9sbExlZnQoZWxlbWVudFgsIHBhcmVudHMsIGNhbnZhc0NvbnRhaW5lcik7XHJcblx0XHRlbGVtZW50WCA9IGNhbGliYXJhdGVTY2FsZVgoZWxlbWVudFgsIGNhbnZhc0NvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIGxhbmcpO1xyXG5cdFx0cmV0dXJuIGVsZW1lbnRYO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZVkoY2xpZW50WSwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSkge1xyXG5cdFx0dmFyIGVsZW1lbnRZID0gY2xpZW50WTtcclxuXHRcdGVsZW1lbnRZID0gY2FsaWJhcmF0ZUVsZW1lbnRZKGVsZW1lbnRZLCBwYXJlbnRzKTtcclxuXHRcdGVsZW1lbnRZID0gY2FsaWJhcmF0ZVNjcm9sbFRvcChlbGVtZW50WSwgcGFyZW50cywgY2FudmFzQ29udGFpbmVyKTtcclxuXHRcdGVsZW1lbnRZID0gY2FsaWJhcmF0ZVNjYWxlWShlbGVtZW50WSwgY2FudmFzQ29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSk7XHJcblx0XHRyZXR1cm4gZWxlbWVudFk7XHJcblx0fVxyXG5cclxuXHQvLyBpbiBjYXNlIG9mIGFic29sdXRlIGRpdnMgb25seSAtIGNhbGN1bGF0ZSBsZWZ0XHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZUVsZW1lbnRYKGNsaWVudFgsIHBhcmVudHMpIHtcclxuXHRcdHZhciBhZGRpdGlvbnMgPSAwO1xyXG5cdFx0bGV0IGFjY3VtT2Zmc2V0TGVmdCA9IDA7XHJcblx0XHRwYXJlbnRzID0gcGFyZW50cy50b0FycmF5KCkucmV2ZXJzZSgpO1xyXG5cdFx0cGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIG51bWJlcikge1xyXG5cdFx0XHRhZGRpdGlvbnMgKz0gKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIGFjY3VtT2Zmc2V0TGVmdCk7XHJcblx0XHRcdGFjY3VtT2Zmc2V0TGVmdCArPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRYIC0gYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gaW4gY2FzZSBvZiBhYnNvbHV0ZSBkaXZzIG9ubHkgLSBjYWxjdWxhdGUgdG9wXHJcblx0ZnVuY3Rpb24gY2FsaWJhcmF0ZUVsZW1lbnRZKGNsaWVudFksIHBhcmVudHMpIHtcclxuXHRcdHZhciBhZGRpdGlvbnMgPSAwO1xyXG5cdFx0bGV0IGFjY3VtT2Zmc2V0VG9wID0gMDtcclxuXHRcdHBhcmVudHMgPSBwYXJlbnRzLnRvQXJyYXkoKS5yZXZlcnNlKCk7XHJcblx0XHRwYXJlbnRzLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgbnVtYmVyKSB7XHJcblx0XHRcdGFkZGl0aW9ucyArPSAoZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBhY2N1bU9mZnNldFRvcCk7XHJcblx0XHRcdGFjY3VtT2Zmc2V0VG9wICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gY2xpZW50WSAtIGFkZGl0aW9ucztcclxuXHR9XHJcblxyXG5cdC8vIGNhbGN1bGF0ZSBzY3JvbGwgbGVmdFxyXG5cdGZ1bmN0aW9uIGNhbGliYXJhdGVTY3JvbGxMZWZ0KGNsaWVudFgsIHBhcmVudHMsIGNvbnRhaW5lcikge1xyXG5cdFx0dmFyIGluaXRpYWxXaWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcclxuXHRcdHZhciBzY2FsZWRXaWR0aCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuXHRcdHZhciB3aWR0aERpZmYgPSBzY2FsZWRXaWR0aCAtIGluaXRpYWxXaWR0aDtcclxuXHRcdHZhciBzY2FsZVggPSBzY2FsZWRXaWR0aCAvIGluaXRpYWxXaWR0aDtcclxuXHRcdHNjYWxlWCA9IHBhcnNlRmxvYXQoc2NhbGVYLnRvRml4ZWQoNSkpO1xyXG5cclxuXHRcdHZhciBhZGRpdGlvbnMgPSAwO1xyXG5cdFx0cGFyZW50cy5lYWNoKGZ1bmN0aW9uKG51bWJlciwgZWxlbWVudCkge1xyXG5cdFx0XHRpZiAoZWxlbWVudCA9PT0gY29udGFpbmVyKSB7XHJcblx0XHRcdFx0YWRkaXRpb25zICs9IGVsZW1lbnQuc2Nyb2xsTGVmdCArIGVsZW1lbnQuc2Nyb2xsTGVmdCAqIChzY2FsZVggLSAxKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhZGRpdGlvbnMgKz0gZWxlbWVudC5zY3JvbGxMZWZ0O1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRYICsgYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHNjcm9sbCB0b3BcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2Nyb2xsVG9wKGNsaWVudFksIHBhcmVudHMsIGNvbnRhaW5lcikge1xyXG5cdFx0dmFyIGluaXRpYWxIZWlnaHQgPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0dmFyIHNjYWxlZEhlaWdodCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcblx0XHR2YXIgc2NhbGVZID0gc2NhbGVkSGVpZ2h0IC8gaW5pdGlhbEhlaWdodDtcclxuXHRcdHNjYWxlWSA9IHBhcnNlRmxvYXQoc2NhbGVZLnRvRml4ZWQoNSkpO1xyXG5cclxuXHRcdHZhciBhZGRpdGlvbnMgPSAwO1xyXG5cdFx0cGFyZW50cy5lYWNoKGZ1bmN0aW9uKG51bWJlciwgZWxlbWVudCkge1xyXG5cdFx0XHRpZiAoZWxlbWVudCA9PT0gY29udGFpbmVyKSB7XHJcblx0XHRcdFx0YWRkaXRpb25zICs9IGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5zY3JvbGxUb3AgKiAoc2NhbGVZIC0gMSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YWRkaXRpb25zICs9IGVsZW1lbnQuc2Nyb2xsVG9wO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBjbGllbnRZICsgYWRkaXRpb25zO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHNjYWxlIFhcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2NhbGVYKGNsaWVudFgsIGNvbnRhaW5lciwgY2FsRGVncmVlLCBsYW5nKSB7XHJcblx0XHR2YXIgaW5pdGlhbFdpZHRoID0gY29udGFpbmVyLm9mZnNldFdpZHRoO1xyXG5cdFx0dmFyIHNjYWxlZFdpZHRoID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5cdFx0dmFyIHdpZHRoRGlmZiA9IHNjYWxlZFdpZHRoIC0gaW5pdGlhbFdpZHRoO1xyXG5cdFx0dmFyIHNjYWxlWCA9IHNjYWxlZFdpZHRoIC8gaW5pdGlhbFdpZHRoO1xyXG5cdFx0c2NhbGVYID0gcGFyc2VGbG9hdChzY2FsZVgudG9GaXhlZCg1KSk7XHJcblx0XHR2YXIgY2FsaWJhcmF0ZWRWYWx1ZSA9IDA7XHJcblx0XHRmb3IgKHZhciBjYWxMZXZlbCA9IDA7IGNhbExldmVsIDw9IGNhbERlZ3JlZTsgY2FsTGV2ZWwrKykge1xyXG5cdFx0XHRjYWxpYmFyYXRlZFZhbHVlICs9IGNsaWVudFggKiBNYXRoLnBvdygxIC0gc2NhbGVYLCBjYWxMZXZlbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGxhbmcgPT09ICdhJykge1xyXG5cdFx0XHQvLyBjYWxpYmFyYXRlIHdpZHRoXHJcblx0XHRcdGZvciAodmFyIF9jYWxMZXZlbCA9IDA7IF9jYWxMZXZlbCA8PSBjYWxEZWdyZWU7IF9jYWxMZXZlbCsrKSB7XHJcblx0XHRcdFx0Y2FsaWJhcmF0ZWRWYWx1ZSArPSB3aWR0aERpZmYgKiBNYXRoLnBvdygxIC0gc2NhbGVYLCBfY2FsTGV2ZWwpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBjYWxpYmFyYXRlZFZhbHVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjYWxpYmFyYXRlZFZhbHVlO1xyXG5cdH1cclxuXHJcblx0Ly8gY2FsY3VsYXRlIHNjYWxlIFlcclxuXHRmdW5jdGlvbiBjYWxpYmFyYXRlU2NhbGVZKGNsaWVudFksIGNvbnRhaW5lciwgY2FsRGVncmVlLCB0cmFuc2Zvcm1PcmlnaW5ZKSB7XHJcblx0XHR2YXIgaW5pdGlhbEhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XHJcblx0XHR2YXIgc2NhbGVkSGVpZ2h0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHRcdHRyYW5zZm9ybU9yaWdpblkgPSBOdW1iZXIodHJhbnNmb3JtT3JpZ2luWSk7XHJcblx0XHR2YXIgdHJhbnNmb3JtT3JpZ2luWUNvcnJlY3Rpb25GYWN0b3IgPSB0cmFuc2Zvcm1PcmlnaW5ZIC8gKHNjYWxlZEhlaWdodCArIHRyYW5zZm9ybU9yaWdpblkpO1xyXG5cdFx0dmFyIHNjYWxlWSA9IHNjYWxlZEhlaWdodCAvIGluaXRpYWxIZWlnaHQ7XHJcblx0XHRzY2FsZVkgPSBwYXJzZUZsb2F0KHNjYWxlWS50b0ZpeGVkKDUpKTtcclxuXHRcdHZhciBjYWxpYmFyYXRlZFZhbHVlID0gMDtcclxuXHRcdGZvciAodmFyIGNhbExldmVsID0gMDsgY2FsTGV2ZWwgPD0gY2FsRGVncmVlOyBjYWxMZXZlbCsrKSB7XHJcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgKz0gY2xpZW50WSAqIE1hdGgucG93KDEgLSBzY2FsZVksIGNhbExldmVsKTtcclxuXHRcdH1cclxuXHRcdGZvciAodmFyIF9jYWxMZXZlbDIgPSAxOyBfY2FsTGV2ZWwyIDw9IGNhbERlZ3JlZTsgX2NhbExldmVsMisrKSB7XHJcblx0XHRcdGNhbGliYXJhdGVkVmFsdWUgLT0gdHJhbnNmb3JtT3JpZ2luWSAqIE1hdGgucG93KDEgLSBzY2FsZVksIF9jYWxMZXZlbDIpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNhbGliYXJhdGVkVmFsdWU7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0Y2FsaWJhcmF0ZVg6IGNhbGliYXJhdGVYLFxyXG5cdFx0Y2FsaWJhcmF0ZVk6IGNhbGliYXJhdGVZXHJcblx0fVxyXG5cclxufSgpKTtcclxuIiwiaW1wb3J0IGZ1bmN0aW9ucyBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XHJcblxyXG4vLyBkZWZhdWx0IGNhbnZhcyBzdHlsZVxyXG5mdW5jdGlvbiBpbml0Q2FudmFzU3R5bGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xyXG5cdGxldCByYWRpdXMgPSBoaWdobGlnaHRlci5nZXRSYWRpdXMoKTtcclxuXHRjb250ZXh0LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcblx0Y29udGV4dC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuXHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcclxuXHRjb250ZXh0LnN0cm9rZVN0eWxlID0gaGlnaGxpZ2h0ZXIuZ2V0Q29sb3IoKTtcclxuXHRjb250ZXh0LmZpbGxTdHlsZSA9IGhpZ2hsaWdodGVyLmdldENvbG9yKCk7XHJcblx0Y29udGV4dC5saW5lV2lkdGggPSByYWRpdXMgKiAyO1xyXG59XHJcblxyXG4vLyBBZGp1c3QgY2FudmFzIGNvbnRhaW5lciBwb3NpdGlvbiBhbmQgZGltZW5zaW9ucyB3aXRoIG5vbmUgc2NhbGVkIGVsZW1lbnRcclxuZnVuY3Rpb24gY2FudmFzQ29udGFpbmVyQWRqdXN0RGltZW5zaW9ucyhoaWdobGlnaHRlciwgY2FudmFzQ29udGFpbmVyLCBlbGVtZW50KSB7XHJcblx0bGV0IGVsZW1lbnRQb3NpdGlvbnMgPSBmdW5jdGlvbnMuZ2V0UG9zaXRpb24oZWxlbWVudCk7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4JztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUubGVmdCA9IGVsZW1lbnRQb3NpdGlvbnMueCArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnRvcCA9IGVsZW1lbnRQb3NpdGlvbnMueSArICdweCc7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnpJbmRleCA9IGhpZ2hsaWdodGVyLmdldFpJbmRleCgpO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gaGlnaGxpZ2h0ZXIuZ2V0T3BhY2l0eSgpO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGFkanVzdENhbnZhc09uUmVzaXplLmJpbmQoaGlnaGxpZ2h0ZXIpKTtcclxufVxyXG5cclxuLy8gZWxlbWVudCBvbiByZXNpemVcclxuZnVuY3Rpb24gYWRqdXN0Q2FudmFzT25SZXNpemUoKXtcclxuXHRsZXQgY2FudmFzQ29udGFpbmVyID0gdGhpcy5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRsZXQgZWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xyXG5cdGxldCBlbGVtZW50UG9zaXRpb25zID0gZnVuY3Rpb25zLmdldFBvc2l0aW9uKGVsZW1lbnQpO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gZWxlbWVudFBvc2l0aW9ucy54ICsgJ3B4JztcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUudG9wID0gZWxlbWVudFBvc2l0aW9ucy55ICsgJ3B4JztcclxufVxyXG5cclxuLy8gQWRqdXN0IGNhbnZhcyBlbGVtZW50IGRpbWVuc2lvbnNcclxuZnVuY3Rpb24gY2FudmFzRWxlbWVudEFkanVzdERpbWVuc2lvbnMoY2FudmFzRWxlbWVudCwgZWxlbWVudCkge1xyXG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUud2lkdGggPSBlbGVtZW50LnNjcm9sbFdpZHRoICsgJ3B4JztcclxuXHRjYW52YXNFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdGNhbnZhc0VsZW1lbnQud2lkdGggPSBlbGVtZW50LnNjcm9sbFdpZHRoO1xyXG5cdGNhbnZhc0VsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG5cdGNhbnZhc0VsZW1lbnQuaGVpZ2h0ID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXQoaGlnaGxpZ2h0ZXIsIGNhbnZhc0NvbnRhaW5lciwgZWxlbWVudCwgY2FudmFzRWxlbWVudCl7XHJcblx0Y2FudmFzQ29udGFpbmVyQWRqdXN0RGltZW5zaW9ucyhoaWdobGlnaHRlciwgY2FudmFzQ29udGFpbmVyLCBlbGVtZW50KTtcclxuXHRjYW52YXNFbGVtZW50QWRqdXN0RGltZW5zaW9ucyhjYW52YXNFbGVtZW50LCBlbGVtZW50KTtcclxuXHRpbml0Q2FudmFzU3R5bGUoaGlnaGxpZ2h0ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0aW5pdDogaW5pdFxyXG59IiwiaW1wb3J0IGNhbGliYXJ0aW9uIGZyb20gJy4vY2FsaWJhcnRpb24uanMnO1xyXG5cclxuLy8gcHV0IGEgcG9pbnQgb24gY2FudmFzXHJcbmZ1bmN0aW9uIHB1dFBvaW50KGhpZ2hsaWdodGVyLCBlbGVtZW50WCwgZWxlbWVudFkpIHtcclxuXHR2YXIgY29udGV4dCA9IGhpZ2hsaWdodGVyLmdldENvbnRleHQoKTtcclxuXHR2YXIgcmFkaXVzID0gaGlnaGxpZ2h0ZXIuZ2V0UmFkaXVzKCk7XHJcblx0Y29udGV4dC5iZWdpblBhdGgoKTtcclxuXHRjb250ZXh0LmFyYyhlbGVtZW50WCwgZWxlbWVudFksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIpO1xyXG5cdGNvbnRleHQuZmlsbCgpO1xyXG59XHJcblxyXG4vLyBzdGFydCBwYWludCBvbiBjYW52YXNcclxuZnVuY3Rpb24gc3RhcnREcmF3aW5nKGV2ZW50KSB7XHJcblx0dmFyIHBhcmVudHMgPSAkKGV2ZW50LnRhcmdldCkucGFyZW50cygpO1xyXG5cdHZhciBjb250YWluZXIgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcclxuXHR2YXIgZWxlbWVudFggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQucGFnZVg7XHJcblx0dmFyIGVsZW1lbnRZID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LnBhZ2VZO1xyXG5cdHZhciB0cmFuc2Zvcm1PcmlnaW5ZID0gJChjb250YWluZXIpLmNzcygndHJhbnNmb3JtLW9yaWdpbicpLnNwbGl0KCcgJylbMV07XHJcblx0dmFyIGNhbGliYXJhdGlvbkxldmVsID0gdGhpcy5nZXRDYWxpYmFyYXRpb25MZXZlbCgpO1xyXG5cdHZhciBsYW5nID0gdGhpcy5nZXRMYW5ndWFnZSgpO1xyXG5cdHZhciBjb250ZXh0ID0gdGhpcy5nZXRDb250ZXh0KCk7XHJcblx0dHJhbnNmb3JtT3JpZ2luWSA9IHRyYW5zZm9ybU9yaWdpblkucmVwbGFjZSgncHgnLCAnJyk7XHJcblxyXG5cdGVsZW1lbnRYID0gY2FsaWJhcnRpb24uY2FsaWJhcmF0ZVgoZWxlbWVudFgsIHBhcmVudHMsIGNvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIGxhbmcpO1xyXG5cdGVsZW1lbnRZID0gY2FsaWJhcnRpb24uY2FsaWJhcmF0ZVkoZWxlbWVudFksIHBhcmVudHMsIGNvbnRhaW5lciwgY2FsaWJhcmF0aW9uTGV2ZWwsIHRyYW5zZm9ybU9yaWdpblkpO1xyXG5cclxuXHRwdXRQb2ludCh0aGlzLCBlbGVtZW50WCwgZWxlbWVudFkpO1xyXG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0Y29udGV4dC5tb3ZlVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxufVxyXG5cclxuLy8gZHJhdyBsaW5lcyBvbiBjYW52YXNcclxuZnVuY3Rpb24gZHJhd0xpbmUoZXZlbnQpIHtcclxuXHR2YXIgcGFyZW50cyA9ICQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCk7XHJcblx0dmFyIGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG5cdHZhciBlbGVtZW50WCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5wYWdlWDtcclxuXHR2YXIgZWxlbWVudFkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQucGFnZVk7XHJcblx0dmFyIHRyYW5zZm9ybU9yaWdpblkgPSAkKGNvbnRhaW5lcikuY3NzKCd0cmFuc2Zvcm0tb3JpZ2luJykuc3BsaXQoJyAnKVsxXTtcclxuXHR2YXIgY2FsaWJhcmF0aW9uTGV2ZWwgPSB0aGlzLmdldENhbGliYXJhdGlvbkxldmVsKCk7XHJcblx0dmFyIGxhbmcgPSB0aGlzLmdldExhbmd1YWdlKCk7XHJcblx0dmFyIGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoKTtcclxuXHR0cmFuc2Zvcm1PcmlnaW5ZID0gdHJhbnNmb3JtT3JpZ2luWS5yZXBsYWNlKCdweCcsICcnKTtcclxuXHJcblx0ZWxlbWVudFggPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWChlbGVtZW50WCwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgbGFuZyk7XHJcblx0ZWxlbWVudFkgPSBjYWxpYmFydGlvbi5jYWxpYmFyYXRlWShlbGVtZW50WSwgcGFyZW50cywgY29udGFpbmVyLCBjYWxpYmFyYXRpb25MZXZlbCwgdHJhbnNmb3JtT3JpZ2luWSk7XHJcblxyXG5cdGNvbnRleHQubGluZVRvKGVsZW1lbnRYLCBlbGVtZW50WSk7XHJcblx0Y29udGV4dC5zdHJva2UoKTtcclxuXHRwdXRQb2ludCh0aGlzLCBlbGVtZW50WCwgZWxlbWVudFkpO1xyXG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcblx0Y29udGV4dC5tb3ZlVG8oZWxlbWVudFgsIGVsZW1lbnRZKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdHB1dFBvaW50OiBwdXRQb2ludCxcclxuXHRzdGFydERyYXdpbmc6IHN0YXJ0RHJhd2luZyxcclxuXHRkcmF3TGluZTogZHJhd0xpbmVcclxufSIsImZ1bmN0aW9uIGluaXRNYXJrU3R5bGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjb250ZXh0ID0gaGlnaGxpZ2h0ZXIuZ2V0Q29udGV4dCgpO1xyXG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0RXJhc2VTdHlsZShoaWdobGlnaHRlcil7XHJcblx0bGV0IGNvbnRleHQgPSBoaWdobGlnaHRlci5nZXRDb250ZXh0KCk7XHJcblx0Y29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0aW5pdE1hcmtTdHlsZTogaW5pdE1hcmtTdHlsZSxcclxuXHRpbml0RXJhc2VTdHlsZTogaW5pdEVyYXNlU3R5bGVcclxufVxyXG4iLCIvLyBnZXQgcG9zaXRpb24gb2YgZWxlbWVudFxyXG5mdW5jdGlvbiBnZXRQb3MoZWwpIHtcclxuXHRsZXQgZWxlbWVudHMgPSBbXTtcclxuXHRmb3IgKHZhciBseCA9IDAsIGx5ID0gMDsgZWwgIT0gbnVsbDsgbHggKz0gZWwub2Zmc2V0TGVmdCwgbHkgKz0gZWwub2Zmc2V0VG9wLCBlbCA9IGVsLm9mZnNldFBhcmVudCl7XHJcblx0XHRlbGVtZW50cy5wdXNoKGVsKTtcclxuXHR9XHJcblx0cmV0dXJuIHsgeDogbHgsIHk6IGx5LCBlbGVtZW50czogZWxlbWVudHMgfTtcclxufVxyXG5cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgYW4gZWxlbWVudCdzIGV4YWN0IHBvc2l0aW9uXHJcbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsKSB7XHJcblx0dmFyIHhQb3MgPSAwO1xyXG5cdHZhciB5UG9zID0gMDtcclxuXHJcblx0d2hpbGUgKGVsKSB7XHJcblx0XHRpZiAoZWwudGFnTmFtZSA9PSBcIkJPRFlcIikge1xyXG5cdFx0XHQvLyBkZWFsIHdpdGggYnJvd3NlciBxdWlya3Mgd2l0aCBib2R5L3dpbmRvdy9kb2N1bWVudCBhbmQgcGFnZSBzY3JvbGxcclxuXHRcdFx0dmFyIHhTY3JvbGwgPSBlbC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG5cdFx0XHR2YXIgeVNjcm9sbCA9IGVsLnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG5cclxuXHRcdFx0eFBvcyArPSAoZWwub2Zmc2V0TGVmdCAtIHhTY3JvbGwgKyBlbC5jbGllbnRMZWZ0KTtcclxuXHRcdFx0eVBvcyArPSAoZWwub2Zmc2V0VG9wIC0geVNjcm9sbCArIGVsLmNsaWVudFRvcCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBmb3IgYWxsIG90aGVyIG5vbi1CT0RZIGVsZW1lbnRzXHJcblx0XHRcdHhQb3MgKz0gKGVsLm9mZnNldExlZnQgLSBlbC5zY3JvbGxMZWZ0ICsgZWwuY2xpZW50TGVmdCk7XHJcblx0XHRcdHlQb3MgKz0gKGVsLm9mZnNldFRvcCAtIGVsLnNjcm9sbFRvcCArIGVsLmNsaWVudFRvcCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZWwgPSBlbC5vZmZzZXRQYXJlbnQ7XHJcblx0fVxyXG5cdHJldHVybiB7XHJcblx0XHR4OiB4UG9zLFxyXG5cdFx0eTogeVBvc1xyXG5cdH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRnZXRQb3M6IGdldFBvcyxcclxuXHRnZXRQb3NpdGlvbjogZ2V0UG9zaXRpb25cclxufSIsImltcG9ydCBzY3JvbGxhdHRhY2ggZnJvbSAnLi9zY3JvbGxhdHRhY2guanMnO1xyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGUoaGlnaGxpZ2h0ZXIpe1xyXG5cdGxldCBjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRjYW52YXNDb250YWluZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcclxuXHRzY3JvbGxhdHRhY2gudW5ob29rQ2FudmFzRnJvbUVsZW1lbnQoKTtcclxuXHRzY3JvbGxhdHRhY2guaG9va0VsZW1lbnRUb0NhbnZhcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWFjdGl2YXRlKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgY2FudmFzQ29udGFpbmVyID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzQ29udGFpbmVyKCk7XHJcblx0Y2FudmFzQ29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcblx0c2Nyb2xsYXR0YWNoLmhvb2tDYW52YXNUb0VsZW1lbnQoKTtcclxuXHRzY3JvbGxhdHRhY2gudW5ob29rRWxlbWVudEZyb21DYW52YXMoKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdGFjdGl2YXRlOiBhY3RpdmF0ZSxcclxuXHRkZWFjdGl2YXRlOiBkZWFjdGl2YXRlXHJcbn0iLCJpbXBvcnQgZHJhdyBmcm9tICcuL2RyYXcuanMnO1xyXG5pbXBvcnQgY2FudmFzc3R5bGVkaW1lbnNpb24gZnJvbSAnLi9jYW52YXNzdHlsZWRpbWVuc2lvbi5qcyc7XHJcbmltcG9ydCBzY3JvbGxhdHRhY2ggZnJvbSAnLi9zY3JvbGxhdHRhY2guanMnO1xyXG5cclxuLy8gaW5pdGlhdGUgY2FudmFzIG9uIGluaXRpYXRpbmcgaGlnaGxpZ2h0ZXIgb2JqZWN0XHJcbmZ1bmN0aW9uIGluaXRDYW52YXNPbkVsZW1lbnQoaGlnaGxpZ2h0ZXIpIHtcclxuXHRsZXQgd2hvbGVDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRXaG9sZUNvbnRhaW5lcigpO1xyXG5cdGxldCBlbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0RWxlbWVudCgpO1xyXG5cdGxldCBjYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0bGV0IGNhbnZhc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdHdob2xlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gd2hvbGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gIT0gJ2Fic29sdXRlJyA/ICdyZWxhdGl2ZScgOiAnYWJzb2x1dGUnO1xyXG5cclxuXHQvLyBhZGQgaGlnaGxpZ2h0ZXJcclxuXHRjYW52YXNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzRWxlbWVudCk7XHJcblx0d2hvbGVDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzQ29udGFpbmVyKTtcclxuXHRoaWdobGlnaHRlci5vcHRpb25zLmNhbnZhc0NvbnRhaW5lciA9IGNhbnZhc0NvbnRhaW5lcjtcclxuXHRoaWdobGlnaHRlci5vcHRpb25zLmNhbnZhc0VsZW1lbnQgPSBjYW52YXNFbGVtZW50O1xyXG5cclxuXHQvLyBpbml0IGNhbnZhcyBzdHlsZXMgYW5kIGRpbWVuc2lvbnNcclxuXHRjYW52YXNzdHlsZWRpbWVuc2lvbi5pbml0KGhpZ2hsaWdodGVyLCBjYW52YXNDb250YWluZXIsIGVsZW1lbnQsIGNhbnZhc0VsZW1lbnQpO1xyXG5cclxuXHQvLyBiaW5kIGNhbnZhcyB0byBlbGVtZW50IG9uIHNjcm9sbFxyXG5cdHNjcm9sbGF0dGFjaC5pbml0VmFyaWFibGVzKGhpZ2hsaWdodGVyKTtcclxuXHRzY3JvbGxhdHRhY2guaG9va0NhbnZhc1RvRWxlbWVudCgpO1xyXG5cclxuXHQvLyBzdGFydCBkcmF3IG9uIGNhbnZhc1xyXG5cdGNhbnZhc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRyYXcuc3RhcnREcmF3aW5nLmJpbmQoaGlnaGxpZ2h0ZXIpLCBmYWxzZSk7XHJcblx0Y2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBkcmF3LmRyYXdMaW5lLmJpbmQoaGlnaGxpZ2h0ZXIpLCBmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuXHRpbml0Q2FudmFzT25FbGVtZW50OiBpbml0Q2FudmFzT25FbGVtZW50XHJcbn0iLCJmdW5jdGlvbiBzYXZlKGhpZ2hsaWdodGVyKXtcclxuXHRsZXQgY2FudmFzRWxlbWVudCA9IGhpZ2hsaWdodGVyLmdldENhbnZhc0VsZW1lbnQoKTtcclxuXHRsZXQgaW1hZ2VEYXRhID0gY2FudmFzRWxlbWVudC50b0RhdGFVUkwoKTtcclxuXHRoaWdobGlnaHRlci5pbWFnZSA9IGltYWdlRGF0YTtcclxuXHRjb25zb2xlLmxvZyhpbWFnZURhdGEpO1xyXG5cdHJldHVybiBpbWFnZURhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWQoaGlnaGxpZ2h0ZXIpe1xyXG5cdGlmKGhpZ2hsaWdodGVyLmltYWdlKXtcclxuXHRcdGxldCBjYW52YXNFbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0Q2FudmFzRWxlbWVudCgpO1xyXG5cdFx0bGV0IGltYWdlID0gbmV3IEltYWdlKCk7XHJcblx0XHRpbWFnZS5zcmMgPSBoaWdobGlnaHRlci5pbWFnZTtcclxuXHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNhbnZhc0VsZW1lbnQuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1hZ2UsIDAgLCAwKTtcclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0c2F2ZTogc2F2ZSxcclxuXHRsb2FkOiBsb2FkXHJcbn0iLCJsZXQgZWxlbWVudDtcclxubGV0IGNhbnZhc0NvbnRhaW5lcjtcclxuLy9hdHRhY2ggY2FudmFzIHRvIGVsZW1lbnRcclxubGV0IGF0dGFjaENhbnZhc1RvRWxlbWVudDtcclxuLy9hdHRhY2ggZWxlbWVudCB0byBjYW52YXNcclxubGV0IGF0dGFjaEVsZW1lbnRUb0NhbnZhcztcclxuXHJcbmZ1bmN0aW9uIGF0dGFjaENhbnZhc1RvRWxlbWVudEV2ZW50KCl7XHJcblx0Y2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wO1xyXG5cdGNhbnZhc0NvbnRhaW5lci5zY3JvbGxMZWZ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudCgpe1xyXG5cdGVsZW1lbnQuc2Nyb2xsVG9wID0gY2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRlbGVtZW50LnNjcm9sbExlZnQgPSBjYW52YXNDb250YWluZXIuc2Nyb2xsTGVmdDtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFZhcmlhYmxlcyhoaWdobGlnaHRlcil7XHJcblx0YXR0YWNoQ2FudmFzVG9FbGVtZW50ID0gYXR0YWNoQ2FudmFzVG9FbGVtZW50RXZlbnQuYmluZChoaWdobGlnaHRlcik7XHJcblx0YXR0YWNoRWxlbWVudFRvQ2FudmFzPSBhdHRhY2hFbGVtZW50VG9DYW52YXNFdmVudC5iaW5kKGhpZ2hsaWdodGVyKTtcclxuXHRjYW52YXNDb250YWluZXIgPSBoaWdobGlnaHRlci5nZXRDYW52YXNDb250YWluZXIoKTtcclxuXHRlbGVtZW50ID0gaGlnaGxpZ2h0ZXIuZ2V0RWxlbWVudCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBob29rQ2FudmFzVG9FbGVtZW50KCl7XHJcblx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hDYW52YXNUb0VsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmhvb2tDYW52YXNGcm9tRWxlbWVudCgpe1xyXG5cdGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgYXR0YWNoQ2FudmFzVG9FbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaG9va0VsZW1lbnRUb0NhbnZhcygpe1xyXG5cdGNhbnZhc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hFbGVtZW50VG9DYW52YXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhcygpe1xyXG5cdGNhbnZhc0NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhdHRhY2hFbGVtZW50VG9DYW52YXMpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0aW5pdFZhcmlhYmxlczogaW5pdFZhcmlhYmxlcyxcclxuXHRob29rQ2FudmFzVG9FbGVtZW50OiBob29rQ2FudmFzVG9FbGVtZW50LFxyXG5cdHVuaG9va0NhbnZhc0Zyb21FbGVtZW50OiB1bmhvb2tDYW52YXNGcm9tRWxlbWVudCxcclxuXHRob29rRWxlbWVudFRvQ2FudmFzOiBob29rRWxlbWVudFRvQ2FudmFzLFxyXG5cdHVuaG9va0VsZW1lbnRGcm9tQ2FudmFzOiB1bmhvb2tFbGVtZW50RnJvbUNhbnZhc1xyXG59Il19
